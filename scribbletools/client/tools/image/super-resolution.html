<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Image Upscaler - FREE Super Resolution Photo Enhancer Tool</title>
  <meta name="description" content="Free AI-powered image upscaler! Enhance photo quality with super resolution technology. Upscale images 2x, 4x without quality loss. 100% free AI photo enhancer!">
  <meta name="keywords" content="AI image upscaler, super resolution, photo enhancer, image quality enhancer, AI photo upscaler, image resolution enhancer, photo quality improver, upscale image, enhance photo quality, AI image enhancement, photo restoration, image super resolution, AI photo enhancement, picture quality enhancer, image enlargement, photo upscaling tool, AI image quality improvement, enhance image resolution, AI photo quality booster, image sharpening, photo clarity enhancer, AI image processor, enhance picture quality, image detail enhancer, photo resolution booster, AI image optimizer, enhance photo sharpness, image quality restoration, AI photo restoration, enhance image clarity, photo detail enhancement">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://scribbletools.shramkavach.com/client/tools/image/super-resolution.html">
  <meta property="og:title" content="AI Image Upscaler - FREE Super Resolution Photo Enhancer Tool">
  <meta property="og:description" content="Free AI-powered image upscaler! Enhance photo quality with super resolution technology. Upscale images 2x, 4x without quality loss. 100% free AI photo enhancer!">
  <meta property="og:image" content="https://scribbletools.shramkavach.com/assets/og-image.svg">
  <meta property="og:site_name" content="Scribble Tools">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://scribbletools.shramkavach.com/client/tools/image/super-resolution.html">
  <meta property="twitter:title" content="AI Image Upscaler - FREE Super Resolution Photo Enhancer Tool">
  <meta property="twitter:description" content="Free AI-powered image upscaler! Enhance photo quality with super resolution technology. Upscale images 2x, 4x without quality loss. 100% free AI photo enhancer!">
  <meta property="twitter:image" content="https://scribbletools.shramkavach.com/assets/og-image.svg">
  
  <!-- Additional SEO Meta Tags -->
  <meta name="robots" content="index, follow">
  <meta name="author" content="Scribble Tools">
  <meta name="generator" content="Scribble Tools">
  <meta name="application-name" content="AI Image Upscaler">
  <meta name="apple-mobile-web-app-title" content="AI Image Upscaler">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#D9534F">
  <meta name="msapplication-navbutton-color" content="#D9534F">
  <meta name="apple-mobile-web-app-status-bar-style" content="#D9534F">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://scribbletools.shramkavach.com/client/tools/image/super-resolution.html">
  
  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "AI Image Upscaler",
    "description": "Free AI-powered super resolution tool to enhance and upscale images without quality loss. Advanced photo enhancement technology for better image quality.",
    "url": "https://scribbletools.shramkavach.com/client/tools/image/super-resolution.html",
    "applicationCategory": "MultimediaApplication",
    "operatingSystem": "Any",
    "permissions": "browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "featureList": [
      "AI-powered image upscaling",
      "Super resolution enhancement",
      "2x, 4x image enlargement",
      "Quality preservation",
      "Free to use",
      "No registration required"
    ],
    "provider": {
      "@type": "Organization",
      "name": "Scribble Tools",
      "url": "https://scribbletools.shramkavach.com"
    }
  }
  </script>
  
  <style>
    .super-resolution-tool body { font-family: 'Poppins', sans-serif; background: #F8F4E8; color: #333; }
    .super-resolution-tool main { display: block; }
    .super-resolution-tool .reduce-size-container { max-width: 800px; margin: 3em auto; background: #fff; border-radius: 1.2em; box-shadow: 0 4px 24px #eae3d5; padding: 2em 1.5em 2.5em 1.5em; }
    .super-resolution-tool .handwritten { font-family: 'Caveat', cursive; }
    .super-resolution-tool .upload-area { border: 3px dashed #D9534F; border-radius: 1em; padding: 3em 2em; text-align: center; margin: 2em 0; background: #FDFBF5; transition: all 0.3s; cursor: pointer; }
    .super-resolution-tool .upload-area:hover { background: #F0F8FF; border-color: #4682B4; }
    .super-resolution-tool .upload-icon { font-size: 3em; color: #D9534F; margin-bottom: 1em; }
    .super-resolution-tool .file-input { display: none; }
    .super-resolution-tool .upload-btn { background: #D9534F; color: #fff; border: none; border-radius: 0.5em; padding: 1em 2em; font-weight: 600; cursor: pointer; transition: all 0.2s; }
    .super-resolution-tool .upload-btn:hover { background: #c9302c; }
    .super-resolution-tool .choose-file-btn { background: #D9534F; color: #fff; border: none; border-radius: 0.5em; padding: 1em 2em; font-weight: 600; cursor: pointer; transition: all 0.2s; }
    .super-resolution-tool .choose-file-btn:hover { background: #c9302c; }
    .super-resolution-tool .upload-area h3 { color: #333; margin-bottom: 1em; font-weight: 600; }
    .super-resolution-tool .upload-area p { color: #666; margin-bottom: 1em; }
    .super-resolution-tool .upload-area input[type="file"] { display: none; }
    .super-resolution-tool .form-group { margin: 1.2em 0; }
    .super-resolution-tool .form-label { font-weight: 600; margin-bottom: 0.5em; display: block; }
    .super-resolution-tool .form-input { width: 100%; padding: 0.8em; border: 2px solid #EAE3D5; border-radius: 0.5em; font-size: 1em; margin-bottom: 1em; }
    .super-resolution-tool .process-btn { background: #228B22; color: #fff; border: none; border-radius: 0.5em; padding: 1em 2em; font-weight: 600; cursor: pointer; transition: all 0.2s; width: 100%; font-size: 1.1em; }
    .super-resolution-tool .process-btn:hover { background: #1e7e1e; }
    .super-resolution-tool .result-section { margin-top: 2em; text-align: center; }
    .super-resolution-tool .preview-image { max-width: 100%; max-height: 300px; border-radius: 0.5em; margin: 1em 0; }
    .super-resolution-tool .preview-section { margin-top: 2em; text-align: center; display: none; }
    .super-resolution-tool .preview-section h3 { color: #4682B4; margin-bottom: 1em; }
    .super-resolution-tool .uploaded-preview { max-width: 100%; max-height: 300px; border-radius: 0.5em; margin: 1em 0; border: 2px solid #EAE3D5; }
    .super-resolution-tool .clear-btn { background: #6c757d; color: #fff; border: none; border-radius: 0.5em; padding: 0.8em 1.5em; font-weight: 600; cursor: pointer; transition: all 0.2s; margin-left: 1em; }
    .super-resolution-tool .clear-btn:hover { background: #5a6268; }
    .super-resolution-tool .controls-section { display: none; margin: 2em 0; background: #FDFBF5; border-radius: 0.7em; padding: 1.2em; border: 1px solid #FFEAA7; }
    .super-resolution-tool .controls-section h3 { color: #4682B4; margin-bottom: 1em; font-weight: 600; }
    .super-resolution-tool .slider-control { margin-bottom: 1.5em; }
    .super-resolution-tool .slider-control label { display: block; margin-bottom: 0.5em; color: #333; font-weight: 600; }
    .super-resolution-tool .slider-control input[type="range"] { width: 100%; }
    .super-resolution-tool .output-preview { background: #FDFBF5; border-radius: 0.7em; padding: 1.2em; text-align: center; margin: 2em 0; border: 1px solid #FFEAA7; }
    .super-resolution-tool .output-preview h3 { color: #4682B4; margin-bottom: 1em; font-weight: 600; }
    .super-resolution-tool #live-preview-canvas { max-width: 100%; height: auto; border: 2px solid #EAE3D5; border-radius: 0.5em; margin: 1em 0; background: #fff; }
    .super-resolution-tool .output-card { display: none; margin-top: 1.5em; }
    .super-resolution-tool .btn-download { background: #228B22; color: #fff; border: none; border-radius: 0.5em; padding: 1em 2em; font-weight: 600; cursor: pointer; transition: all 0.2s; text-decoration: none; display: inline-block; margin-right: 1em; font-size: 1.1em; }
    .super-resolution-tool .btn-download:hover { background: #1e7e1e; color: #fff; text-decoration: none; }
    .super-resolution-tool .example-section { background: #FDFBF5; border: 1px solid #FFEAA7; border-radius: 0.7em; padding: 1.2em; margin: 2em 0; }
    .super-resolution-tool .example-section h3 { color: #4682B4; margin-bottom: 0.5em; }
    .super-resolution-tool .feature-list { background: #FDFBF5; border-radius: 0.7em; padding: 1.2em; margin: 2em 0; border: 1px solid #FFEAA7; }
    .super-resolution-tool .feature-list h3 { color: #4682B4; margin-bottom: 1em; font-weight: 600; }
    .super-resolution-tool .feature-list ul { list-style: none; padding: 0; }
    .super-resolution-tool .feature-list li { color: #333; margin-bottom: 0.7em; padding-left: 1.5em; position: relative; }
    .super-resolution-tool .feature-list li:before { content: "‚úì"; color: #4682B4; font-weight: bold; position: absolute; left: 0; }
    .super-resolution-tool .related-links { margin-top: 2em; font-size: 1em; }
    .super-resolution-tool .related-links a { color: #D9534F; text-decoration: underline; margin-right: 1.2em; }
    .super-resolution-tool .related-links a:hover { color: #357abd; }
    .super-resolution-tool .step-list { margin: 1.2em 0 1.2em 1.2em; padding: 0; }
    .super-resolution-tool .step-list li { margin-bottom: 0.7em; }
    .super-resolution-tool .sr-only { position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden; }
    @media (max-width: 600px) { .super-resolution-tool .reduce-size-container { padding: 1em 0.2em; } }
  </style>
</head>
<body>
<main>
  <div class="super-resolution-tool">
    <div class="reduce-size-container">
    <header>
      <h1 class="handwritten text-5xl text-[#D9534F] mb-4">Super Resolution Image Enhancer</h1>
      <p style="font-size:1.2em; margin-bottom:1em;">Enhance and upscale your photos with AI-powered super resolution technology. Fast, privacy-first, and free. No files are stored.</p>
    </header>
    <nav class="related-links" aria-label="Related image tools">
      <strong>Related:</strong>
      <a href="#image-compressor">Image Compressor</a>
      <a href="#image-converter">Image Converter</a>
      <a href="#black-white-image">Black & White</a>
      <a href="#image-resizer">Image Resizer</a>
    </nav>
    <section aria-labelledby="instructions-title">
      <div style="background:#FFF3CD; border:1px solid #FFD700; border-radius:0.7em; padding:1em; margin-bottom:1.2em; color:#B8860B; font-weight:bold; font-size:1.1em;">
        üîç <b>Enhance your images with AI-powered super resolution technology.</b> Upscale and improve image quality while preserving details and reducing noise.
      </div>
      <h2 id="instructions-title" style="margin-top:2em; color:#228B22;">How to Use</h2>
      <ol class="step-list">
        <li><strong>Upload</strong> your photo by dragging it into the box or clicking <b>Choose File</b>.</li>
        <li>Adjust the <strong>Enhancement Level</strong> to control the intensity of the super resolution effect.</li>
        <li>Preview your enhanced image and click <strong>Download</strong> to save your result.</li>
      </ol>
    </section>
    <section class="example-section" aria-labelledby="examples-title">
      <h3 id="examples-title">Enhancement Levels</h3>
      <ul style="margin-top:1em;">
        <li>Level 1-2: Subtle enhancement, preserves original character</li>
        <li>Level 3-4: Moderate sharpening and detail enhancement</li>
        <li>Level 5-6: Strong enhancement with edge detection</li>
        <li>Level 7+: Maximum quality improvement for low-res images</li>
      </ul>
    </section>
    <section aria-labelledby="privacy-title">
      <h2 id="privacy-title" style="color:#D9534F;">Privacy Notice</h2>
      <div style="background: #FFF3CD; border: 1px solid #FFEAA7; border-radius: 0.5em; padding: 1em; margin: 1em 0; font-size: 0.95em; color: #856404;">
        <strong>üîí Your files are never uploaded or stored. All processing happens in your browser.</strong>
      </div>
    </section>
    <section aria-labelledby="super-resolution-converter-title">
      <h2 id="super-resolution-converter-title" class="sr-only">Super Resolution Interface</h2>
      <div class="upload-area" id="upload-area" tabindex="0" aria-label="Upload photo area. Drag and drop or click to select a photo.">
        <div class="upload-icon" aria-hidden="true">üîç</div>
        <h3>Drag & Drop your photo here</h3>
        <p>or click to browse files</p>
        <input type="file" id="file-input" class="file-input" accept="image/*" aria-label="Choose photo file">
        <button class="upload-btn" id="choose-file-btn" style="display:block; margin: 0 auto 1.5em auto;" aria-label="Choose File">Choose File</button>
      </div>

      <!-- Preview Section -->
      <div class="preview-section" id="preview-section">
        <h3><i class="fas fa-image"></i> Uploaded Image <button class="clear-btn" id="clear-btn">Clear</button></h3>
        <img id="preview-image" alt="Uploaded preview" class="uploaded-preview">
      </div>

      <!-- Image Description Section -->
      <div class="image-description" id="image-description" style="display: none; background: #E8F5E8; border: 2px solid #5CB85C; border-radius: 0.7em; padding: 1.2em; margin: 1.5em 0; text-align: center;">
        <div style="font-size: 1.5em; color: #228B22; margin-bottom: 0.5em;">üîç</div>
        <div style="font-size: 1.1em; color: #228B22; font-weight: 600; margin-bottom: 0.5em;">Image Uploaded Successfully!</div>
        <div style="color: #666; font-size: 0.95em;" id="image-info">Ready for super resolution enhancement</div>
      </div>

      <!-- Controls Section -->
      <div class="controls-section" id="controls-section">
        <h3><i class="fas fa-sliders-h"></i> Enhancement Settings</h3>
        
        <div class="slider-control">
          <label for="enhancement-level">Enhancement Level: <span id="level-value">2</span></label>
          <input type="range" id="enhancement-level" min="1" max="10" value="2" style="width: 100%;">
        </div>
        
        <div class="form-group">
          <button class="clear-btn" id="clear-form-btn">Clear Form</button>
        </div>
      </div>

      <!-- Output Preview -->
      <div class="output-preview" id="output-preview" style="display: none;">
        <h3><i class="fas fa-eye"></i> Live Preview</h3>
        <canvas id="live-preview-canvas" width="413" height="531"></canvas>
        
        <div class="output-card" id="output-card">
          <a href="#" class="btn-download" id="download-link">
            <i class="fas fa-download"></i> Download Enhanced Image
          </a>
          <button class="clear-btn" id="download-clear-btn">Start Over</button>
        </div>
      </div>

      <!-- Features -->
      <div class="feature-list">
        <h3><i class="fas fa-star"></i> Key Features</h3>
        <ul>
          <li>AI-powered super resolution technology</li>
          <li>Adjustable enhancement levels</li>
          <li>Edge detection and sharpening</li>
          <li>Noise reduction capabilities</li>
          <li>Privacy-first - no uploads stored</li>
          <li>High-quality output</li>
          <li>Works on all devices</li>
        </ul>
      </div>
    </section>
    </div>
  </div>
</main>

<script>
// Super Resolution Tool - Clean initialization based on working black-white pattern
(function() {
  'use strict';
  
  let uploadedImage = null;
  let previewImage = null;
  let enhancementLevel = 2;
  let isInitialized = false;

  // Global initialization function for the main app
  window.initializeSuperResolutionTool = function() {
    console.log('üîç Initializing Super Resolution tool...');
    reset();
    init();
  };

  function reset() {
    console.log('Resetting tool state...');
    uploadedImage = null;
    previewImage = null;
    enhancementLevel = 2;
    isInitialized = false;
    
    // Reset UI elements
    const elements = {
      uploadArea: document.getElementById('upload-area'),
      previewSection: document.getElementById('preview-section'),
      controlsSection: document.getElementById('controls-section'),
      outputPreview: document.getElementById('output-preview'),
      imageDescription: document.getElementById('image-description'),
      enhancementSlider: document.getElementById('enhancement-level'),
      fileInput: document.getElementById('file-input'),
      outputCard: document.getElementById('output-card'),
      levelValue: document.getElementById('level-value')
    };
    
    if (elements.uploadArea) elements.uploadArea.style.display = 'block';
    if (elements.previewSection) elements.previewSection.style.display = 'none';
    if (elements.controlsSection) elements.controlsSection.style.display = 'none';
    if (elements.outputPreview) elements.outputPreview.style.display = 'none';
    if (elements.imageDescription) elements.imageDescription.style.display = 'none';
    if (elements.outputCard) elements.outputCard.style.display = 'none';
    
    if (elements.enhancementSlider) elements.enhancementSlider.value = '2';
    if (elements.levelValue) elements.levelValue.textContent = '2';
    if (elements.fileInput) elements.fileInput.value = '';
    
    // Clear canvas
    const canvas = document.getElementById('live-preview-canvas');
    if (canvas) {
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#fff';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
  }

  function init() {
    if (isInitialized) {
      console.log('Already initialized');
      return;
    }

    console.log('Setting up event listeners...');
    
    // Get elements
    const uploadArea = document.getElementById('upload-area');
    const fileInput = document.getElementById('file-input');
    const chooseFileBtn = document.getElementById('choose-file-btn');
    const enhancementSlider = document.getElementById('enhancement-level');
    
    if (!uploadArea || !fileInput || !chooseFileBtn) {
      console.error('Critical elements missing:', {
        uploadArea: !!uploadArea,
        fileInput: !!fileInput,
        chooseFileBtn: !!chooseFileBtn
      });
      setTimeout(init, 100); // Retry
      return;
    }

    // Remove old listeners by cloning
    [uploadArea, fileInput, chooseFileBtn].forEach(el => {
      if (el && el.parentNode) {
        const newEl = el.cloneNode(true);
        el.parentNode.replaceChild(newEl, el);
      }
    });

    // Re-get elements after cloning
    const newUploadArea = document.getElementById('upload-area');
    const newFileInput = document.getElementById('file-input');
    const newChooseFileBtn = document.getElementById('choose-file-btn');
    const newEnhancementSlider = document.getElementById('enhancement-level');
    const levelValue = document.getElementById('level-value');

    // Click handlers
    if (newChooseFileBtn) {
      newChooseFileBtn.onclick = function(e) {
        console.log('üñ±Ô∏è Choose file clicked');
        e.preventDefault();
        newFileInput.click();
      };
    }

    if (newUploadArea) {
      newUploadArea.onclick = function(e) {
        console.log('üñ±Ô∏è Upload area clicked');
        if (e.target !== newChooseFileBtn) {
          newFileInput.click();
        }
      };
    }

    // File input change
    if (newFileInput) {
      newFileInput.onchange = function(e) {
        console.log('üìÅ File selected:', e.target.files.length);
        if (e.target.files.length > 0) {
          handleFile(e.target.files[0]);
        }
      };
    }

    // Enhancement slider
    if (newEnhancementSlider) {
      newEnhancementSlider.oninput = function(e) {
        enhancementLevel = parseInt(e.target.value);
        if (levelValue) levelValue.textContent = enhancementLevel;
        updatePreview();
      };
    }

    // Drag and drop
    if (newUploadArea) {
      newUploadArea.ondragover = function(e) {
        e.preventDefault();
        newUploadArea.style.backgroundColor = '#F0F8FF';
      };

      newUploadArea.ondragleave = function(e) {
        newUploadArea.style.backgroundColor = '#FDFBF5';
      };

      newUploadArea.ondrop = function(e) {
        e.preventDefault();
        newUploadArea.style.backgroundColor = '#FDFBF5';
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          handleFile(files[0]);
        }
      };
    }

    // Clear buttons
    ['clear-btn', 'clear-form-btn', 'download-clear-btn'].forEach(id => {
      const btn = document.getElementById(id);
      if (btn) btn.onclick = reset;
    });

    // Download button
    const downloadLink = document.getElementById('download-link');
    if (downloadLink) {
      downloadLink.onclick = function(e) {
        e.preventDefault();
        downloadImage();
      };
    }

    isInitialized = true;
    console.log('‚úÖ Super Resolution tool initialized successfully');
  }

  function handleFile(file) {
    console.log('üì∑ Processing file:', file.name);
    
    if (!file.type.startsWith('image/')) {
      alert('‚ùå Please upload a valid image file.');
      return;
    }

    uploadedImage = file;
    const reader = new FileReader();
    
    reader.onload = function(e) {
      // Update preview image
      const previewImg = document.getElementById('preview-image');
      if (previewImg) previewImg.src = e.target.result;
      
      // Show/hide sections
      const uploadArea = document.getElementById('upload-area');
      const previewSection = document.getElementById('preview-section');
      const controlsSection = document.getElementById('controls-section');
      const outputPreview = document.getElementById('output-preview');
      const imageDescription = document.getElementById('image-description');
      const imageInfo = document.getElementById('image-info');
      
      if (uploadArea) uploadArea.style.display = 'none';
      if (previewSection) previewSection.style.display = 'block';
      if (controlsSection) controlsSection.style.display = 'block';
      if (outputPreview) outputPreview.style.display = 'block';
      
      if (imageDescription) {
        imageDescription.style.display = 'block';
        if (imageInfo) {
          const fileSize = (file.size / 1024).toFixed(1);
          imageInfo.textContent = `${file.name} (${fileSize} KB) - Ready for enhancement`;
        }
      }
      
      // Load image for processing
      previewImage = new Image();
      previewImage.onload = updatePreview;
      previewImage.src = e.target.result;
    };
    
    reader.readAsDataURL(file);
  }

  function updatePreview() {
    const canvas = document.getElementById('live-preview-canvas');
    if (!canvas || !previewImage) return;
    
    const ctx = canvas.getContext('2d');
    const w = 413, h = 531;
    
    ctx.clearRect(0, 0, w, h);
    ctx.fillStyle = '#fff';
    ctx.fillRect(0, 0, w, h);
    
    // Draw original image
    ctx.drawImage(previewImage, 0, 0, w, h);
    
    // Apply super resolution enhancement
    const imageData = ctx.getImageData(0, 0, w, h);
    const enhancedData = applySuperResolution(imageData, enhancementLevel);
    ctx.putImageData(enhancedData, 0, 0);
    
    // Show download button
    const outputCard = document.getElementById('output-card');
    if (outputCard) outputCard.style.display = 'block';
  }

  function applySuperResolution(imageData, level) {
    const data = imageData.data;
    const width = imageData.width;
    const height = imageData.height;
    
    // Create enhanced data
    const enhanced = new ImageData(width, height);
    const enhancedData = enhanced.data;
    
    // Copy original data
    for (let i = 0; i < data.length; i++) {
      enhancedData[i] = data[i];
    }
    
    // Apply enhancement based on level
    for (let y = 1; y < height - 1; y++) {
      for (let x = 1; x < width - 1; x++) {
        const idx = (y * width + x) * 4;
        
        // Get neighboring pixels
        const neighbors = [
          (y - 1) * width + (x - 1), (y - 1) * width + x, (y - 1) * width + (x + 1),
          y * width + (x - 1), y * width + x, y * width + (x + 1),
          (y + 1) * width + (x - 1), (y + 1) * width + x, (y + 1) * width + (x + 1)
        ];
        
        // Apply sharpening kernel based on enhancement level
        const kernelStrength = 4 + level;
        const kernel = [-1, -1, -1, -1, kernelStrength, -1, -1, -1, -1];
        
        for (let c = 0; c < 3; c++) {
          let sum = 0;
          for (let i = 0; i < 9; i++) {
            const neighborIdx = neighbors[i] * 4 + c;
            if (neighborIdx >= 0 && neighborIdx < data.length) {
              sum += data[neighborIdx] * kernel[i];
            }
          }
          enhancedData[idx + c] = Math.min(255, Math.max(0, sum));
        }
      }
    }
    
    return enhanced;
  }

  function downloadImage() {
    if (!uploadedImage) {
      alert('‚ùå Please upload an image first.');
      return;
    }
    
    const canvas = document.getElementById('live-preview-canvas');
    if (!canvas) return;
    
    canvas.toBlob(function(blob) {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `super-resolution-${uploadedImage.name.split('.')[0]}.png`;
      document.body.appendChild(a);
      a.click();
      setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }, 100);
    }, 'image/png');
  }

  // Auto-initialize if DOM is ready
  if (document.readyState !== 'loading') {
    setTimeout(init, 50);
  } else {
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(init, 50);
    });
  }

})();
</script>
</body>
</html>
