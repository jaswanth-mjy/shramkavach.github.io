<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Notes - FREE Private Note Taking & Organizer Tool</title>
    <meta name="description" content="Free personal notes app! Create, save, organize private notes in your browser. Local storage, no signup, completely private. Download notes backup. 100% free!">
    <meta name="keywords" content="personal notes app, private note taking, notepad online, note organizer, digital notepad, private notes tool, note taking app, personal notebook, secure notes, local notes storage, note keeper, digital journal, private writing tool, note manager, text notes app, simple notepad, browser notes, offline notes, note backup tool, private journaling app, personal note keeper, digital notes organizer, secure note taking, browser notepad, local note storage">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://scribbletools.shramkavach.com/client/tools/other/personal-notes.html">
    <meta property="og:title" content="Personal Notes - FREE Private Note Taking & Organizer Tool">
    <meta property="og:description" content="Free personal notes app! Create, save, organize private notes in your browser. Local storage, no signup, completely private. Download notes backup. 100% free!">
    <meta property="og:image" content="https://scribbletools.shramkavach.com/assets/og-image.svg">
    <meta property="og:site_name" content="Scribble Tools">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://scribbletools.shramkavach.com/client/tools/other/personal-notes.html">
    <meta property="twitter:title" content="Personal Notes - FREE Private Note Taking & Organizer Tool">
    <meta property="twitter:description" content="Free personal notes app! Create, save, organize private notes in your browser. Local storage, no signup, completely private. Download notes backup. 100% free!">
    <meta property="twitter:image" content="https://scribbletools.shramkavach.com/assets/og-image.svg">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="Scribble Tools">
    <meta name="generator" content="Scribble Tools">
    <meta name="application-name" content="Personal Notes">
    <meta name="apple-mobile-web-app-title" content="Personal Notes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#D9534F">
    <meta name="msapplication-navbutton-color" content="#D9534F">
    <meta name="apple-mobile-web-app-status-bar-style" content="#D9534F">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://scribbletools.shramkavach.com/client/tools/other/personal-notes.html">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Personal Notes App",
      "description": "Free private note-taking application with local browser storage, note organization, and backup features. No registration required, completely secure and private.",
      "url": "https://scribbletools.shramkavach.com/client/tools/other/personal-notes.html",
      "applicationCategory": "ProductivityApplication",
      "operatingSystem": "Any",
      "permissions": "browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "Private note creation",
        "Local browser storage",
        "Note organization",
        "Backup and download",
        "No registration required",
        "Completely secure",
        "Offline functionality",
        "Free to use"
      ],
      "provider": {
        "@type": "Organization",
        "name": "Scribble Tools",
        "url": "https://scribbletools.shramkavach.com"
      }
    }
    </script>
    
    <style>
        body { font-family: 'Poppins', sans-serif; background: #F8F4E8; color: #333; margin: 0; padding: 0; }
        .bg-gray-50 { background: #F8F4E8; }
        .min-h-screen { min-height: 100vh; }
        .p-4 { padding: 1rem; }
        .max-w-4xl { max-width: 56rem; }
        .mx-auto { margin: 0 auto; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .font-bold { font-weight: 700; }
        .text-gray-800 { color: #1f2937; }
        .mb-6 { margin-bottom: 1.5rem; }
        .bg-white { background-color: #fff; }
        .rounded-lg { border-radius: 0.5rem; }
        .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .p-6 { padding: 1.5rem; }
    
/* Mobile Responsive Styles */
@media (max-width: 768px) {
    body { padding: 0.5rem; font-size: 14px; }
    .container, .main-container { padding: 1rem; max-width: 100%; }
    input, select, button, textarea { font-size: 16px; min-height: 44px; }
    h1 { font-size: 1.5rem; }
    h2 { font-size: 1.25rem; }
    table { font-size: 0.875rem; }
    .grid, .row { grid-template-columns: 1fr !important; }
}

@media (max-width: 480px) {
    body { padding: 0.25rem; font-size: 13px; }
    .container, .main-container { padding: 0.75rem; }
    h1 { font-size: 1.25rem; }
    h2 { font-size: 1.1rem; }
}
</style>
<link rel="stylesheet" href="/assets/css/responsive.css">
</head>
<body>
<!-- Personal Notes Tool - Compatible with main app embedding -->
<div class="bg-gray-50 min-h-screen p-4">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">üìù Personal Notes</h1>
        
        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="mb-4">
                <label for="noteTitle" class="block text-sm font-medium text-gray-700 mb-2">Note Title</label>
                <input type="text" id="noteTitle" placeholder="Enter note title..." 
                       class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            
            <div class="mb-4">
                <label for="noteContent" class="block text-sm font-medium text-gray-700 mb-2">Your Notes</label>
                <textarea id="noteContent" rows="10" placeholder="Write your notes here... (Saved automatically in your browser)" 
                          class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
            </div>
            
            <div class="flex gap-4 mb-6">
                <button onclick="saveNote()" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors">
                    üíæ Save Note
                </button>
                <button onclick="newNote()" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 transition-colors">
                    ‚ú® New Note
                </button>
                <button onclick="downloadNotes()" class="bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 transition-colors">
                    üì• Download All Notes
                </button>
            </div>
            
            <div class="border-t pt-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üìö Your Saved Notes</h3>
                <div id="notesList" class="space-y-2">
                    <!-- Notes will be displayed here -->
                </div>
            </div>
        </div>
    </div>
</div>

    <script>
        // Personal notes system - stores locally in browser
        let currentNoteId = null;

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function loadNotes() {
            console.log('üìù Loading personal notes...');
            try {
                const notes = JSON.parse(localStorage.getItem('scribbletools_notes') || '[]');
                console.log('üìù Found', notes.length, 'notes in storage');
                const notesList = document.getElementById('notesList');
                
                if (!notesList) {
                    console.error('üìù Error: notesList element not found');
                    return;
                }
                
                if (notes.length === 0) {
                    notesList.innerHTML = '<p class="text-gray-500 italic">No notes saved yet. Create your first note!</p>';
                    return;
                }
                
                notesList.innerHTML = notes.map(note => `
                    <div class="bg-gray-50 p-4 rounded-md border border-gray-200">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800">${escapeHtml(note.title || 'Untitled Note')}</h4>
                                <p class="text-sm text-gray-600 mt-1">${escapeHtml(note.content.substring(0, 100))}${note.content.length > 100 ? '...' : ''}</p>
                                <p class="text-xs text-gray-400 mt-2">${new Date(note.timestamp).toLocaleString()}</p>
                            </div>
                            <div class="flex gap-2 ml-4">
                                <button onclick="editNote('${note.id}')" class="text-blue-600 hover:text-blue-800 text-sm">Edit</button>
                                <button onclick="deleteNote('${note.id}')" class="text-red-600 hover:text-red-800 text-sm">Delete</button>
                            </div>
                        </div>
                    </div>
                `).join('');
                console.log('üìù Notes loaded successfully');
            } catch (error) {
                console.error('üìù Error loading notes:', error);
                const notesList = document.getElementById('notesList');
                if (notesList) {
                    notesList.innerHTML = '<p class="text-red-500">Error loading notes. Please refresh the page.</p>';
                }
            }
        }

        function saveNote() {
            console.log('üìù saveNote called, currentNoteId:', currentNoteId);
            const titleElement = document.getElementById('noteTitle');
            const contentElement = document.getElementById('noteContent');
            
            if (!titleElement || !contentElement) {
                console.error('üìù Error: Required elements not found', { titleElement, contentElement });
                alert('Error: Form elements not found. Please refresh the page.');
                return;
            }
            
            const title = titleElement.value.trim();
            const content = contentElement.value.trim();
            
            if (!title && !content) {
                alert('Please enter a title or content for your note.');
                return;
            }
            
            try {
                const notes = JSON.parse(localStorage.getItem('scribbletools_notes') || '[]');
                console.log('üìù Current notes in storage:', notes.length);
                
                if (currentNoteId) {
                    // Update existing note
                    const noteIndex = notes.findIndex(note => note.id === currentNoteId);
                    if (noteIndex !== -1) {
                        notes[noteIndex] = {
                            ...notes[noteIndex],
                            title,
                            content,
                            timestamp: Date.now()
                        };
                        console.log('üìù Updated existing note:', notes[noteIndex]);
                    }
                } else {
                    // Create new note
                    const newNote = {
                        id: generateId(),
                        title,
                        content,
                        timestamp: Date.now()
                    };
                    notes.unshift(newNote);
                    console.log('üìù Created new note:', newNote);
                    console.log('üìù Total notes after creation:', notes.length);
                    
                    // Clear the form after creating a new note
                    currentNoteId = null;
                    titleElement.value = '';
                    contentElement.value = '';
                    titleElement.focus();
                }
                
                localStorage.setItem('scribbletools_notes', JSON.stringify(notes));
                console.log('üìù Saved to localStorage, total notes:', notes.length);
                loadNotes();
                
                // Show success message
                const saveBtn = document.querySelector('button[onclick="saveNote()"]');
                if (saveBtn) {
                    const originalText = saveBtn.textContent;
                    if (currentNoteId) {
                        saveBtn.textContent = '‚úÖ Updated!';
                    } else {
                        saveBtn.textContent = '‚úÖ Saved!';
                    }
                    saveBtn.className = 'bg-green-600 text-white px-6 py-2 rounded-md';
                    setTimeout(() => {
                        saveBtn.textContent = 'üíæ Save New Note';
                        saveBtn.className = 'bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors';
                    }, 2000);
                }
            } catch (error) {
                console.error('üìù Error saving note:', error);
                alert('Error saving note. Please try again.');
            }
        }

        function newNote() {
            currentNoteId = null;
            document.getElementById('noteTitle').value = '';
            document.getElementById('noteContent').value = '';
            document.getElementById('noteTitle').focus();
            
            // Update button text to indicate new note mode
            const saveBtn = document.querySelector('button[onclick="saveNote()"]');
            if (saveBtn) {
                saveBtn.textContent = 'üíæ Save New Note';
                saveBtn.className = 'bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors';
            }
            
            console.log('üìù Started new note');
        }

        function editNote(id) {
            const notes = JSON.parse(localStorage.getItem('scribbletools_notes') || '[]');
            const note = notes.find(n => n.id === id);
            
            if (note) {
                currentNoteId = id;
                document.getElementById('noteTitle').value = note.title || '';
                document.getElementById('noteContent').value = note.content || '';
                document.getElementById('noteTitle').scrollIntoView({ behavior: 'smooth' });
                
                // Update button text to indicate edit mode
                const saveBtn = document.querySelector('button[onclick="saveNote()"]');
                if (saveBtn) {
                    saveBtn.textContent = 'üíæ Update Note';
                    saveBtn.className = 'bg-orange-600 text-white px-6 py-2 rounded-md hover:bg-orange-700 transition-colors';
                }
                
                console.log('üìù Editing note:', note.title || 'Untitled');
            }
        }

        function deleteNote(id) {
            if (confirm('Are you sure you want to delete this note?')) {
                const notes = JSON.parse(localStorage.getItem('scribbletools_notes') || '[]');
                const filteredNotes = notes.filter(note => note.id !== id);
                localStorage.setItem('scribbletools_notes', JSON.stringify(filteredNotes));
                
                if (currentNoteId === id) {
                    newNote();
                }
                
                loadNotes();
            }
        }

        function downloadNotes() {
            const notes = JSON.parse(localStorage.getItem('scribbletools_notes') || '[]');
            
            if (notes.length === 0) {
                alert('No notes to download.');
                return;
            }
            
            const notesText = notes.map(note => 
                `Title: ${note.title || 'Untitled'}\n` +
                `Date: ${new Date(note.timestamp).toLocaleString()}\n` +
                `Content:\n${note.content}\n` +
                `${'='.repeat(50)}\n`
            ).join('\n');
            
            const blob = new Blob([notesText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ScribbleTools_Notes_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // IMMEDIATELY expose all functions globally - CRITICAL for onclick handlers
        window.saveNote = saveNote;
        window.newNote = newNote;
        window.editNote = editNote;
        window.deleteNote = deleteNote;
        window.downloadNotes = downloadNotes;
        window.loadNotes = loadNotes;
        window.generateId = generateId;
        window.escapeHtml = escapeHtml;
        
        console.log('üìù Personal Notes functions exposed globally:', {
            saveNote: typeof window.saveNote,
            newNote: typeof window.newNote,
            editNote: typeof window.editNote,
            deleteNote: typeof window.deleteNote,
            downloadNotes: typeof window.downloadNotes
        });

        // Auto-save functionality
        let autoSaveTimeout;
        
        // Wait for DOM to be ready before adding event listeners
        function initializeAutoSave() {
            const noteContentElement = document.getElementById('noteContent');
            if (noteContentElement) {
                noteContentElement.addEventListener('input', () => {
                    clearTimeout(autoSaveTimeout);
                    autoSaveTimeout = setTimeout(() => {
                        // Only auto-save if we're editing an existing note
                        if (currentNoteId && document.getElementById('noteContent').value.trim()) {
                            console.log('üìù Auto-saving existing note...');
                            saveNote();
                        }
                    }, 3000); // Auto-save after 3 seconds of inactivity
                });
                console.log('üìù Auto-save initialized');
            } else {
                console.warn('üìù noteContent element not found for auto-save');
            }
        }

        // Enhanced initialization for both standalone and embedded usage
        function initializePersonalNotes() {
            console.log('üìù Initializing Personal Notes...');
            loadNotes();
            initializeAutoSave();
        }

        // Multiple initialization triggers
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializePersonalNotes);
        } else {
            // DOM already loaded
            setTimeout(initializePersonalNotes, 100);
        }
        
        // Also load when the tool is initialized from main app
        window.addEventListener('load', initializePersonalNotes);
        
        // Make initialization function globally available
        window.initializePersonalNotes = initializePersonalNotes;
        
        // For debugging - expose debug object
        window.personalNotesDebug = {
            loadNotes,
            saveNote,
            newNote,
            editNote,
            deleteNote,
            downloadNotes,
            generateId,
            escapeHtml,
            currentNoteId: () => currentNoteId
        };
    </script>
