<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Enhanced SEO Meta Tags -->
    <title>Study Effectiveness Analyzer - FREE Student Study Performance Tracker & Analytics Tool</title>
    <meta name="description" content="FREE Study Effectiveness Analyzer for students to track, analyze, and optimize study sessions. Get detailed analytics on focus factors, productivity patterns, and learning efficiency to improve academic performance.">
    <meta name="keywords" content="study effectiveness, study analytics, study performance tracker, learning efficiency, academic analytics, focus factors, study optimization, productivity analysis, student success metrics, study session tracker">
    <meta name="author" content="ScribbleTools">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://scribbletools.shramkavach.com/client/tools/student/productivity/study-effectiveness-analyzer.html">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://scribbletools.shramkavach.com/client/tools/student/productivity/study-effectiveness-analyzer.html">
    <meta property="og:title" content="Study Effectiveness Analyzer - FREE Student Study Performance Tracker & Analytics">
    <meta property="og:description" content="FREE Study Effectiveness Analyzer for students to track, analyze, and optimize study sessions. Get detailed analytics on focus factors, productivity patterns, and learning efficiency.">
    <meta property="og:image" content="https://scribbletools.shramkavach.com/assets/og-image.svg">
    <meta property="og:site_name" content="ScribbleTools">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://scribbletools.shramkavach.com/client/tools/student/productivity/study-effectiveness-analyzer.html">
    <meta name="twitter:title" content="Study Effectiveness Analyzer - FREE Student Study Performance Tracker">
    <meta name="twitter:description" content="Track, analyze, and optimize your study sessions with detailed analytics on focus factors, productivity patterns, and learning efficiency.">
    <meta name="twitter:image" content="https://scribbletools.shramkavach.com/assets/og-image.svg">
    
    <!-- Technical SEO -->
    <meta name="theme-color" content="#667eea">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" href="/favicon.png">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Study Effectiveness Analyzer - Student Study Performance Tracker",
        "description": "Free online study effectiveness analyzer for students to track, analyze, and optimize study sessions with detailed analytics on focus factors, productivity patterns, and learning efficiency.",
        "url": "https://scribbletools.shramkavach.com/client/tools/student/productivity/study-effectiveness-analyzer.html",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Any",
        "permissions": "browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Study Session Tracking and Analysis",
            "Focus Factor Assessment (Energy, Distraction, Difficulty, Interest)",
            "Effectiveness Score Calculation",
            "Study Pattern Analytics",
            "Time-of-Day Productivity Analysis",
            "Location-Based Performance Tracking",
            "Subject and Topic Performance Metrics",
            "Correlation Analysis Between Factors",
            "CSV Export for Data Analysis",
            "Progress Visualization and Trends",
            "Study Optimization Recommendations",
            "Academic Performance Insights"
        ],
        "audience": {
            "@type": "EducationalAudience",
            "educationalRole": "student"
        },
        "creator": {
            "@type": "Organization",
            "name": "ScribbleTools",
            "url": "https://scribbletools.shramkavach.com"
        },
        "datePublished": "2024-01-01",
        "dateModified": "2024-12-01",
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "educationalUse": "Study effectiveness analysis and optimization",
        "learningResourceType": "Interactive Tool",
        "typicalAgeRange": "16-30"
    }
    </script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Caveat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Study Effectiveness Analyzer Specific Styles - All prefixed with 'study-' to avoid conflicts */
        .study-root,
        .study-main-container,
        .study-body,
        body.study-body,
        html {
            --study-font-primary: 'Poppins', sans-serif !important;
            
            /* Enhanced Color Palette */
            --study-color-primary: #667eea !important;
            --study-color-primary-dark: #5a6fd8 !important;
            --study-color-secondary: #764ba2 !important;
            --study-color-accent: #f39c12 !important;
            --study-color-success: #28a745 !important;
            --study-color-danger: #dc3545 !important;
            --study-color-info: #17a2b8 !important;
            
            /* Background & Surface Colors */
            --study-color-background: #f5f7fa !important;
            --study-color-surface: #ffffff !important;
            --study-color-surface-alt: #f8f9fa !important;
            
            /* Text Colors */
            --study-color-text-primary: #2c3e50 !important;
            --study-color-text-secondary: #6c757d !important;
            --study-color-text-on-primary: #ffffff !important;
            
            /* Border & Shadow */
            --study-color-border: #e9ecef !important;
            --study-shadow-sm: 0 2px 4px rgba(0,0,0,0.08) !important;
            --study-shadow-md: 0 4px 12px rgba(0,0,0,0.15) !important;
            --study-shadow-lg: 0 8px 32px rgba(0,0,0,0.18) !important;
        }

        .study-body { 
            font-family: var(--study-font-primary); 
            background: var(--study-color-background); 
            color: var(--study-color-text-primary); 
            margin: 0; 
            padding: 20px; 
            line-height: 1.7;
            min-height: 100vh;
            scroll-behavior: smooth;
        }

        .study-main-container {
            max-width: 1200px !important;
            margin: 0 auto !important;
            background: var(--study-color-surface) !important;
            border-radius: 15px !important;
            box-shadow: var(--study-shadow-lg) !important;
            overflow: hidden !important;
            border: 1px solid var(--study-color-border) !important;
            position: relative !important;
        }
        
        .study-header {
            background: linear-gradient(135deg, var(--study-color-primary) 0%, var(--study-color-secondary) 100%) !important;
            color: var(--study-color-text-on-primary) !important;
            padding: 30px !important;
            text-align: center !important;
        }
        
        .study-header h1 {
            font-family: 'Caveat', cursive !important;
            font-size: 3.5rem !important;
            margin-bottom: 15px !important;
            font-weight: 700 !important;
            background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
        }
        
        .study-header p {
            font-family: 'Poppins', sans-serif !important;
            font-size: 1.1rem !important;
            opacity: 0.9 !important;
            color: var(--study-color-text-on-primary) !important;
        }

        .study-content {
            padding: 30px 40px !important;
            background: var(--study-color-surface) !important;
        }

        /* Form Section */
        .study-form-section {
            border-radius: 10px !important;
            padding: 25px !important;
            margin-bottom: 30px !important;
            border: 1px solid var(--study-color-border) !important;
            background: var(--study-color-surface) !important;
        }
        
        .study-form-title {
            font-size: 1.5rem !important;
            color: var(--study-color-text-primary) !important;
            margin-bottom: 20px !important;
            font-weight: 600 !important;
            display: flex !important;
            align-items: center !important;
        }
        
        .study-form-title::before {
            content: "üìä" !important;
            margin-right: 10px !important;
            font-size: 1.8rem !important;
        }
        
        .study-form-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
            gap: 20px !important;
            margin-bottom: 20px !important;
        }
        
        .study-form-group {
            display: flex !important;
            flex-direction: column !important;
        }
        
        .study-form-group label {
            font-weight: 600 !important;
            color: var(--study-color-text-secondary) !important;
            margin-bottom: 8px !important;
            font-size: 0.95rem !important;
        }
        
        .study-form-group input, 
        .study-form-group select,
        .study-form-group textarea {
            padding: 12px 15px !important;
            border: 2px solid var(--study-color-border) !important;
            border-radius: 10px !important;
            font-size: 1rem !important;
            transition: all 0.3s ease !important;
            background: var(--study-color-surface) !important;
        }
        
        .study-form-group input:focus, 
        .study-form-group select:focus,
        .study-form-group textarea:focus {
            outline: none !important;
            border-color: var(--study-color-primary) !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
        }
        
        .study-form-group textarea {
            min-height: 100px !important;
            resize: vertical !important;
        }
        
        .study-btn-container {
            display: flex !important;
            gap: 15px !important;
            flex-wrap: wrap !important;
        }
        
        .study-btn {
            padding: 12px 25px !important;
            border: none !important;
            border-radius: 10px !important;
            font-size: 1rem !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 8px !important;
        }
        
        .study-btn-primary {
            background: linear-gradient(135deg, var(--study-color-primary) 0%, var(--study-color-secondary) 100%) !important;
            color: var(--study-color-text-on-primary) !important;
            box-shadow: var(--study-shadow-md) !important;
        }
        
        .study-btn-primary:hover {
            transform: translateY(-2px) !important;
            box-shadow: var(--study-shadow-lg) !important;
        }
        
        .study-btn-secondary {
            background: var(--study-color-surface) !important;
            color: var(--study-color-primary) !important;
            border: 2px solid var(--study-color-primary) !important;
        }
        
        .study-btn-secondary:hover {
            background: var(--study-color-surface-alt) !important;
        }

        /* Summary Section */
        .study-summary-section {
            background: linear-gradient(135deg, var(--study-color-primary) 0%, var(--study-color-secondary) 100%) !important;
            color: var(--study-color-text-on-primary) !important;
            border-radius: 15px !important;
            padding: 25px !important;
            margin-bottom: 30px !important;
            box-shadow: var(--study-shadow-lg) !important;
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            flex-wrap: wrap !important;
            gap: 20px !important;
        }
        
        .study-summary-item {
            text-align: center !important;
        }
        
        .study-summary-value {
            font-size: 2.5rem !important;
            font-weight: 700 !important;
            color: var(--study-color-text-on-primary) !important;
            margin-bottom: 5px !important;
        }
        
        .study-summary-label {
            font-size: 0.9rem !important;
            opacity: 0.9 !important;
            color: var(--study-color-text-on-primary) !important;
            text-transform: uppercase !important;
            letter-spacing: 1px !important;
        }

        /* Session List */
        .session-list {
            margin-bottom: 30px;
        }
        
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .list-title {
            font-size: 1.5rem;
            color: #333;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .list-title::before {
            content: "üìö";
            margin-right: 10px;
            font-size: 1.8rem;
        }
        
        .session-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .session-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .session-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, #667eea, #764ba2);
        }
        
        .session-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        
        .session-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            padding-right: 30px;
        }
        
        .session-date {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 15px;
        }
        
        .session-info {
            margin-bottom: 15px;
        }
        
        .session-info-item {
            display: flex;
            margin-bottom: 8px;
            font-size: 0.95rem;
            color: #666;
        }
        
        .session-info-label {
            font-weight: 600;
            width: 80px;
            flex-shrink: 0;
        }
        
        .effectiveness-score {
            font-size: 1.3rem;
            font-weight: 700;
            margin-top: 10px;
            text-align: right;
        }
        
        .effectiveness-high {
            color: #28a745;
        }
        
        .effectiveness-medium {
            color: #f39c12;
        }
        
        .effectiveness-low {
            color: #dc3545;
        }
        
        .session-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 5px;
        }
        
        .action-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .edit-btn {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .edit-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: scale(1.1);
        }
        
        .delete-btn {
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
        }
        
        .delete-btn:hover {
            background: rgba(220, 53, 69, 0.2);
            transform: scale(1.1);
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #555;
        }
        
        .empty-state p {
            font-size: 1rem;
            max-width: 500px;
            margin: 0 auto;
        }

        /* Analytics Section */
        .analytics-section {
            background: var(--study-color-surface-alt);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid var(--study-color-border);
        }
        
        .analytics-title {
            font-size: 1.5rem;
            color: var(--study-color-text-primary);
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .analytics-title::before {
            content: "üìà";
            margin-right: 10px;
            font-size: 1.8rem;
        }
        
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .analytics-item {
            background: white;
            border: 1px solid var(--study-color-border);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .analytics-label {
            font-weight: 600;
            color: var(--study-color-text-secondary);
            margin-bottom: 5px;
        }
        
        .analytics-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--study-color-primary);
        }

        /* Factors Section */
        .factors-section {
            margin-bottom: 30px;
        }
        
        .factors-title {
            font-size: 1.5rem;
            color: var(--study-color-text-primary);
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .factors-title::before {
            content: "üîç";
            margin-right: 10px;
            font-size: 1.8rem;
        }
        
        .factors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .factor-card {
            background: white;
            border: 1px solid var(--study-color-border);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
        }
        
        .factor-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--study-shadow-sm);
        }
        
        .factor-name {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--study-color-text-primary);
        }
        
        .factor-rating {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .factor-stars {
            color: #f39c12;
            margin-right: 10px;
        }
        
        .factor-impact {
            font-size: 0.9rem;
            color: var(--study-color-text-secondary);
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.5s ease;
            border-left: 5px solid #667eea;
            max-width: 350px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }
        
        .notification p {
            color: #666;
            margin-bottom: 15px;
        }
        
        .notification button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .notification button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        /* Edit Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: #333;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }
        
        .modal-close:hover {
            color: #333;
        }
        
        .modal-body {
            margin-bottom: 20px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .study-header h1 {
                font-size: 2.5rem !important;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .summary-section {
                flex-direction: column;
                text-align: center;
            }
            
            .session-grid {
                grid-template-columns: 1fr;
            }
            
            .analytics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .factors-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .study-header h1 {
                font-size: 2rem !important;
            }
            
            .study-header p {
                font-size: 0.9rem !important;
            }
            
            .study-header {
                padding: 1.5rem 1rem !important;
            }
        }
        
        @media (max-width: 360px) {
            .study-header h1 {
                font-size: 1.75rem !important;
            }
            
            .study-header p {
                font-size: 0.85rem !important;
            }
            
            .study-main-container {
                border-radius: 10px !important;
            }
        }
    </style>
    <link rel="stylesheet" href="../force-desktop-layout.css">
</head>
<body class="study-body">
    <div class="study-main-container">
        <div class="study-header">
            <h1><span style="display: inline-block; -webkit-text-fill-color: initial; background: none;">üìä</span> <span style="background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Study Effectiveness Analyzer</span></h1>
            <p>Track and analyze your study sessions to maximize learning efficiency</p>
        </div>
        
        <div class="study-content">
            <!-- Add Session Form -->
            <div class="study-form-section">
                <h2 class="study-form-title">Add Study Session</h2>
                <form id="sessionForm">
                    <div class="study-form-grid">
                        <div class="study-form-group">
                            <label for="subject">Subject</label>
                            <input type="text" id="subject" required placeholder="e.g., Mathematics">
                        </div>
                        <div class="study-form-group">
                            <label for="topic">Topic</label>
                            <input type="text" id="topic" required placeholder="e.g., Calculus">
                        </div>
                        <div class="study-form-group">
                            <label for="studyDate">Date</label>
                            <input type="date" id="studyDate" required>
                        </div>
                        <div class="study-form-group">
                            <label for="duration">Duration (minutes)</label>
                            <input type="number" id="duration" min="5" required placeholder="e.g., 60">
                        </div>
                        <div class="study-form-group">
                            <label for="timeOfDay">Time of Day</label>
                            <select id="timeOfDay" required>
                                <option value="">Select time</option>
                                <option value="early-morning">Early Morning (5-8 AM)</option>
                                <option value="morning">Morning (8-11 AM)</option>
                                <option value="midday">Midday (11 AM-2 PM)</option>
                                <option value="afternoon">Afternoon (2-5 PM)</option>
                                <option value="evening">Evening (5-8 PM)</option>
                                <option value="night">Night (8-11 PM)</option>
                                <option value="late-night">Late Night (11 PM-2 AM)</option>
                                <option value="early-morning-2">Early Morning (2-5 AM)</option>
                            </select>
                        </div>
                        <div class="study-form-group">
                            <label for="location">Study Location</label>
                            <select id="location" required>
                                <option value="">Select location</option>
                                <option value="library">Library</option>
                                <option value="dorm-room">Dorm Room</option>
                                <option value="classroom">Classroom</option>
                                <option value="coffee-shop">Coffee Shop</option>
                                <option value="outdoors">Outdoors</option>
                                <option value="study-group">Study Group</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Focus Factors -->
                    <div class="study-form-group">
                        <label>Focus Factors (Rate 1-5)</label>
                    </div>
                    <div class="study-form-grid">
                        <div class="study-form-group">
                            <label for="energyLevel">Energy Level</label>
                            <select id="energyLevel" required>
                                <option value="">Rate</option>
                                <option value="1">1 - Very Low</option>
                                <option value="2">2 - Low</option>
                                <option value="3">3 - Moderate</option>
                                <option value="4">4 - High</option>
                                <option value="5">5 - Very High</option>
                            </select>
                        </div>
                        <div class="study-form-group">
                            <label for="distractionLevel">Distraction Level</label>
                            <select id="distractionLevel" required>
                                <option value="">Rate</option>
                                <option value="1">1 - None</option>
                                <option value="2">2 - Minimal</option>
                                <option value="3">3 - Moderate</option>
                                <option value="4">4 - High</option>
                                <option value="5">5 - Extreme</option>
                            </select>
                        </div>
                        <div class="study-form-group">
                            <label for="materialDifficulty">Material Difficulty</label>
                            <select id="materialDifficulty" required>
                                <option value="">Rate</option>
                                <option value="1">1 - Very Easy</option>
                                <option value="2">2 - Easy</option>
                                <option value="3">3 - Moderate</option>
                                <option value="4">4 - Hard</option>
                                <option value="5">5 - Very Hard</option>
                            </select>
                        </div>
                        <div class="study-form-group">
                            <label for="interestLevel">Interest Level</label>
                            <select id="interestLevel" required>
                                <option value="">Rate</option>
                                <option value="1">1 - Very Low</option>
                                <option value="2">2 - Low</option>
                                <option value="3">3 - Moderate</option>
                                <option value="4">4 - High</option>
                                <option value="5">5 - Very High</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="study-form-group">
                        <label for="notes">Notes & Reflections</label>
                        <textarea id="notes" rows="3" placeholder="What did you learn? What worked well? What could be improved?"></textarea>
                    </div>
                    
                    <div class="study-btn-container">
                        <button type="submit" class="study-btn study-btn-primary">
                            <span>‚ûï</span> Add Session
                        </button>
                        <button type="button" class="study-btn study-btn-secondary" onclick="clearForm()">
                            <span>üóëÔ∏è</span> Clear Form
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Summary Section -->
            <div class="study-summary-section">
                <div class="study-summary-item">
                    <div class="study-summary-value" id="totalSessions">0</div>
                    <div class="study-summary-label">Total Sessions</div>
                </div>
                <div class="study-summary-item">
                    <div class="study-summary-value" id="totalHours">0</div>
                    <div class="study-summary-label">Total Hours</div>
                </div>
                <div class="study-summary-item">
                    <div class="study-summary-value" id="avgEffectiveness">0%</div>
                    <div class="study-summary-label">Avg Effectiveness</div>
                </div>
                <div class="study-summary-item">
                    <div class="study-summary-value" id="bestTime">--</div>
                    <div class="study-summary-label">Best Time</div>
                </div>
            </div>
            
            <!-- Analytics Section -->
            <div class="analytics-section">
                <h2 class="analytics-title">Study Analytics</h2>
                <div class="analytics-grid">
                    <div class="analytics-item">
                        <div class="analytics-label">Most Productive Location</div>
                        <div class="analytics-value" id="bestLocation">--</div>
                    </div>
                    <div class="analytics-item">
                        <div class="analytics-label">Avg Session Duration</div>
                        <div class="analytics-value" id="avgDuration">--</div>
                    </div>
                    <div class="analytics-item">
                        <div class="analytics-label">Most Studied Subject</div>
                        <div class="analytics-value" id="topSubject">--</div>
                    </div>
                    <div class="analytics-item">
                        <div class="analytics-label">Focus Improvement</div>
                        <div class="analytics-value" id="focusTrend">--</div>
                    </div>
                </div>
            </div>
            
            <!-- Factors Section -->
            <div class="factors-section">
                <h2 class="factors-title">Impact Factors on Study Effectiveness</h2>
                <div class="factors-grid" id="factorsGrid">
                    <!-- Factors will be calculated and displayed here -->
                </div>
            </div>
            
            <!-- Session List -->
            <div class="session-list">
                <div class="list-header">
                    <h2 class="list-title">Your Study Sessions</h2>
                    <div class="btn-container">
                        <button class="study-btn study-btn-secondary" onclick="exportToCSV()">
                            <span>üì§</span> Export CSV
                        </button>
                        <button class="study-btn study-btn-secondary" onclick="clearAllSessions()">
                            <span>üóëÔ∏è</span> Clear All
                        </button>
                    </div>
                </div>
                
                <div id="sessionContainer">
                    <div class="empty-state">
                        <div class="empty-state-icon">üìä</div>
                        <h3>No Study Sessions Added Yet</h3>
                        <p>Add your first study session using the form above to start analyzing your study effectiveness.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Study Session</h3>
                <button class="modal-close" onclick="closeEditModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <div class="study-form-grid">
                        <div class="study-form-group">
                            <label for="editSubject">Subject</label>
                            <input type="text" id="editSubject" required>
                        </div>
                        <div class="study-form-group">
                            <label for="editTopic">Topic</label>
                            <input type="text" id="editTopic" required>
                        </div>
                        <div class="study-form-group">
                            <label for="editStudyDate">Date</label>
                            <input type="date" id="editStudyDate" required>
                        </div>
                        <div class="study-form-group">
                            <label for="editDuration">Duration (minutes)</label>
                            <input type="number" id="editDuration" min="5" required>
                        </div>
                        <div class="study-form-group">
                            <label for="editTimeOfDay">Time of Day</label>
                            <select id="editTimeOfDay" required>
                                <option value="early-morning">Early Morning (5-8 AM)</option>
                                <option value="morning">Morning (8-11 AM)</option>
                                <option value="midday">Midday (11 AM-2 PM)</option>
                                <option value="afternoon">Afternoon (2-5 PM)</option>
                                <option value="evening">Evening (5-8 PM)</option>
                                <option value="night">Night (8-11 PM)</option>
                                <option value="late-night">Late Night (11 PM-2 AM)</option>
                                <option value="early-morning-2">Early Morning (2-5 AM)</option>
                            </select>
                        </div>
                        <div class="study-form-group">
                            <label for="editLocation">Study Location</label>
                            <select id="editLocation" required>
                                <option value="library">Library</option>
                                <option value="dorm-room">Dorm Room</option>
                                <option value="classroom">Classroom</option>
                                <option value="coffee-shop">Coffee Shop</option>
                                <option value="outdoors">Outdoors</option>
                                <option value="study-group">Study Group</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Focus Factors -->
                    <div class="study-form-group">
                        <label>Focus Factors (Rate 1-5)</label>
                    </div>
                    <div class="study-form-grid">
                        <div class="study-form-group">
                            <label for="editEnergyLevel">Energy Level</label>
                            <select id="editEnergyLevel" required>
                                <option value="1">1 - Very Low</option>
                                <option value="2">2 - Low</option>
                                <option value="3">3 - Moderate</option>
                                <option value="4">4 - High</option>
                                <option value="5">5 - Very High</option>
                            </select>
                        </div>
                        <div class="study-form-group">
                            <label for="editDistractionLevel">Distraction Level</label>
                            <select id="editDistractionLevel" required>
                                <option value="1">1 - None</option>
                                <option value="2">2 - Minimal</option>
                                <option value="3">3 - Moderate</option>
                                <option value="4">4 - High</option>
                                <option value="5">5 - Extreme</option>
                            </select>
                        </div>
                        <div class="study-form-group">
                            <label for="editMaterialDifficulty">Material Difficulty</label>
                            <select id="editMaterialDifficulty" required>
                                <option value="1">1 - Very Easy</option>
                                <option value="2">2 - Easy</option>
                                <option value="3">3 - Moderate</option>
                                <option value="4">4 - Hard</option>
                                <option value="5">5 - Very Hard</option>
                            </select>
                        </div>
                        <div class="study-form-group">
                            <label for="editInterestLevel">Interest Level</label>
                            <select id="editInterestLevel" required>
                                <option value="1">1 - Very Low</option>
                                <option value="2">2 - Low</option>
                                <option value="3">3 - Moderate</option>
                                <option value="4">4 - High</option>
                                <option value="5">5 - Very High</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="study-form-group">
                        <label for="editNotes">Notes & Reflections</label>
                        <textarea id="editNotes" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="study-btn study-btn-secondary" onclick="closeEditModal()">Cancel</button>
                <button class="study-btn study-btn-primary" onclick="saveEdit()">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- SEO Content Section -->
    <div style="background: white; border-radius: 20px; padding: 2rem; margin-top: 3rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
            <h2 style="color: white; margin: 0 0 0.5rem 0; font-size: 1.8rem; font-weight: 600;">üìä How to Use the Study Effectiveness Analyzer</h2>
            <p style="margin: 0; color: rgba(255,255,255,0.95); font-size: 1.05rem; line-height: 1.6;">Track and analyze your study sessions to identify patterns, optimize focus factors, and improve learning efficiency. Get data-driven insights to maximize your academic performance and study productivity.</p>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
            <div style="background: white; padding: 1.5rem; border-radius: 12px; border: 2px solid #667eea; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15); transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <h3 style="color: #667eea; margin: 0 0 1rem 0; font-size: 1.3rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">üìà</span> Analytics Benefits
                </h3>
                <ul style="margin: 0; padding-left: 1.2rem; color: #555; line-height: 1.8;">
                    <li>Identify optimal study times and locations</li>
                    <li>Track focus factors and their impact</li>
                    <li>Monitor learning efficiency trends</li>
                    <li>Optimize study session effectiveness</li>
                </ul>
            </div>
            
            <div style="background: white; padding: 1.5rem; border-radius: 12px; border: 2px solid #10b981; box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15); transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <h3 style="color: #10b981; margin: 0 0 1rem 0; font-size: 1.3rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">üéØ</span> Key Features
                </h3>
                <ul style="margin: 0; padding-left: 1.2rem; color: #555; line-height: 1.8;">
                    <li>Study session tracking and scoring</li>
                    <li>Focus factor correlation analysis</li>
                    <li>Performance pattern visualization</li>
                    <li>Data export for further analysis</li>
                </ul>
            </div>
            
            <div style="background: white; padding: 1.5rem; border-radius: 12px; border: 2px solid #f59e0b; box-shadow: 0 2px 8px rgba(245, 158, 11, 0.15); transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <h3 style="color: #f59e0b; margin: 0 0 1rem 0; font-size: 1.3rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">üß†</span> Study Effectiveness Tips
                </h3>
                <p style="margin: 0; color: #555; line-height: 1.8;">
                    <strong style="color: #333;">Track Everything:</strong> Record energy levels, distractions, material difficulty, and interest to identify what affects your learning most. <strong style="color: #333;">Find Your Peak:</strong> Use analytics to discover your most productive times and optimal study conditions.
                </p>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <h3 id="notificationTitle">Success!</h3>
        <p id="notificationMessage">Study session added successfully.</p>
        <button onclick="closeNotification()">Got it!</button>
    </div>
    
    <script>
        let sessions = [];
        let editingIndex = -1;
        
        // Set today's date as default
        document.getElementById('studyDate').valueAsDate = new Date();
        
        // Load sessions from localStorage on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadSessions();
        });
        
        // Form submission
        document.getElementById('sessionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            addSession();
        });
        
        function addSession() {
            const subject = document.getElementById('subject').value;
            const topic = document.getElementById('topic').value;
            const studyDate = document.getElementById('studyDate').value;
            const duration = parseInt(document.getElementById('duration').value);
            const timeOfDay = document.getElementById('timeOfDay').value;
            const location = document.getElementById('location').value;
            const energyLevel = parseInt(document.getElementById('energyLevel').value);
            const distractionLevel = parseInt(document.getElementById('distractionLevel').value);
            const materialDifficulty = parseInt(document.getElementById('materialDifficulty').value);
            const interestLevel = parseInt(document.getElementById('interestLevel').value);
            const notes = document.getElementById('notes').value;
            
            // Calculate effectiveness score
            const effectiveness = calculateEffectiveness(
                energyLevel, 
                distractionLevel, 
                materialDifficulty, 
                interestLevel,
                duration
            );
            
            const session = {
                id: Date.now(),
                subject,
                topic,
                studyDate,
                duration,
                timeOfDay,
                location,
                energyLevel,
                distractionLevel,
                materialDifficulty,
                interestLevel,
                effectiveness,
                notes,
                createdAt: new Date().toISOString()
            };
            
            sessions.push(session);
            saveSessions();
            renderSessions();
            updateSummary();
            updateAnalytics();
            updateFactors();
            clearForm();
            showNotification('Success!', 'Study session added successfully.');
        }
        
        function calculateEffectiveness(energy, distraction, difficulty, interest, duration) {
            // Base effectiveness calculation
            let effectiveness = 0;
            
            // Energy level contributes positively
            effectiveness += energy * 15;
            
            // Distraction level contributes negatively
            effectiveness -= (distraction - 1) * 10;
            
            // Interest level contributes positively
            effectiveness += interest * 12;
            
            // Material difficulty is neutral but affects the calculation
            effectiveness += (3 - Math.abs(difficulty - 3)) * 5;
            
            // Duration factor (optimal around 60-90 minutes)
            const optimalDuration = 75;
            const durationFactor = 1 - Math.min(1, Math.abs(duration - optimalDuration) / optimalDuration);
            effectiveness += durationFactor * 15;
            
            // Ensure effectiveness is between 0 and 100
            effectiveness = Math.max(0, Math.min(100, Math.round(effectiveness)));
            
            return effectiveness;
        }
        
        function clearForm() {
            document.getElementById('sessionForm').reset();
            document.getElementById('studyDate').valueAsDate = new Date();
        }
        
        function renderSessions() {
            const container = document.getElementById('sessionContainer');
            
            if (sessions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìä</div>
                        <h3>No Study Sessions Added Yet</h3>
                        <p>Add your first study session using the form above to start analyzing your study effectiveness.</p>
                    </div>
                `;
                return;
            }
            
            const grid = document.createElement('div');
            grid.className = 'session-grid';
            
            // Sort sessions by date (newest first)
            const sortedSessions = [...sessions].sort((a, b) => new Date(b.studyDate) - new Date(a.studyDate));
            
            sortedSessions.forEach((session, index) => {
                const originalIndex = sessions.findIndex(s => s.id === session.id);
                const card = document.createElement('div');
                card.className = 'session-card';
                
                // Determine effectiveness class
                let effectivenessClass = 'effectiveness-';
                if (session.effectiveness >= 70) {
                    effectivenessClass += 'high';
                } else if (session.effectiveness >= 40) {
                    effectivenessClass += 'medium';
                } else {
                    effectivenessClass += 'low';
                }
                
                // Format time of day for display
                const timeOfDayMap = {
                    'early-morning': 'Early Morning',
                    'morning': 'Morning',
                    'midday': 'Midday',
                    'afternoon': 'Afternoon',
                    'evening': 'Evening',
                    'night': 'Night',
                    'late-night': 'Late Night',
                    'early-morning-2': 'Early Morning'
                };
                
                // Format location for display
                const locationMap = {
                    'library': 'Library',
                    'dorm-room': 'Dorm Room',
                    'classroom': 'Classroom',
                    'coffee-shop': 'Coffee Shop',
                    'outdoors': 'Outdoors',
                    'study-group': 'Study Group',
                    'other': 'Other'
                };
                
                card.innerHTML = `
                    <div class="session-actions">
                        <button class="action-btn edit-btn" onclick="editSession(${originalIndex})" title="Edit">‚úèÔ∏è</button>
                        <button class="action-btn delete-btn" onclick="deleteSession(${originalIndex})" title="Delete">üóëÔ∏è</button>
                    </div>
                    <h3 class="session-title">${session.subject} - ${session.topic}</h3>
                    <div class="session-date">${formatDate(session.studyDate)} ‚Ä¢ ${durationToTime(session.duration)}</div>
                    <div class="session-info">
                        <div class="session-info-item">
                            <span class="session-info-label">Time:</span>
                            <span>${timeOfDayMap[session.timeOfDay] || session.timeOfDay}</span>
                        </div>
                        <div class="session-info-item">
                            <span class="session-info-label">Location:</span>
                            <span>${locationMap[session.location] || session.location}</span>
                        </div>
                        <div class="session-info-item">
                            <span class="session-info-label">Energy:</span>
                            <span>${'‚≠ê'.repeat(session.energyLevel)}</span>
                        </div>
                        <div class="session-info-item">
                            <span class="session-info-label">Distraction:</span>
                            <span>${'‚≠ê'.repeat(session.distractionLevel)}</span>
                        </div>
                    </div>
                    <div class="effectiveness-score ${effectivenessClass}">${session.effectiveness}%</div>
                `;
                grid.appendChild(card);
            });
            
            container.innerHTML = '';
            container.appendChild(grid);
        }
        
        function updateSummary() {
            const totalSessions = sessions.length;
            const totalMinutes = sessions.reduce((sum, session) => sum + session.duration, 0);
            const totalHours = Math.round(totalMinutes / 60 * 10) / 10;
            
            // Calculate average effectiveness
            const avgEffectiveness = totalSessions > 0 
                ? Math.round(sessions.reduce((sum, session) => sum + session.effectiveness, 0) / totalSessions)
                : 0;
            
            // Find best time of day
            const timeEffectiveness = {};
            sessions.forEach(session => {
                if (!timeEffectiveness[session.timeOfDay]) {
                    timeEffectiveness[session.timeOfDay] = { total: 0, count: 0 };
                }
                timeEffectiveness[session.timeOfDay].total += session.effectiveness;
                timeEffectiveness[session.timeOfDay].count += 1;
            });
            
            let bestTime = '--';
            let highestEffectiveness = 0;
            
            Object.keys(timeEffectiveness).forEach(time => {
                const avg = timeEffectiveness[time].total / timeEffectiveness[time].count;
                if (avg > highestEffectiveness) {
                    highestEffectiveness = avg;
                    
                    const timeOfDayMap = {
                        'early-morning': 'Early Morning',
                        'morning': 'Morning',
                        'midday': 'Midday',
                        'afternoon': 'Afternoon',
                        'evening': 'Evening',
                        'night': 'Night',
                        'late-night': 'Late Night',
                        'early-morning-2': 'Early Morning'
                    };
                    
                    bestTime = timeOfDayMap[time] || time;
                }
            });
            
            document.getElementById('totalSessions').textContent = totalSessions;
            document.getElementById('totalHours').textContent = totalHours;
            document.getElementById('avgEffectiveness').textContent = `${avgEffectiveness}%`;
            document.getElementById('bestTime').textContent = bestTime;
        }
        
        function updateAnalytics() {
            if (sessions.length === 0) {
                document.getElementById('bestLocation').textContent = '--';
                document.getElementById('avgDuration').textContent = '--';
                document.getElementById('topSubject').textContent = '--';
                document.getElementById('focusTrend').textContent = '--';
                return;
            }
            
            // Most productive location
            const locationEffectiveness = {};
            sessions.forEach(session => {
                if (!locationEffectiveness[session.location]) {
                    locationEffectiveness[session.location] = { total: 0, count: 0 };
                }
                locationEffectiveness[session.location].total += session.effectiveness;
                locationEffectiveness[session.location].count += 1;
            });
            
            let bestLocation = '--';
            let highestLocationEffectiveness = 0;
            
            Object.keys(locationEffectiveness).forEach(location => {
                const avg = locationEffectiveness[location].total / locationEffectiveness[location].count;
                if (avg > highestLocationEffectiveness) {
                    highestLocationEffectiveness = avg;
                    
                    const locationMap = {
                        'library': 'Library',
                        'dorm-room': 'Dorm Room',
                        'classroom': 'Classroom',
                        'coffee-shop': 'Coffee Shop',
                        'outdoors': 'Outdoors',
                        'study-group': 'Study Group',
                        'other': 'Other'
                    };
                    
                    bestLocation = locationMap[location] || location;
                }
            });
            
            // Average session duration
            const avgDuration = Math.round(
                sessions.reduce((sum, session) => sum + session.duration, 0) / sessions.length
            );
            
            // Most studied subject
            const subjectCount = {};
            sessions.forEach(session => {
                if (!subjectCount[session.subject]) {
                    subjectCount[session.subject] = 0;
                }
                subjectCount[session.subject]++;
            });
            
            let topSubject = '--';
            let highestSubjectCount = 0;
            
            Object.keys(subjectCount).forEach(subject => {
                if (subjectCount[subject] > highestSubjectCount) {
                    highestSubjectCount = subjectCount[subject];
                    topSubject = subject;
                }
            });
            
            // Focus improvement (trend in energy/distraction ratio)
            const sortedSessions = [...sessions].sort((a, b) => new Date(a.studyDate) - new Date(b.studyDate));
            
            if (sortedSessions.length >= 2) {
                const firstHalf = sortedSessions.slice(0, Math.floor(sortedSessions.length / 2));
                const secondHalf = sortedSessions.slice(Math.floor(sortedSessions.length / 2));
                
                const firstHalfFocus = firstHalf.reduce((sum, session) => {
                    return sum + (session.energyLevel - session.distractionLevel);
                }, 0) / firstHalf.length;
                
                const secondHalfFocus = secondHalf.reduce((sum, session) => {
                    return sum + (session.energyLevel - session.distractionLevel);
                }, 0) / secondHalf.length;
                
                const focusTrend = secondHalfFocus - firstHalfFocus;
                
                if (focusTrend > 0.5) {
                    document.getElementById('focusTrend').textContent = 'Improving ‚ÜóÔ∏è';
                } else if (focusTrend < -0.5) {
                    document.getElementById('focusTrend').textContent = 'Declining ‚ÜòÔ∏è';
                } else {
                    document.getElementById('focusTrend').textContent = 'Stable ‚Üí';
                }
            } else {
                document.getElementById('focusTrend').textContent = 'Insufficient Data';
            }
            
            document.getElementById('bestLocation').textContent = bestLocation;
            document.getElementById('avgDuration').textContent = `${avgDuration} min`;
            document.getElementById('topSubject').textContent = topSubject;
        }
        
        function updateFactors() {
            const container = document.getElementById('factorsGrid');
            container.innerHTML = '';
            
            if (sessions.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">Add study sessions to see factor analysis</p>';
                return;
            }
            
            // Calculate correlation between each factor and effectiveness
            const factors = [
                { name: 'Energy Level', key: 'energyLevel', positive: true },
                { name: 'Distraction Level', key: 'distractionLevel', positive: false },
                { name: 'Material Difficulty', key: 'materialDifficulty', positive: false },
                { name: 'Interest Level', key: 'interestLevel', positive: true },
                { name: 'Session Duration', key: 'duration', positive: true, isDuration: true }
            ];
            
            factors.forEach(factor => {
                // Calculate correlation
                let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0, sumY2 = 0, n = sessions.length;
                
                sessions.forEach(session => {
                    const x = factor.isDuration ? session.duration : session[factor.key];
                    const y = session.effectiveness;
                    
                    sumX += x;
                    sumY += y;
                    sumXY += x * y;
                    sumX2 += x * x;
                    sumY2 += y * y;
                });
                
                const correlation = (n * sumXY - sumX * sumY) / 
                    Math.sqrt((n * sumX2 - sumX * sumX) * (n * sumY2 - sumY * sumY));
                
                // Create factor card
                const card = document.createElement('div');
                card.className = 'factor-card';
                
                // Determine impact strength and direction
                let impact = 'Low Impact';
                let stars = '‚≠ê';
                
                if (Math.abs(correlation) > 0.7) {
                    impact = 'High Impact';
                    stars = '‚≠ê‚≠ê‚≠ê';
                } else if (Math.abs(correlation) > 0.4) {
                    impact = 'Medium Impact';
                    stars = '‚≠ê‚≠ê';
                }
                
                const direction = (correlation > 0 && factor.positive) || (correlation < 0 && !factor.positive) 
                    ? 'Positive' : 'Negative';
                
                card.innerHTML = `
                    <div class="factor-name">${factor.name}</div>
                    <div class="factor-rating">
                        <div class="factor-stars">${stars}</div>
                        <div class="factor-impact">${impact}</div>
                    </div>
                    <div class="factor-impact">${direction} Correlation</div>
                `;
                
                container.appendChild(card);
            });
        }
        
        function editSession(index) {
            editingIndex = index;
            const session = sessions[index];
            
            document.getElementById('editSubject').value = session.subject;
            document.getElementById('editTopic').value = session.topic;
            document.getElementById('editStudyDate').value = session.studyDate;
            document.getElementById('editDuration').value = session.duration;
            document.getElementById('editTimeOfDay').value = session.timeOfDay;
            document.getElementById('editLocation').value = session.location;
            document.getElementById('editEnergyLevel').value = session.energyLevel;
            document.getElementById('editDistractionLevel').value = session.distractionLevel;
            document.getElementById('editMaterialDifficulty').value = session.materialDifficulty;
            document.getElementById('editInterestLevel').value = session.interestLevel;
            document.getElementById('editNotes').value = session.notes;
            
            document.getElementById('editModal').classList.add('show');
        }
        
        function closeEditModal() {
            document.getElementById('editModal').classList.remove('show');
            editingIndex = -1;
        }
        
        function saveEdit() {
            if (editingIndex === -1) return;
            
            const subject = document.getElementById('editSubject').value;
            const topic = document.getElementById('editTopic').value;
            const studyDate = document.getElementById('editStudyDate').value;
            const duration = parseInt(document.getElementById('editDuration').value);
            const timeOfDay = document.getElementById('editTimeOfDay').value;
            const location = document.getElementById('editLocation').value;
            const energyLevel = parseInt(document.getElementById('editEnergyLevel').value);
            const distractionLevel = parseInt(document.getElementById('editDistractionLevel').value);
            const materialDifficulty = parseInt(document.getElementById('editMaterialDifficulty').value);
            const interestLevel = parseInt(document.getElementById('editInterestLevel').value);
            const notes = document.getElementById('editNotes').value;
            
            // Recalculate effectiveness
            const effectiveness = calculateEffectiveness(
                energyLevel, 
                distractionLevel, 
                materialDifficulty, 
                interestLevel,
                duration
            );
            
            sessions[editingIndex] = {
                ...sessions[editingIndex],
                subject,
                topic,
                studyDate,
                duration,
                timeOfDay,
                location,
                energyLevel,
                distractionLevel,
                materialDifficulty,
                interestLevel,
                effectiveness,
                notes
            };
            
            saveSessions();
            renderSessions();
            updateSummary();
            updateAnalytics();
            updateFactors();
            closeEditModal();
            showNotification('Success!', 'Study session updated successfully.');
        }
        
        function deleteSession(index) {
            if (confirm('Are you sure you want to delete this study session?')) {
                sessions.splice(index, 1);
                saveSessions();
                renderSessions();
                updateSummary();
                updateAnalytics();
                updateFactors();
                showNotification('Deleted', 'Study session removed from your records.');
            }
        }
        
        function clearAllSessions() {
            if (sessions.length === 0) {
                showNotification('No Sessions', 'There are no study sessions to clear.');
                return;
            }
            
            if (confirm('Are you sure you want to clear all study sessions? This action cannot be undone.')) {
                sessions = [];
                saveSessions();
                renderSessions();
                updateSummary();
                updateAnalytics();
                updateFactors();
                showNotification('Cleared', 'All study sessions have been removed.');
            }
        }
        
        function exportToCSV() {
            if (sessions.length === 0) {
                showNotification('No Data', 'There are no study sessions to export.');
                return;
            }
            
            let csv = 'Subject,Topic,Date,Duration (min),Time of Day,Location,Energy Level,Distraction Level,Material Difficulty,Interest Level,Effectiveness (%),Notes\n';
            
            sessions.forEach(session => {
                csv += `"${session.subject}","${session.topic}","${session.studyDate}",${session.duration},"${session.timeOfDay}","${session.location}",${session.energyLevel},${session.distractionLevel},${session.materialDifficulty},${session.interestLevel},${session.effectiveness},"${session.notes}"\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `study_sessions_${new Date().toISOString().slice(0, 10)}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification('Exported', 'Your study sessions have been exported as CSV.');
        }
        
        function saveSessions() {
            localStorage.setItem('studyEffectivenessSessions', JSON.stringify(sessions));
        }
        
        function loadSessions() {
            const saved = localStorage.getItem('studyEffectivenessSessions');
            if (saved) {
                sessions = JSON.parse(saved);
                renderSessions();
                updateSummary();
                updateAnalytics();
                updateFactors();
            }
        }
        
        function showNotification(title, message) {
            const notification = document.getElementById('notification');
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                closeNotification();
            }, 5000);
        }
        
        function closeNotification() {
            document.getElementById('notification').classList.remove('show');
        }
        
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }
        
        function durationToTime(minutes) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            
            if (hours > 0) {
                return `${hours}h ${mins}m`;
            } else {
                return `${mins}m`;
            }
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('editModal');
            if (event.target === modal) {
                closeEditModal();
            }
        }

        // Initialize Study Effectiveness Analyzer when DOM is ready
        function initializeStudyEffectivenessAnalyzer() {
            // Set today's date as default
            document.getElementById('studyDate').valueAsDate = new Date();
            
            // Load existing sessions from localStorage
            loadSessions();
            
            console.log('Study Effectiveness Analyzer initialized successfully');
        }

        // Auto-initialize when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeStudyEffectivenessAnalyzer);
        } else {
            initializeStudyEffectivenessAnalyzer();
        }
    </script>

    <script>
        // Global initialization for main app integration
        if (typeof window.initializeStudyEffectivenessAnalyzer === 'undefined') {
            window.initializeStudyEffectivenessAnalyzer = initializeStudyEffectivenessAnalyzer;
        }
    </script>
</body>
</html>
