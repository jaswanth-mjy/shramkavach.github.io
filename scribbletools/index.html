<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta http-equiv="Permissions-Policy" content="unload=()">
    <title>ScribbleTools: Free Online Calculators & Tools for Math, Text, Finance, Health</title>
    <meta name="description" content="ScribbleTools is the professional, ad-free toolbox for math, text, finance, health, and more. Fast, privacy-first, and always free. Trusted by students, teachers, and professionals.">
    <meta name="keywords" content="online calculator, math calculator, area calculator, volume calculator, perimeter calculator, surface area calculator, text tools, financial calculator, health calculator, free utilities, ad-free tools, privacy-first tools, professional calculators">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="author" content="ScribbleTools Team">
    <meta http-equiv="Content-Language" content="en">
    <meta name="google-site-verification" content="YOUR_VERIFICATION_CODE_HERE">
    <link rel="canonical" href="https://scribbletools.shramkavach.com/">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta name="theme-color" content="#D9534F">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="website">
    <meta property="og:title" content="ScribbleTools: Free Online Calculators & Tools for Math, Text, Finance, Health">
    <meta property="og:description" content="ScribbleTools is the professional, ad-free toolbox for math, text, finance, health, and more. Fast, privacy-first, and always free. Trusted by students, teachers, and professionals.">
    <meta property="og:url" content="https://scribbletools.shramkavach.com/">
    <meta property="og:site_name" content="ScribbleTools">
    <meta property="og:image" content="https://scribbletools.shramkavach.com/assets/og-image.svg">
    <meta property="og:image:alt" content="ScribbleTools - Free Online Calculators & Tools for Math, Text, Finance, Health">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ScribbleTools: Free Online Calculators & Tools for Math, Text, Finance, Health">
    <meta name="twitter:description" content="ScribbleTools is the professional, ad-free toolbox for math, text, finance, health, and more. Fast, privacy-first, and always free. Trusted by students, teachers, and professionals.">
    <meta name="twitter:image" content="https://scribbletools.shramkavach.com/assets/og-image.svg">
    <meta name="twitter:site" content="@scribbletools">
    <meta name="twitter:creator" content="@scribbletools">
    
    <!-- Structured Data: WebSite -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "ScribbleTools",
      "url": "https://scribbletools.shramkavach.com/",
      "description": "ScribbleTools is the professional, ad-free toolbox for math, text, finance, health, and more. Fast, privacy-first, and always free.",
      "inLanguage": "en",
      "publisher": {
        "@type": "Organization",
        "name": "ScribbleTools Team",
        "url": "https://scribbletools.shramkavach.com/"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://scribbletools.shramkavach.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <!-- Structured Data: Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "ScribbleTools",
      "url": "https://scribbletools.shramkavach.com/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://scribbletools.shramkavach.com/logo.png"
      },
      "description": "Professional, ad-free calculator and tool platform for students, teachers, and professionals.",
      "sameAs": [
        "https://twitter.com/scribbletools"
      ]
    }
    </script>
    
    <!-- Structured Data: Breadcrumb -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://scribbletools.shramkavach.com/"
      }]
    }
    </script>
    
    <!-- Structured Data: WebApplication -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "ScribbleTools Calculator Suite",
      "url": "https://scribbletools.shramkavach.com/",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "1.0",
      "author": {
        "@type": "Organization",
        "name": "ScribbleTools Team"
      },
      "featureList": [
        "Math Calculators",
        "Text Tools",
        "Financial Calculators",
        "Health Calculators",
        "Image Tools",
        "Student Tools"
      ]
    }
    </script>
    <!-- Configuration (Optional) -->
    <script>
        // Load config.js if it exists, otherwise use defaults
        window.CONFIG = window.CONFIG || {
            siteName: 'ScribbleTools',
            siteUrl: 'https://scribbletools.shramkavach.com',
            features: { analytics: false, clickTracking: false },
            api: { baseUrl: '/api' }
        };
    </script>
    <script src="config.js" onerror="console.log('Config file not found, using defaults')"></script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID', {
            page_title: document.title,
            page_location: window.location.href
        });
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- QRCode Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    
    <!-- Initialization Script (External for better CSP compliance) -->
    <script src="assets/js/init.js" defer></script>

    <!-- Google Fonts: Caveat for handwritten style, and Poppins for readability -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- External CSS for better performance and caching -->
    <link rel="stylesheet" href="assets/css/main.css">

</head>
<body class="antialiased">
    <!-- Under Development Alert Banner -->
    <div class="bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 text-white py-3 px-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <svg class="w-6 h-6 animate-pulse" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                </svg>
                <span class="font-semibold text-sm md:text-base">‚ö†Ô∏è This website is currently under development. Some features may not work as expected.</span>
            </div>
            <a href="https://shramkavach.com" class="hidden md:inline-flex bg-white text-orange-600 px-4 py-1.5 rounded-lg font-bold text-sm hover:bg-gray-100 transition">
                Visit ShramKavach ‚Üí
            </a>
        </div>
    </div>
    
    <!-- Mobile Marquee Message -->
    <div id="mobile-marquee" class="block md:hidden bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 overflow-hidden">
        <div class="marquee-content whitespace-nowrap">
            üì± All tools available on mobile! Try desktop for enhanced experience ‚ú® | üì± All tools available on mobile! Try desktop for enhanced experience ‚ú®
        </div>
    </div>

    <div class="min-h-screen flex flex-col">
        <!-- Top Navigation with Tool Categories -->
        <header class="w-full bg-gradient-to-r from-blue-50 via-white to-red-50 shadow-xl border-b border-gray-200 relative z-50 overflow-hidden">
            <!-- Animated Background Elements - Fixed Z-Index -->
            <div class="absolute inset-0 opacity-20 pointer-events-none z-0">
                <div class="absolute top-0 left-1/4 w-32 h-32 bg-gradient-to-r from-blue-200 to-purple-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse pointer-events-none"></div>
                <div class="absolute top-0 right-1/4 w-32 h-32 bg-gradient-to-r from-yellow-200 to-red-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2s pointer-events-none"></div>
                <div class="absolute bottom-0 left-1/3 w-32 h-32 bg-gradient-to-r from-green-200 to-blue-200 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4s pointer-events-none"></div>
            </div>
            <!-- Single Row Header - Mobile Responsive -->
            <div class="container mx-auto flex items-center justify-between py-2.5 sm:py-5 px-2 sm:px-6 gap-1.5 sm:gap-8 relative z-10">
                <!-- Logo (Mobile Responsive) -->
                <div class="flex-shrink-0 mr-2 sm:mr-4 flex items-center">
                    <!-- Mobile Logo (Image) -->
                    <a href="#privacy-policy" id="logo-link" class="block md:hidden flex items-center h-11">
                        <img src="mobilelogo.png" alt="ScribbleTools" class="h-9 w-auto transition-opacity duration-300 hover:opacity-80">
                    </a>
                    <!-- Desktop Logo (Text) -->
                    <a href="#privacy-policy" id="logo-link-desktop" class="hidden md:block handwritten text-2xl sm:text-3xl md:text-4xl text-[#D9534F] hover:text-[#B8463F] transition-colors duration-300 focus:outline-none">ScribbleTools</a>
                </div>
                
                <!-- Mobile Category Dropdown -->
                <div class="flex-1 md:hidden px-1">
                    <div class="relative">
                        <select id="mobile-category-select" title="Select tool category" class="w-full appearance-none bg-gradient-to-r from-white to-blue-50 border-2 border-blue-300 rounded-xl px-3 py-2.5 pr-9 text-sm font-bold text-gray-800 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-300 shadow-md hover:shadow-lg min-h-[44px]">
                            <option value="">üè† Select Category</option>
                            <option value="text">üìù Text Tools</option>
                            <option value="math">üßÆ Math Tools</option>
                            <option value="financial">üí∞ Financial Tools</option>
                            <option value="health">üè• Health Tools</option>
                            <option value="image">üñºÔ∏è Image Tools</option>
                            <option value="student">üéì Student Tools</option>
                            <option value="utilities">üîß Utilities</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none bg-gradient-to-l from-blue-100 to-transparent rounded-r-xl">
                            <svg class="w-6 h-6 text-blue-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Desktop Category Navigation (Centered & Balanced) -->
                <div class="flex-1 hidden md:flex justify-center">
                    <nav class="flex items-center gap-4 text-sm">
                        <button class="category-btn px-4 py-2.5 rounded-2xl bg-gradient-to-r from-white to-blue-50 hover:from-blue-500 hover:to-purple-600 hover:text-white shadow-md hover:shadow-2xl transform hover:scale-110 hover:-rotate-1 transition-all duration-500 text-gray-700 font-bold whitespace-nowrap border-2 border-blue-200 hover:border-purple-300 relative overflow-hidden group" data-category="text">
                            <span class="relative z-10">üìù Text</span>
                            <div class="absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        </button>
                        <button class="category-btn px-4 py-2.5 rounded-2xl bg-gradient-to-r from-white to-green-50 hover:from-green-500 hover:to-teal-600 hover:text-white shadow-md hover:shadow-2xl transform hover:scale-110 hover:rotate-1 transition-all duration-500 text-gray-700 font-bold whitespace-nowrap border-2 border-green-200 hover:border-teal-300 relative overflow-hidden group" data-category="math">
                            <span class="relative z-10">üßÆ Math</span>
                            <div class="absolute inset-0 bg-gradient-to-r from-green-400 to-teal-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        </button>
                        <button class="category-btn px-4 py-2.5 rounded-2xl bg-gradient-to-r from-white to-yellow-50 hover:from-yellow-500 hover:to-orange-600 hover:text-white shadow-md hover:shadow-2xl transform hover:scale-110 hover:-rotate-1 transition-all duration-500 text-gray-700 font-bold whitespace-nowrap border-2 border-yellow-200 hover:border-orange-300 relative overflow-hidden group" data-category="financial">
                            <span class="relative z-10">üí∞ Financial</span>
                            <div class="absolute inset-0 bg-gradient-to-r from-yellow-400 to-orange-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        </button>
                        <button class="category-btn px-4 py-2.5 rounded-2xl bg-gradient-to-r from-white to-red-50 hover:from-red-500 hover:to-pink-600 hover:text-white shadow-md hover:shadow-2xl transform hover:scale-110 hover:rotate-1 transition-all duration-500 text-gray-700 font-bold whitespace-nowrap border-2 border-red-200 hover:border-pink-300 relative overflow-hidden group" data-category="health">
                            <span class="relative z-10">üè• Health</span>
                            <div class="absolute inset-0 bg-gradient-to-r from-red-400 to-pink-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        </button>
                        <button class="category-btn px-4 py-2.5 rounded-2xl bg-gradient-to-r from-white to-purple-50 hover:from-purple-500 hover:to-indigo-600 hover:text-white shadow-md hover:shadow-2xl transform hover:scale-110 hover:-rotate-1 transition-all duration-500 text-gray-700 font-bold whitespace-nowrap border-2 border-purple-200 hover:border-indigo-300 relative overflow-hidden group" data-category="image">
                            <span class="relative z-10">üñºÔ∏è Image</span>
                            <div class="absolute inset-0 bg-gradient-to-r from-purple-400 to-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        </button>
                        <button class="category-btn px-4 py-2.5 rounded-2xl bg-gradient-to-r from-white to-indigo-50 hover:from-indigo-500 hover:to-blue-600 hover:text-white shadow-md hover:shadow-2xl transform hover:scale-110 hover:rotate-1 transition-all duration-500 text-gray-700 font-bold whitespace-nowrap border-2 border-indigo-200 hover:border-blue-300 relative overflow-hidden group" data-category="student">
                            <span class="relative z-10">üéì Student</span>
                            <div class="absolute inset-0 bg-gradient-to-r from-indigo-400 to-blue-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        </button>
                        <button class="category-btn px-4 py-2.5 rounded-2xl bg-gradient-to-r from-white to-gray-50 hover:from-gray-500 hover:to-slate-600 hover:text-white shadow-md hover:shadow-2xl transform hover:scale-110 hover:-rotate-1 transition-all duration-500 text-gray-700 font-bold whitespace-nowrap border-2 border-gray-200 hover:border-slate-300 relative overflow-hidden group" data-category="utilities">
                            <span class="relative z-10">üîß Utilities</span>
                            <div class="absolute inset-0 bg-gradient-to-r from-gray-400 to-slate-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        </button>
                    </nav>
                </div>
                
                <!-- Right side controls - Mobile Simplified -->
                <div class="flex items-center gap-2 flex-shrink-0 relative z-50">
                    <!-- Mobile Search Input (visible on mobile only) -->
                    <div class="md:hidden relative">
                        <input 
                            type="text" 
                            id="mobile-search" 
                            placeholder="Search..." 
                            title="Search tools"
                            class="w-28 sm:w-36 h-11 appearance-none bg-white border-2 border-gray-200 rounded-lg px-2.5 pl-8 pr-2.5 text-xs sm:text-sm text-gray-700 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100 transition-all duration-300 shadow-sm">
                        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.15 4.906l3.44 3.44a.75.75 0 1 1-1.06 1.06l-3.44-3.44A7 7 0 0 1 2 9Z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    
                    <!-- Desktop Search Toggle Button (hidden on mobile) -->
                    <button id="search-toggle" class="hidden md:flex items-center justify-center w-12 h-12 bg-gradient-to-r from-white to-blue-50 hover:from-blue-500 hover:to-purple-600 hover:text-white shadow-lg hover:shadow-2xl rounded-2xl transition-all duration-500 border-2 border-blue-200 hover:border-purple-300 transform hover:scale-125 hover:rotate-12 group relative overflow-hidden" title="Search tools" aria-label="Toggle search">
                        <svg class="w-6 h-6 text-gray-700 group-hover:text-white transition-colors duration-500 relative z-10" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.15 4.906l3.44 3.44a.75.75 0 1 1-1.06 1.06l-3.44-3.44A7 7 0 0 1 2 9Z" clip-rule="evenodd" />
                        </svg>
                        <div class="absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    </button>
                    
                    <!-- Mobile Menu Button (Back in Header) -->
                    <button id="mobile-menu-toggle" 
                            class="w-11 h-11 bg-gradient-to-r from-white to-red-50 hover:from-red-500 hover:to-pink-600 hover:text-white border-2 border-red-200 hover:border-pink-300 rounded-lg shadow-md hover:shadow-lg flex items-center justify-center transition-all duration-300 flex-shrink-0"
                            title="Open menu" 
                            aria-label="Toggle navigation menu"
                            style="z-index: 99999; pointer-events: auto; touch-action: manipulation;">
                        <svg class="w-5 h-5 text-gray-700 pointer-events-none transition-colors duration-300" 
                             xmlns="http://www.w3.org/2000/svg" 
                             fill="none" 
                             viewBox="0 0 24 24" 
                             stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
            

            
            <!-- Search Bar (Hidden by default) - Mobile Responsive -->
            <div id="search-bar" class="hidden border-t border-gray-200 bg-white">
                <div class="container mx-auto px-2 sm:px-4 py-2 sm:py-3">
                    <div class="relative max-w-md mx-auto">
                        <input type="text" id="header-search" placeholder="Search tools..." class="w-full p-2 sm:p-3 pl-8 sm:pl-10 pr-8 sm:pr-10 border-2 border-gray-200 rounded-lg bg-white focus:border-red-400 focus:ring-2 focus:ring-red-100 focus:outline-none text-sm transition-all duration-200 shadow-sm">
                        <svg class="absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.15 4.906l3.44 3.44a.75.75 0 1 1-1.06 1.06l-3.44-3.44A7 7 0 0 1 2 9Z" clip-rule="evenodd" />
                        </svg>
                        <button id="search-close" class="absolute right-2 sm:right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-100 rounded transition-colors" title="Close search" aria-label="Close search">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Backdrop overlay for hamburger menu -->
            <div id="hamburger-backdrop" class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[59] opacity-0 pointer-events-none transition-opacity duration-300"></div>
            
            <!-- Enhanced Hamburger Menu Window - Centered Compact Popup -->
            <div id="hamburger-menu" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1 h-1 max-w-[calc(100% - 2rem)] bg-gradient-to-br from-white via-blue-50 to-purple-50 shadow-2xl rounded-3xl border-2 border-purple-300 z-[60] transform opacity-0 scale-[0.01] transition-all duration-400 ease-out backdrop-blur-md overflow-hidden">
                <!-- Menu Header with Gradient -->
                <div class="flex justify-between items-center px-4 py-2.5 bg-gradient-to-r from-purple-600 via-pink-500 to-red-500 rounded-t-3xl relative sticky top-0 z-10">
                    <h3 class="font-bold text-white text-sm flex items-center">
                        <span class="mr-1.5 text-base">üöÄ</span>
                        Menu
                    </h3>
                    <button id="hamburger-close" class="relative z-10 p-1.5 hover:bg-white/20 rounded-full transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50 min-w-[36px] min-h-[36px] flex items-center justify-center" title="Close menu" aria-label="Close navigation menu">
                        <svg class="w-4 h-4 text-white pointer-events-none" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                
                <!-- Menu Content with Enhanced Styling -->
                <div class="p-3 max-h-[60vh] overflow-y-auto">
                    <!-- Stylish Menu Links -->
                    <div class="space-y-1.5">
                        <a href="#about" class="hamburger-nav-link group flex items-center px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 transition-all duration-300 text-gray-700 hover:text-blue-700 border border-blue-100 hover:border-blue-200 hover:shadow-sm">
                            <span class="mr-1.5 text-base">‚ÑπÔ∏è</span>
                            <span class="font-medium text-xs">About</span>
                        </a>
                        
                        <a href="#request-tool" class="hamburger-nav-link group flex items-center px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 transition-all duration-300 text-gray-700 hover:text-green-700 border border-green-100 hover:border-green-200 hover:shadow-sm">
                            <span class="mr-1.5 text-base">üõ†Ô∏è</span>
                            <span class="font-medium text-xs">Request Tool</span>
                        </a>
                        
                        <a href="#feedback" class="hamburger-nav-link group flex items-center px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-orange-50 to-yellow-50 hover:from-orange-100 hover:to-yellow-100 transition-all duration-300 text-gray-700 hover:text-orange-700 border border-orange-100 hover:border-orange-200 hover:shadow-sm">
                            <span class="mr-1.5 text-base">üí¨</span>
                            <span class="font-medium text-xs">Feedback</span>
                        </a>
                        
                        <a href="#contact" class="hamburger-nav-link group flex items-center px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 transition-all duration-300 text-gray-700 hover:text-purple-700 border border-purple-100 hover:border-purple-200 hover:shadow-sm">
                            <span class="mr-1.5 text-base">üìß</span>
                            <span class="font-medium text-xs">Contact</span>
                        </a>
                        
                        <!-- Elegant Divider -->
                        <div class="flex items-center my-1.5">
                            <div class="flex-grow h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"></div>
                            <div class="mx-2 text-gray-400 text-[10px] font-medium">Legal</div>
                            <div class="flex-grow h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"></div>
                        </div>
                        
                        <a href="#privacy-policy" class="hamburger-nav-link group flex items-center px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100 transition-all duration-300 text-gray-600 hover:text-gray-800 border border-gray-200 hover:border-gray-300 hover:shadow-sm">
                            <span class="mr-1.5 text-sm">üîí</span>
                            <span class="font-medium text-xs">Privacy</span>
                        </a>
                    </div>
                    
                    <!-- Footer with subtle branding -->
                    <div class="mt-2 pt-1.5 border-t border-gray-200 text-center">
                        <p class="text-[10px] text-gray-500 flex items-center justify-center">
                            <span class="mr-0.5">‚ú®</span>
                            Made with care
                            <span class="ml-0.5">‚ú®</span>
                        </p>
                    </div>
                </div>
            </div>
        </header>
        <!-- Main Content Area - Full Width -->
        <div class="container mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 md:py-6 flex-grow">
            <main id="app-container" class="w-full bg-gradient-to-br from-white via-blue-50 to-purple-50 p-4 md:p-6 lg:p-8 rounded-2xl shadow-xl border-2 border-gradient-to-r from-blue-200 to-purple-200 backdrop-blur-sm">
                <!-- Tool content will be loaded here by JavaScript -->
            </main>
        </div>

        <!-- Footer -->
        <footer class="mt-auto border-t-2 border-gradient-to-r from-blue-200 to-purple-200 bg-gradient-to-r from-white via-blue-50 to-purple-50">
            
            <div class="container mx-auto px-4 py-4 text-center text-gray-500 text-sm">
                <div class="flex justify-center gap-6 mb-2">
                    <a href="#all-tools" class="text-gray-600 hover:text-black transition-colors font-semibold">Keymap</a>
                    <a href="#about" class="text-gray-600 hover:text-black transition-colors font-semibold">About</a>
                    <a href="#personal-notes" class="text-gray-600 hover:text-black transition-colors font-semibold">Personal Notes</a>
                    <a href="#feedback" class="text-gray-600 hover:text-black transition-colors font-semibold">Feedback</a>
                    <a href="#contact" class="text-gray-600 hover:text-black transition-colors font-semibold">Contact Us</a>
                </div>
                <p class="handwritten text-sm">Copyright created with ‚ù§Ô∏è by my Scribble team</p>
            </div>
        </footer>

        <!-- Blog Subscription Modal -->
        <div id="subscription-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
            <div class="bg-white rounded-2xl max-w-md w-full shadow-2xl transform transition-all duration-300 scale-95 opacity-0" id="subscription-modal-content">
                <!-- Modal Header -->
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-2xl p-6 text-center">
                    <div class="text-4xl mb-2">üì¨</div>
                    <h2 class="text-2xl font-bold mb-2">Never Miss an Update!</h2>
                    <p class="text-blue-100 text-sm">Join 10,000+ users getting exclusive content</p>
                </div>
                
                <!-- Modal Body -->
                <div class="p-6">
                    <!-- Benefits -->
                    <div class="mb-6 space-y-3">
                        <div class="flex items-center text-sm">
                            <span class="text-green-500 mr-3 text-lg">‚úÖ</span>
                            <span class="text-gray-700">Weekly tool tutorials & productivity hacks</span>
                        </div>
                        <div class="flex items-center text-sm">
                            <span class="text-green-500 mr-3 text-lg">‚úÖ</span>
                            <span class="text-gray-700">Early access to new calculators & features</span>
                        </div>
                        <div class="flex items-center text-sm">
                            <span class="text-green-500 mr-3 text-lg">‚úÖ</span>
                            <span class="text-gray-700">Exclusive tips from productivity experts</span>
                        </div>
                        <div class="flex items-center text-sm">
                            <span class="text-green-500 mr-3 text-lg">‚úÖ</span>
                            <span class="text-gray-700">No spam, unsubscribe anytime</span>
                        </div>
                    </div>
                    
                    <!-- Subscription Form -->
                    <form id="modal-subscription-form" class="space-y-4">
                        <div class="relative">
                            <input type="email" id="modal-email" placeholder="Enter your email address" required
                                   class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-200 focus:border-blue-400 transition-all duration-300">
                            <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                                </svg>
                            </span>
                        </div>
                        
                        <!-- Subscription Options -->
                        <div class="space-y-2">
                            <label class="flex items-center text-sm">
                                <input type="checkbox" name="subscription_type" value="blog_updates" class="mr-2 text-blue-500" checked>
                                üìù Blog updates & tutorials
                            </label>
                            <label class="flex items-center text-sm">
                                <input type="checkbox" name="subscription_type" value="new_tools" class="mr-2 text-blue-500" checked>
                                üõ†Ô∏è New tool announcements
                            </label>
                            <label class="flex items-center text-sm">
                                <input type="checkbox" name="subscription_type" value="weekly_digest" class="mr-2 text-blue-500">
                                üìä Weekly productivity digest
                            </label>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="flex gap-3 mt-6">
                            <button type="button" id="modal-close-btn" 
                                    class="flex-1 px-4 py-3 border-2 border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 transition-all duration-300 font-medium">
                                Maybe Later
                            </button>
                            <button type="submit" id="modal-subscribe-btn"
                                    class="flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-bold shadow-lg hover:shadow-xl">
                                üöÄ Subscribe
                            </button>
                        </div>
                    </form>
                    
                    <!-- Success State -->
                    <div id="modal-success" class="hidden text-center">
                        <div class="text-green-500 text-5xl mb-4">üéâ</div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">Welcome to the Community!</h3>
                        <p class="text-gray-600 mb-4">Check your email to confirm your subscription and get your welcome gift!</p>
                        <button id="modal-success-close" 
                                class="px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                            Got it!
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subscription Notification Bar -->
        <div id="subscription-bar" class="fixed bottom-0 left-0 right-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 transform translate-y-full transition-transform duration-500 z-40 hidden">
            <div class="container mx-auto flex items-center justify-between">
                <div class="flex items-center">
                    <span class="text-2xl mr-3">üì¨</span>
                    <div>
                        <p class="font-bold">Stay in the loop!</p>
                        <p class="text-sm text-indigo-100">Get weekly tool updates & productivity tips</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <input type="email" id="bar-email" placeholder="Your email" 
                           class="px-3 py-2 rounded-lg text-gray-800 text-sm w-48 focus:outline-none focus:ring-2 focus:ring-white/50">
                    <button id="bar-subscribe-btn" 
                            class="px-4 py-2 bg-white text-indigo-600 rounded-lg hover:bg-gray-100 transition-colors font-bold text-sm">
                        Subscribe
                    </button>
                    <button id="bar-close-btn" 
                            aria-label="Close subscription notification"
                            class="text-white hover:text-gray-200 transition-colors ml-2">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Trolling Privacy Notice -->
        <div id="privacy-notice" class="fixed bottom-4 right-4 md:bottom-6 md:right-6 z-50">
            <!-- Floating Genie Effect - Hidden on mobile -->
            <div class="absolute -top-16 -left-8 pointer-events-none hidden md:block">
                <div class="relative">
                    <!-- Magical aura -->
                    <div class="absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full opacity-20 animate-pulse"></div>
                    
                    <!-- Floating genie -->
                    <div class="text-4xl animate-float">üßû‚Äç‚ôÇÔ∏è</div>
                    
                    <!-- Continuous sparkles -->
                    <div class="sparkle-permanent absolute -top-2 -left-3 text-lg animate-sparkle-continuous">‚ú®</div>
                    <div class="sparkle-permanent absolute -bottom-1 left-6 text-sm animate-sparkle-continuous-delayed">‚≠ê</div>
                    <div class="sparkle-permanent absolute top-4 -right-2 text-lg animate-sparkle-continuous-slow">üí´</div>
                    
                    <!-- Magic dust trail -->
                    <div class="magic-trail absolute top-1 left-8 text-xs opacity-60 animate-float-trail">‚ú®‚ú®‚ú®</div>
                </div>
            </div>

            <!-- Privacy Button -->
            <button id="privacy-btn" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-3 py-2 md:px-4 md:py-2 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 relative group animate-bounce" title="Privacy Notice">
                <!-- Desktop Version -->
                <span class="hidden md:flex items-center gap-2">
                    <span id="lamp-icon" class="text-sm font-medium">ü™î</span>
                    <span id="btn-text" class="text-sm font-medium">Privacy Notice</span>
                </span>
                
                <!-- Mobile Version - Better visibility -->
                <span class="md:hidden flex items-center justify-center gap-1.5">
                    <span class="text-base">üîí</span>
                    <span class="text-xs font-medium">Privacy</span>
                </span>
                
                <!-- Magical Genie Animation -->
                <div id="genie-smoke" class="absolute -top-8 left-1/2 transform -translate-x-1/2 hidden group-hover:block">
                    <div class="relative">
                        <!-- Smoke clouds -->
                        <div class="smoke-cloud absolute -top-4 -left-2 text-2xl opacity-70 animate-float-up">üí®</div>
                        <div class="smoke-cloud absolute -top-6 left-2 text-lg opacity-50 animate-float-up-delayed">üí®</div>
                        <div class="smoke-cloud absolute -top-8 -left-1 text-xl opacity-60 animate-float-up-slow">üí®</div>
                        
                        <!-- Genie emerging -->
                        <div class="genie-emerge absolute -top-12 left-0 text-3xl animate-genie-appear">üßû‚Äç‚ôÇÔ∏è</div>
                        
                        <!-- Sparkles -->
                        <div class="sparkle absolute -top-10 -left-4 text-lg animate-sparkle">‚ú®</div>
                        <div class="sparkle absolute -top-14 left-4 text-sm animate-sparkle-delayed">‚≠ê</div>
                        <div class="sparkle absolute -top-8 left-6 text-lg animate-sparkle-slow">üí´</div>
                        <div class="sparkle absolute -top-16 -left-2 text-sm animate-sparkle-fast">üåü</div>
                    </div>
                </div>
                
                <!-- Hover tooltip with genie message -->
                <div class="absolute bottom-full right-0 mb-2 hidden group-hover:block z-10">
                    <div class="bg-gradient-to-r from-purple-800 to-blue-800 text-white text-xs px-3 py-2 rounded-lg whitespace-nowrap animate-magic-appear shadow-xl">
                        <span class="mr-1">üßû‚Äç‚ôÇÔ∏è</span>Your privacy wishes are granted!<span class="ml-1">‚ú®</span>
                    </div>
                    <div class="w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-purple-800 absolute top-full right-4"></div>
                </div>
            </button>

            <!-- Privacy Modal -->
            <div id="privacy-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-60 flex items-center justify-center p-2 md:p-4">
                <div class="bg-white rounded-2xl shadow-2xl max-w-sm md:max-w-md w-full p-4 md:p-6 relative animate-bounce mx-2">
                    <!-- Close button -->
                    <button id="close-privacy" title="Close Privacy Notice" class="absolute top-2 right-2 md:top-4 md:right-4 text-gray-400 hover:text-gray-600 transition-colors p-1">
                        <svg class="w-5 h-5 md:w-6 md:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>

                    <!-- Magical Genie Header -->
                    <div class="text-center mb-3 md:mb-4">
                        <div class="text-4xl md:text-6xl mb-2">üßû‚Äç‚ôÇÔ∏è</div>
                        <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-2">Privacy Notice</h3>
                        <p class="text-xs md:text-sm text-gray-600">Your privacy wishes are granted! ‚ú®</p>
                    </div>

                    <!-- Trolling Content -->
                    <div class="space-y-2 md:space-y-3 text-center">
                        <div class="bg-green-100 border border-green-300 rounded-lg p-2 md:p-3">
                            <div class="flex items-center justify-center gap-2 mb-1 md:mb-2">
                                <span class="text-green-600 text-base md:text-lg">üö´üç™</span>
                                <span class="font-semibold text-green-800 text-sm md:text-base">No Cookies Captured!</span>
                            </div>
                            <p class="text-xs md:text-sm text-green-700">We don&#39;t track you, stalk you, or sell your data!</p>
                        </div>

                        <div class="bg-blue-100 border border-blue-300 rounded-lg p-2 md:p-3">
                            <div class="flex items-center justify-center gap-2 mb-1 md:mb-2">
                                <span class="text-blue-600 text-base md:text-lg">üëª</span>
                                <span class="font-semibold text-blue-800 text-sm md:text-base">No Trace Mode</span>
                            </div>
                            <p class="text-xs md:text-sm text-blue-700">What you do here, stays here. We're like Vegas, but for tools!</p>
                        </div>

                        <div class="bg-purple-100 border border-purple-300 rounded-lg p-2 md:p-3">
                            <div class="flex items-center justify-center gap-2 mb-1 md:mb-2">
                                <span class="text-purple-600 text-base md:text-lg">üîí</span>
                                <span class="font-semibold text-purple-800 text-sm md:text-base">Ultra Private</span>
                            </div>
                            <p class="text-xs md:text-sm text-purple-700">So private, even we don&#39;t know you&#39;re here! ü§´</p>
                        </div>

                        <div class="bg-yellow-100 border border-yellow-300 rounded-lg p-2 md:p-3">
                            <div class="flex items-center justify-center gap-2 mb-1 md:mb-2">
                                <span class="text-yellow-600 text-base md:text-lg">üòé</span>
                                <span class="font-semibold text-yellow-800 text-sm md:text-base">Just Pure Tools</span>
                            </div>
                            <p class="text-xs md:text-sm text-yellow-700">No ads, no tracking, no nonsense. Just awesome tools!</p>
                        </div>
                    </div>

                    <div class="mt-4 md:mt-6 text-center">
                        <button id="got-it-btn" class="bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white px-4 md:px-6 py-2 rounded-full font-medium transition-all duration-300 transform hover:scale-105 shadow-lg text-sm md:text-base">
                            Got it! üëç
                        </button>
                    </div>

                    <div class="mt-3 md:mt-4 text-center text-xs text-gray-500">
                        <p>Seriously though, your privacy matters to us! üíú</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup Styles -->
    <style>
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Privacy Notice Animations */
        @keyframes spin-slow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .animate-spin-slow {
            animation: spin-slow 3s linear infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* Magical Genie Animations */
        @keyframes float-up {
            0% { transform: translateY(0px) scale(0.5); opacity: 0; }
            50% { transform: translateY(-10px) scale(1); opacity: 1; }
            100% { transform: translateY(-20px) scale(1.2); opacity: 0; }
        }

        @keyframes float-up-delayed {
            0% { transform: translateY(0px) scale(0.3); opacity: 0; }
            30% { transform: translateY(0px) scale(0.3); opacity: 0; }
            80% { transform: translateY(-15px) scale(0.8); opacity: 1; }
            100% { transform: translateY(-25px) scale(1); opacity: 0; }
        }

        @keyframes float-up-slow {
            0% { transform: translateY(0px) scale(0.4); opacity: 0; }
            60% { transform: translateY(-8px) scale(0.9); opacity: 1; }
            100% { transform: translateY(-18px) scale(1.1); opacity: 0; }
        }

        @keyframes genie-appear {
            0% { transform: translateY(20px) scale(0); opacity: 0; }
            25% { transform: translateY(10px) scale(0.5); opacity: 0.5; }
            50% { transform: translateY(-5px) scale(1.2); opacity: 1; }
            75% { transform: translateY(-10px) scale(1); opacity: 1; }
            100% { transform: translateY(-15px) scale(1.1); opacity: 1; }
        }

        @keyframes sparkle {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1) rotate(180deg); opacity: 1; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        @keyframes sparkle-delayed {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            25% { transform: scale(0) rotate(0deg); opacity: 0; }
            75% { transform: scale(1.2) rotate(270deg); opacity: 1; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        @keyframes sparkle-slow {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            40% { transform: scale(0.8) rotate(120deg); opacity: 0.8; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        @keyframes sparkle-fast {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            30% { transform: scale(1.5) rotate(150deg); opacity: 1; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        @keyframes magic-appear {
            0% { transform: scale(0.5) translateY(10px); opacity: 0; }
            100% { transform: scale(1) translateY(0px); opacity: 1; }
        }

        @keyframes lamp-rub {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-5deg) scale(1.1); }
            50% { transform: rotate(5deg) scale(1.2); }
            75% { transform: rotate(-3deg) scale(1.1); }
            100% { transform: rotate(0deg) scale(1); }
        }

        /* Continuous Genie Effects */
        @keyframes sparkle-continuous {
            0% { transform: scale(0.8) rotate(0deg); opacity: 0.6; }
            25% { transform: scale(1.2) rotate(90deg); opacity: 1; }
            50% { transform: scale(0.9) rotate(180deg); opacity: 0.8; }
            75% { transform: scale(1.1) rotate(270deg); opacity: 1; }
            100% { transform: scale(0.8) rotate(360deg); opacity: 0.6; }
        }

        @keyframes sparkle-continuous-delayed {
            0% { transform: scale(0.5) rotate(0deg); opacity: 0.4; }
            20% { transform: scale(0.5) rotate(20deg); opacity: 0.4; }
            60% { transform: scale(1.3) rotate(200deg); opacity: 1; }
            100% { transform: scale(0.5) rotate(360deg); opacity: 0.4; }
        }

        @keyframes sparkle-continuous-slow {
            0% { transform: scale(0.7) rotate(0deg); opacity: 0.5; }
            30% { transform: scale(1.0) rotate(60deg); opacity: 0.8; }
            70% { transform: scale(1.2) rotate(240deg); opacity: 1; }
            100% { transform: scale(0.7) rotate(360deg); opacity: 0.5; }
        }

        @keyframes float-trail {
            0% { transform: translateX(0px) translateY(0px); opacity: 0.3; }
            25% { transform: translateX(5px) translateY(-2px); opacity: 0.6; }
            50% { transform: translateX(10px) translateY(-4px); opacity: 0.8; }
            75% { transform: translateX(15px) translateY(-2px); opacity: 0.4; }
            100% { transform: translateX(20px) translateY(0px); opacity: 0.1; }
        }

        .animate-sparkle-continuous { animation: sparkle-continuous 3s ease-in-out infinite; }
        .animate-sparkle-continuous-delayed { animation: sparkle-continuous-delayed 4s ease-in-out infinite; }
        .animate-sparkle-continuous-slow { animation: sparkle-continuous-slow 5s ease-in-out infinite; }
        .animate-float-trail { animation: float-trail 2s ease-in-out infinite; }

        .animate-float-up { animation: float-up 2s ease-out infinite; }
        .animate-float-up-delayed { animation: float-up-delayed 2.5s ease-out infinite; }
        .animate-float-up-slow { animation: float-up-slow 3s ease-out infinite; }
        .animate-genie-appear { animation: genie-appear 1.5s ease-out infinite; }
        .animate-sparkle { animation: sparkle 1.8s ease-in-out infinite; }
        .animate-sparkle-delayed { animation: sparkle-delayed 2.2s ease-in-out infinite; }
        .animate-sparkle-slow { animation: sparkle-slow 2.8s ease-in-out infinite; }
        .animate-sparkle-fast { animation: sparkle-fast 1.2s ease-in-out infinite; }
        .animate-magic-appear { animation: magic-appear 0.5s ease-out forwards; }

        /* Privacy button hover effects */
        #privacy-btn:hover {
            animation: none;
        }

        #privacy-btn:hover #lamp-icon {
            animation: lamp-rub 0.8s ease-in-out infinite;
        }

        #privacy-btn.jeene-mode {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #f9ca24, #f0932b, #eb4d4b, #6c5ce7, #a29bfe, #fd79a8);
            background-size: 400% 400%;
            animation: rainbow 2s ease infinite;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5), 0 0 40px rgba(78, 205, 196, 0.3);
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Modal entrance animation */
        .modal-enter {
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0px);
            }
        }
    </style>

    <!-- Error Monitoring and Analytics -->
    <script>
        // Error monitoring and reporting
        window.addEventListener('error', function(e) {
            console.error('Global Error:', e.error);
            
            // Send error to analytics if available
            if (typeof gtag !== 'undefined') {
                gtag('event', 'exception', {
                    'description': e.error ? e.error.toString() : 'Unknown error',
                    'fatal': false,
                    'page_url': window.location.href,
                    'page_title': document.title
                });
            }
            
            // Optional: Send to your own error logging service
            try {
                fetch('/api/log-error', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        error: e.error ? e.error.toString() : 'Unknown error',
                        stack: e.error ? e.error.stack : '',
                        url: window.location.href,
                        timestamp: new Date().toISOString(),
                        userAgent: navigator.userAgent
                    })
                }).catch(() => {}); // Silently fail if endpoint doesn't exist
            } catch (err) {
                console.warn('Error reporting failed:', err);
            }
        });

        // Unhandled promise rejection monitoring
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled Promise Rejection:', e.reason);
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'exception', {
                    'description': 'Unhandled Promise: ' + (e.reason ? e.reason.toString() : 'Unknown'),
                    'fatal': false,
                    'page_url': window.location.href
                });
            }
        });

        // Performance monitoring
        window.addEventListener('load', function() {
            if ('performance' in window) {
                const perfData = performance.getEntriesByType('navigation')[0];
                if (perfData && typeof gtag !== 'undefined') {
                    gtag('event', 'timing_complete', {
                        'name': 'page_load',
                        'value': Math.round(perfData.loadEventEnd - perfData.fetchStart)
                    });
                }
            }
        });

        // Track calculator usage
        function trackCalculatorUsage(calculatorName, action = 'calculate') {
            if (typeof gtag !== 'undefined') {
                gtag('event', action, {
                    'event_category': 'Calculator',
                    'event_label': calculatorName,
                    'page_url': window.location.href
                });
            }
        }

        // Track tool navigation
        function trackToolNavigation(toolName) {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'tool_navigation', {
                    'event_category': 'Navigation',
                    'event_label': toolName,
                    'page_url': window.location.href
                });
            }
        }

        // Database Click Tracking System
        async function trackToolClick(toolName, toolPath, toolCategory) {
            try {
                // Environment detection for local vs production
                const isLocal = window.location.hostname === 'localhost' || 
                                window.location.hostname === '127.0.0.1' ||
                                window.location.hostname === '192.168.1.1' ||
                                window.location.hostname.startsWith('192.168.') ||
                                window.location.hostname.startsWith('10.0.') ||
                                window.location.hostname.startsWith('172.');
                
                const API_URL = isLocal 
                    ? '/scribbletools/api/track-click-local.php'
                    : '/api/track-click.php';
                
                // console.log(`üåç Environment: ${isLocal ? 'Local Development' : 'Production'}`);
                // console.log(`üì° API URL: ${API_URL}`);
                
                const trackingData = {
                    tool_name: toolName,
                    tool_path: toolPath,
                    tool_category: toolCategory,
                    timestamp: new Date().toISOString(),
                    user_agent: navigator.userAgent,
                    referrer: document.referrer || window.location.origin
                };

                // Send to database (with silent failure)
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(trackingData)
                });

                if (response.ok) {
                    const contentType = response.headers.get('content-type');
                    if (contentType && contentType.includes('application/json')) {
                        const result = await response.json();
                        if (result.success) {
                            // Store click count in localStorage for potential display
                            localStorage.setItem(`clicks_${toolName}`, result.click_count);
                            
                            // Trigger custom event for any listeners
                            window.dispatchEvent(new CustomEvent('toolClickTracked', {
                                detail: {
                                    toolName,
                                    toolPath,
                                    toolCategory,
                                    clickCount: result.click_count
                                }
                            }));
                        }
                    }
                }
            } catch (error) {
                // Silently fail - tracking is not critical
                // Fallback to localStorage tracking if server is unavailable
                const localKey = `local_clicks_${toolName}`;
                const localClicks = parseInt(localStorage.getItem(localKey) || '0') + 1;
                localStorage.setItem(localKey, localClicks.toString());
            }
        }

        // Helper function to extract tool info from path/hash
        function getToolInfo(path) {
            const toolName = path.replace('#', '').replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            
            // Determine category based on path
            let category = 'Other';
            if (path.includes('text/')) category = 'Text Tools';
            else if (path.includes('math/')) category = 'Math Tools';
            else if (path.includes('financial/')) category = 'Financial Tools';
            else if (path.includes('health/')) category = 'Health Tools';
            else if (path.includes('image/')) category = 'Image Tools';
            else if (path.includes('student/')) category = 'Student Tools';
            
            return { toolName, category };
        }
    </script>

    <!-- Global JavaScript -->
    <script>
        const appContainer = document.getElementById('app-container');
        const hamburgerToolNav = document.getElementById('hamburger-tool-nav');
        const hamburgerSearchInput = document.getElementById('mobile-search');

        // --- The Key Map of All Tools ---
        const routes = {
            // Text Tools
            '#change-case': 'client/tools/text/change-case.html', '#find-replace': 'client/tools/text/find-replace.html', '#reverse-text': 'client/tools/text/reverse-text.html', '#split-text': 'client/tools/text/split-text.html', '#join-text': 'client/tools/text/join-text.html', '#repeat-text': 'client/tools/text/repeat-text.html', '#sort-lines': 'client/tools/text/sort-lines.html', '#shuffle-lines': 'client/tools/text/shuffle-lines.html', '#remove-punctuation': 'client/tools/text/remove-punctuation.html', '#text-indenter': 'client/tools/text/text-indenter.html', '#text-dedenter': 'client/tools/text/text-dedenter.html', '#text-justifier': 'client/tools/text/text-justifier.html', '#rot13': 'client/tools/text/rot13.html', '#text-scrambler': 'client/tools/text/text-scrambler.html', '#keyword-density': 'client/tools/text/keyword-density.html', '#unique-word-finder': 'client/tools/text/unique-word-finder.html', '#readability-score': 'client/tools/text/readability-score.html', '#trim-whitespace': 'client/tools/text/trim-whitespace.html', '#align-text': 'client/tools/text/align-text.html', '#word-wrap': 'client/tools/text/word-wrap.html', '#add-line-numbers': 'client/tools/text/add-line-numbers.html', '#word-counter': 'client/tools/text/word-counter.html', '#text-statistics': 'client/tools/text/text-statistics.html', '#find-top-words': 'client/tools/text/find-top-words.html', '#change-font': 'client/tools/text/change-font.html', '#zalgo-text': 'client/tools/text/zalgo-text.html', '#image-from-text': 'client/tools/text/image-from-text.html', '#url-encode': 'client/tools/text/url-encode.html', '#base64-encode': 'client/tools/text/base64-encode.html', '#remove-duplicate-lines': 'client/tools/text/remove-duplicate-lines.html', '#morse-code': 'client/tools/text/morse-code-converter.html',
            '#json-formatter-minifier': 'client/tools/text/json-formatter-minifier.html', '#xml-formatter-minifier': 'client/tools/text/xml-formatter-minifier.html', '#csv-json-converter': 'client/tools/text/csv-json-converter.html', '#html-encode-decode': 'client/tools/text/html-encode-decode.html', '#lorem-ipsum-generator': 'client/tools/text/lorem-ipsum-generator.html', '#text-to-ascii-art': 'client/tools/text/text-to-ascii-art.html', '#text-diff-checker': 'client/tools/text/text-diff-checker.html', '#unicode-converter': 'client/tools/text/unicode-converter.html', '#binary-hex-octal-converter': 'client/tools/text/binary-hex-octal-converter.html', '#upside-down-text': 'client/tools/text/upside-down-text.html', '#mirror-text': 'client/tools/text/mirror-text.html', '#bubble-text': 'client/tools/text/bubble-text.html', '#fancy-unicode-text-generator': 'client/tools/text/fancy-unicode-text-generator.html', '#emoji-replacer-inserter': 'client/tools/text/emoji-replacer-inserter.html', '#text-to-qr-code': 'client/tools/text/text-to-qr-code.html',

            // Image Tools
            '#resize-image-3x5cm-4x5cm': 'client/tools/image/resize-image-3x5cm-4x5cm.html',
            '#resize-image-4x6': 'client/tools/image/resize-image-4x6inch.html',
            '#resize-image-600x600': 'client/tools/image/resize-image-600x600.html',
            '#resize-image-6cm-2cm-300dpi': 'client/tools/image/resize-image-6cm-2cm-300dpi.html',
            '#resize-image-a4': 'client/tools/image/resize-image-a4.html',
            '#resize-image-cm': 'client/tools/image/resize-image-cm.html',
            '#resize-image-inches': 'client/tools/image/resize-image-inches.html',
            '#resize-image-mm': 'client/tools/image/resize-image-mm.html',
            '#resize-image-pan-card': 'client/tools/image/resize-image-pan-card.html',
            '#resize-image-pixel': 'client/tools/image/resize-image-pixel.html',
            '#resize-image-ssc': 'client/tools/image/resize-image-ssc.html',
            '#resize-image-upsc': 'client/tools/image/resize-image-upsc.html',
            '#resize-image-youtube-banner': 'client/tools/image/resize-image-youtube-banner.html',
            '#resize-instagram-nocrop': 'client/tools/image/resize-instagram-nocrop.html',
            '#resize-sign-50mm-20mm': 'client/tools/image/resize-sign-50mm-20mm.html',

            // Math Calculators
            
            // Basic Math Operations
            '#basic-calculator': 'client/tools/math/basic-calculator.html',
            '#square-root-calculator': 'client/tools/math/square-root-calculator.html',
            '#exponent-calculator': 'client/tools/math/exponent-calculator.html',
            '#average-calculator': 'client/tools/math/average-calculator.html',
            '#fraction-calculator': 'client/tools/math/fraction-calculator.html',
            '#scientific-notation-converter': 'client/tools/math/scientific-notation-converter.html',
            '#quadratic-formula': 'client/tools/math/quadratic-formula.html',
            
            // Percentage & Financial Math
            '#percentage-calculator': 'client/tools/math/percentage-calculator.html',
            '#discount-calculator': 'client/tools/math/discount-calculator.html',
            '#tip-calculator': 'client/tools/math/tip-calculator.html',
            '#simple-interest-calculator': 'client/tools/math/simple-interest-calculator.html',
            '#unit-price-calculator': 'client/tools/math/unit-price-calculator.html',
            
            // Geometry - Area & Perimeter
            '#area-calculator': 'client/tools/math/area-calculator.html',
            '#perimeter-calculator': 'client/tools/math/perimeter-calculator.html',
            '#volume-calculator': 'client/tools/math/volume-calculator.html',
            '#lateral-surface-area-calculator': 'client/tools/math/lateral-surface-area-calculator.html',
            '#total-surface-area-calculator': 'client/tools/math/total-surface-area-calculator.html',
            
            // Shape Calculators
            '#circle-calculator': 'client/tools/math/shapes/circle-calculator.html',
            '#triangle-calculator': 'client/tools/math/shapes/triangle-calculator.html',
            '#rectangle-calculator': 'client/tools/math/shapes/rectangle-calculator.html',
            '#polygon-calculator': 'client/tools/math/shapes/polygon-calculator.html',
            '#sphere-calculator': 'client/tools/math/shapes/sphere-calculator.html',
            '#cylinder-calculator': 'client/tools/math/shapes/cylinder-calculator.html',
            '#cuboid-calculator': 'client/tools/math/shapes/cuboid-calculator.html',
            
            // Statistics & Probability
            '#statistics-calculator': 'client/tools/math/statistics-calculator.html',
            '#standard-deviation-calculator': 'client/tools/math/standard-deviation-calculator.html',
            '#mean-median-mode-range-calculator': 'client/tools/math/mean-median-mode-range-calculator.html',
            '#probability-calculator': 'client/tools/math/probability-calculator.html',
            '#permutation-and-combination-calculator': 'client/tools/math/permutation-and-combination-calculator.html',
            '#z-score-calculator': 'client/tools/math/z-score-calculator.html',
            '#confidence-interval-calculator': 'client/tools/math/confidence-interval-calculator.html',
            '#sample-size-calculator': 'client/tools/math/sample-size-calculator.html',
            '#number-sequence-calculator': 'client/tools/math/number-sequence-calculator.html',

            // Financial Calculators
            '#401k-calculator': 'client/tools/financial/401k-calculator.html',
            '#amortization-calculator': 'client/tools/financial/amortization-calculator.html',
            '#annuity-calculator': 'client/tools/financial/annuity-calculator.html',
            '#auto-loan-calculator': 'client/tools/financial/auto-loan-calculator.html',
            '#compound-interest-calculator': 'client/tools/financial/compound-interest-calculator.html',
            '#currency-calculator': 'client/tools/financial/currency-calculator.html',
            '#estate-tax-calculator': 'client/tools/financial/estate-tax-calculator.html',
            '#finance-calculator': 'client/tools/financial/finance-calculator.html',
            '#house-affordability-calculator': 'client/tools/financial/house-affordability-calculator.html',
            '#income-tax-calculator': 'client/tools/financial/income-tax-calculator.html',
            '#inflation-calculator': 'client/tools/financial/inflation-calculator.html',
            '#interest-calculator': 'client/tools/financial/interest-calculator.html',
            '#interest-rate-calculator': 'client/tools/financial/interest-rate-calculator.html',
            '#investment-calculator': 'client/tools/financial/investment-calculator.html',
            '#loan-calculator': 'client/tools/financial/loan-calculator.html',
            '#marriage-tax-calculator': 'client/tools/financial/marriage-tax-calculator.html',
            '#mortgage-calculator': 'client/tools/financial/mortgage-calculator.html',
            '#mortgage-payoff-calculator': 'client/tools/financial/mortgage-payoff-calculator.html',
            '#payment-calculator': 'client/tools/financial/payment-calculator.html',
            '#pension-calculator': 'client/tools/financial/pension-calculator.html',
            '#rent-calculator': 'client/tools/financial/rent-calculator.html',
            '#retirement-calculator': 'client/tools/financial/retirement-calculator.html',
            '#salary-calculator': 'client/tools/financial/salary-calculator.html',
            '#indian-gst-calculator': 'client/tools/financial/indian-gst-calculator.html',
            '#sales-tax-calculator': 'client/tools/financial/indian-gst-calculator.html',
            '#savings-calculator': 'client/tools/financial/savings-calculator.html',
            '#social-security-calculator': 'client/tools/financial/social-security-calculator.html',
            '#canadian-mortgage-calculator': 'client/tools/financial/Canadian-Mortgage-Calculator.html',
            '#percent-off-calculator': 'client/tools/financial/Percent-Off-Calculator.html',
            '#mortgage-amortization-calculator': 'client/tools/financial/Mortgage-Amortization-Calculator.html',
            '#mortgage-calculator-uk': 'client/tools/financial/Mortgage-Calculator-UK.html',

            // Health & Fitness
            '#all-tools': 'all-tools.html',
            '#bmi-calculator': 'client/tools/health/bmi-calculator.html',
            '#calorie-calculator': 'client/tools/health/calorie-calculator.html',
            '#body-fat-calculator': 'client/tools/health/body-fat-calculator.html',
            '#bmr-calculator': 'client/tools/health/bmr-calculator.html',
            '#body-surface-area': 'client/tools/health/body-surface-area.html',
            '#lean-body-mass': 'client/tools/health/lean-body-mass.html',
            '#ideal-weight': 'client/tools/health/ideal-weight.html',
            '#healthy-weight': 'client/tools/health/healthy-weight.html',
            '#body-type': 'client/tools/health/body-type.html',
            '#body-water-percentage': 'client/tools/health/body-water-percentage.html',
            '#waist-hip-ratio': 'client/tools/health/waist-hip-ratio.html',
            '#waist-height-ratio': 'client/tools/health/waist-height-ratio.html',
            '#daily-calorie': 'client/tools/health/daily-calorie.html',
            '#macro-calculator': 'client/tools/health/macro-calculator.html',
            '#protein-calculator': 'client/tools/health/protein-calculator.html',
            '#fat-intake': 'client/tools/health/fat-intake.html',
            '#carbohydrate-calculator': 'client/tools/health/carbohydrate-calculator.html',
            '#tdee-calculator': 'client/tools/health/tdee-calculator.html',
            '#calories-burned': 'client/tools/health/calories-burned.html',
            '#weight-watcher-points': 'client/tools/health/weight-watcher-points.html',
            '#one-rep-max': 'client/tools/health/one-rep-max.html',
            '#target-heart-rate': 'client/tools/health/target-heart-rate.html',
            '#max-heart-rate': 'client/tools/health/max-heart-rate.html',
            '#pace-calculator': 'client/tools/health/pace-calculator.html',
            '#split-time': 'client/tools/health/split-time.html',
            '#vo2-max': 'client/tools/health/vo2-max.html',
            '#mets-calculator': 'client/tools/health/mets-calculator.html',
            '#activity-calories': 'client/tools/health/activity-calories.html',
            '#pregnancy-calculator': 'client/tools/health/pregnancy-calculator.html',
            '#pregnancy-weight-gain': 'client/tools/health/pregnancy-weight-gain.html',
            '#pregnancy-conception': 'client/tools/health/pregnancy-conception.html',
            '#due-date': 'client/tools/health/due-date.html',
            '#ovulation-calculator': 'client/tools/health/ovulation-calculator.html',
            '#period-calculator': 'client/tools/health/period-calculator.html',
            '#gfr-calculator': 'client/tools/health/gfr-calculator.html',
            '#bac-calculator': 'client/tools/health/bac-calculator.html',
            '#medical-bsa': 'client/tools/health/medical-bsa.html',
            '#anorexic-bmi': 'client/tools/health/anorexic-bmi.html',
            '#overweight-checker': 'client/tools/health/overweight-checker.html',
            '#army-body-fat': 'client/tools/health/army-body-fat.html',
            '#bmi-for-age': 'client/tools/health/bmi-for-age.html',
            '#basal-insulin': 'client/tools/health/basal-insulin.html',
            '#insulin-carb-ratio': 'client/tools/health/insulin-carb-ratio.html',
            '#sleep-calculator': 'client/tools/health/sleep-calculator.html',
            '#water-intake': 'client/tools/health/water-intake.html',
            '#ideal-weight-calculator': 'client/tools/health/ideal-weight-calculator.html', '#pace-calculator': 'client/tools/health/pace-calculator.html',

            // Image & Media
            '#add-name-dob-photo': 'client/tools/image/add-name-dob-photo.html',
            '#black-white-image': 'client/tools/image/black-white-image.html',
            '#bulk-image-resizer': 'client/tools/image/bulk-image-resizer.html',
            '#check-image-dpi': 'client/tools/image/check-image-dpi.html',
            '#circle-crop': 'client/tools/image/circle-crop.html',
            '#flip-image': 'client/tools/image/flip-image.html',
            '#freehand-crop': 'client/tools/image/freehand-crop.html',
            '#grayscale-image': 'client/tools/image/grayscale-image.html',
            '#image-color-picker': 'client/tools/image/image-color-picker.html',
            '#remove-image-background': 'client/tools/image/remove-image-background.html',
            '#picture-to-pixel-art': 'client/tools/image/picture-to-pixel-art.html',
            '#instagram-grid-maker': 'client/tools/image/instagram-grid-maker.html',
            '#split-image': 'client/tools/image/split-image.html',
            '#join-images-one': 'client/tools/image/join-images-one.html',
            '#pixelate-image': 'client/tools/image/pixelate-image.html',
            '#image-converter': 'client/tools/image/image-converter.html', '#image-compressor': 'client/tools/image/image-compressor.html', '#gif-tools': 'client/tools/image/gif-tools.html', '#video-to-gif': 'client/tools/image/video-to-gif.html', '#passport-photo-maker': 'client/tools/image/passport-photo-maker.html', '#reduce-image-size-kb': 'client/tools/image/reduce-image-size-kb.html', '#resize-image-pixel': 'client/tools/image/resize-image-pixel.html', '#resize-image-ssc': 'client/tools/image/resize-image-ssc.html', '#resize-image-upsc': 'client/tools/image/resize-image-upsc.html', '#generate-signature': 'client/tools/image/generate-signature.html', '#increase-image-size-kb': 'client/tools/image/increase-image-size-kb.html', '#watermark-images': 'client/tools/image/watermark-images.html', '#rotate-image': 'client/tools/image/rotate-image.html', '#super-resolution': 'client/tools/image/super-resolution.html', '#resize-image-2x2inch': 'client/tools/image/resize-image-2x2inch.html', '#resize-image-3x4': 'client/tools/image/resize-image-3x4.html', '#resize-image-35mm-45mm': 'client/tools/image/resize-image-35mm-45mm.html', '#resize-image-youtube-banner': 'client/tools/image/resize-image-youtube-banner.html', '#resize-instagram-nocrop': 'client/tools/image/resize-instagram-nocrop.html', '#resize-sign-50mm-20mm': 'client/tools/image/resize-sign-50mm-20mm.html', '#resize-signature': 'client/tools/image/resize-signature.html', '#resize-whatsapp-dp': 'client/tools/image/resize-whatsapp-dp.html',

            // General Utilities
            '#personal-notes': 'client/tools/other/personal-notes.html', '#age-calculator': 'client/tools/other/age-calculator.html', '#date-calculator': 'client/tools/other/date-calculator.html', '#password-generator': 'client/tools/other/password-generator.html', '#dice-roller': 'client/tools/other/dice-roller.html',
            
            // Student Tools
            // Student Tools - Career & Placement
            '#resume-builder': 'client/tools/student/career/resume-builder.html', 
            '#cover-letter-generator': 'client/tools/student/career/cover-letter-generator.html', 
            '#salary-calculator': 'client/tools/student/career/salary-calculator.html', 
            '#job-tracker': 'client/tools/student/career/job-tracker.html',
            
            // Student Tools - Academic & Study
            '#gpa-calculator': 'client/tools/student/academic/gpa-calculator.html', 
            '#vit-gpa-calculator': 'client/tools/student/academic/vit-gpa-calculator.html',
            '#grade-calculator': 'client/tools/student/academic/grade-calculator.html', 
            '#study-planner': 'client/tools/student/academic/study-planner.html', 
            '#assignment-tracker': 'client/tools/student/academic/assignment-tracker.html', 
            '#citation-generator': 'client/tools/student/academic/citation-generator.html', 
            '#flashcard-maker': 'client/tools/student/academic/flashcard-maker.html', 
            
            // Student Tools - Financial & Budget
            '#student-budget': 'client/tools/student/finance/student-budget.html', 
            '#student-loan-calculator': 'client/tools/student/finance/student-loan-calculator.html', 
            '#textbook-cost': 'client/tools/student/finance/textbook-cost.html', 
            '#semester-cost': 'client/tools/student/finance/semester-cost.html', 
            '#work-hour-calculator': 'client/tools/student/finance/work-hour-calculator.html', 
            '#expense-splitter': 'client/tools/student/finance/expense-splitter.html',
            
            // Student Tools - Planning & Organization
            '#class-schedule-builder': 'client/tools/student/planning/class-schedule-builder.html', 
            '#semester-planner': 'client/tools/student/planning/semester-planner.html',
            '#daily-schedule-optimizer': 'client/tools/student/planning/daily-schedule-optimizer.html',

            '#study-group-scheduler': 'client/tools/student/planning/study-group-scheduler.html',
            '#exam-schedule-organizer': 'client/tools/student/planning/exam-schedule-organizer.html',
            
            // Student Tools - Productivity & Wellness
            '#habit-tracker': 'client/tools/student/productivity/habit-tracker.html', 
            '#time-tracker': 'client/tools/student/productivity/time-tracker.html', 
            '#goal-tracker': 'client/tools/student/productivity/goal-tracker.html', 
            '#focus-timer': 'client/tools/student/productivity/focus-timer.html', 
            '#reflection-journal': 'client/tools/student/productivity/reflection-journal.html', 
            '#procrastination-breaker': 'client/tools/student/productivity/procrastination-breaker.html',
            '#study-effectiveness-analyzer': 'client/tools/student/productivity/study-effectiveness-analyzer.html',
            '#time-allocation-chart': 'client/tools/student/productivity/time-allocation-chart.html',
            '#academic-performance-dashboard': 'client/tools/student/productivity/academic-performance-dashboard.html',
            '#assignment-priority-matrix': 'client/tools/student/productivity/assignment-priority-matrix.html',
            '#stress-monitor': 'client/tools/student/wellness/stress-monitor.html', 
            '#sleep-calculator': 'client/tools/student/wellness/sleep-calculator.html',
            
            // Student Tools - Skill Building & Learning
            '#skill-checklist': 'client/tools/student/skills/skill-checklist.html',
            
            // Removed Blog Archive route
            // '#blog-archive': 'blog-archive',
        };

        const homeContent = `
            <div class="p-8 space-y-12 max-w-7xl mx-auto">
                <!-- Hero Section -->
                <div class="text-center p-10">
                    <h1 class="handwritten text-6xl font-extrabold text-[#D9534F] mb-6 drop-shadow-lg">ScribbleTools</h1>
                    <p class="text-2xl font-bold text-gray-800 mb-6 max-w-4xl mx-auto leading-relaxed">
                        The Ultimate, Ad-Free, All-in-One Toolbox for Everyone.<br>
                        <span class="block mt-4 text-3xl font-extrabold text-[#D9534F]">No ads. No clutter. Just tools.</span>
                    </p>
                    <p class="text-xl text-gray-700 mb-6 max-w-3xl mx-auto">
                        200+ professional calculators and utilities for finance, math, health, text processing, and more. 
                        All free, all private, all client-side processing.
                    </p>
                    <p class="text-lg font-semibold text-[#D9534F]">
                        Select a tool from the menu to get started, or use the search bar to find exactly what you need.
                    </p>
                </div>

                <!-- What We Provide Section - Mobile Responsive -->
                <section class="bg-gradient-to-r from-blue-50 to-purple-50 p-4 sm:p-6 md:p-8 rounded-xl sm:rounded-2xl border border-blue-200 shadow-lg">
                    <h2 class="handwritten text-2xl sm:text-3xl md:text-4xl text-gray-800 mb-4 sm:mb-6 text-center">üõ†Ô∏è What We Provide</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                        <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg sm:text-xl font-bold text-blue-600 mb-2 sm:mb-3">üí∞ Financial Tools</h3>
                            <p class="text-gray-700 text-sm mb-3">Professional calculators for personal finance, business planning, and investment decisions.</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Mortgage & loan calculators</li>
                                <li>‚Ä¢ Investment & retirement planning</li>
                                <li>‚Ä¢ Tax calculators (income, sales, estate)</li>
                                <li>‚Ä¢ Currency converters</li>
                                <li>‚Ä¢ Compound interest calculators</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg sm:text-xl font-bold text-green-600 mb-2 sm:mb-3">üî¢ Math & Science</h3>
                            <p class="text-gray-700 text-sm mb-2 sm:mb-3">Advanced mathematical calculators for students, engineers, and professionals.</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Area, volume, perimeter calculators</li>
                                <li>‚Ä¢ Statistical analysis tools</li>
                                <li>‚Ä¢ Unit converters (length, weight, temperature)</li>
                                <li>‚Ä¢ Geometry calculators</li>
                                <li>‚Ä¢ Scientific calculators</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-xl font-bold text-red-600 mb-3">üí™ Health & Fitness</h3>
                            <p class="text-gray-700 text-sm mb-3">Comprehensive health tracking and fitness planning tools.</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ BMI & body fat calculators</li>
                                <li>‚Ä¢ Calorie & nutrition trackers</li>
                                <li>‚Ä¢ Fitness goal calculators</li>
                                <li>‚Ä¢ Medical calculators (BMR, heart rate)</li>
                                <li>‚Ä¢ Pregnancy & health trackers</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg sm:text-xl font-bold text-purple-600 mb-2 sm:mb-3">üìù Text & Content</h3>
                            <p class="text-gray-700 text-sm mb-2 sm:mb-3">Powerful text processing and content creation utilities.</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Text formatters & converters</li>
                                <li>‚Ä¢ Word & character counters</li>
                                <li>‚Ä¢ Case converters & text cleaners</li>
                                <li>‚Ä¢ Regular expression tools</li>
                                <li>‚Ä¢ Content analyzers</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg sm:text-xl font-bold text-orange-600 mb-2 sm:mb-3">üñºÔ∏è Image Tools</h3>
                            <p class="text-gray-700 text-sm mb-2 sm:mb-3">Professional image editing and processing tools.</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Image resizers & compressors</li>
                                <li>‚Ä¢ Format converters</li>
                                <li>‚Ä¢ Photo editors & filters</li>
                                <li>‚Ä¢ Background removers</li>
                                <li>‚Ä¢ Batch image processors</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg sm:text-xl font-bold text-indigo-600 mb-2 sm:mb-3">üéì Student Resources</h3>
                            <p class="text-gray-700 text-sm mb-2 sm:mb-3">Educational tools for academic success and career development.</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ GPA & grade calculators</li>
                                <li>‚Ä¢ Study planners & timers</li>
                                <li>‚Ä¢ Resume builders</li>
                                <li>‚Ä¢ Citation generators</li>
                                <li>‚Ä¢ Career planning tools</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Privacy & Transparency Section -->
                <section class="bg-gradient-to-r from-yellow-50 to-orange-50 p-8 rounded-2xl border border-yellow-200 shadow-lg">
                    <h2 class="handwritten text-4xl text-gray-800 mb-6 text-center">üîí Our Commitment to Transparency</h2>
                    <div class="space-y-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-xl font-bold text-yellow-600 mb-3">üö´ What We DON&#39;T Do</h3>
                            <ul class="grid md:grid-cols-2 gap-2 text-gray-700">
                                <li>‚úó We don&#39;t store your personal data</li>
                                <li>‚úó We don&#39;t track your browsing habits</li>
                                <li>‚úó We don&#39;t show advertisements</li>
                                <li>‚úó We don&#39;t sell your information</li>
                                <li>‚úó We don&#39;t require registration or login</li>
                                <li>‚úó We don&#39;t collect cookies for tracking</li>
                                <li>‚úó We don&#39;t share data with third parties</li>
                                <li>‚úó We don&#39;t have hidden costs or premium features</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-xl font-bold text-green-600 mb-3">‚úÖ What We DO Promise</h3>
                            <ul class="grid md:grid-cols-2 gap-2 text-gray-700">
                                <li>‚úì All calculations happen in your browser</li>
                                <li>‚úì Your data never leaves your device</li>
                                <li>‚úì Completely free forever</li>
                                <li>‚úì No registration required</li>
                                <li>‚úì Open to feedback and suggestions</li>
                                <li>‚úì Constantly improving based on user needs</li>
                                <li>‚úì Fast, lightweight, and accessible</li>
                                <li>‚úì Regular updates and new tools</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Transparency & Continuous Improvement -->
                <section class="bg-gradient-to-r from-gray-50 to-slate-50 p-8 rounded-2xl border border-gray-200 shadow-lg">
                    <h2 class="handwritten text-4xl text-gray-800 mb-6 text-center">üîÑ Our Development Philosophy</h2>
                    <div class="space-y-6 text-gray-700">
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-xl font-bold text-blue-600 mb-3">üöÄ Continuous Improvement</h3>
                            <p class="mb-3">We believe in transparency and continuous improvement. Here's how we operate:</p>
                            <ul class="space-y-2">
                                <li><strong>We Accept Our Limitations:</strong> Our tools are constantly evolving. If you encounter bugs, calculation errors, or missing features, please let us know. We&#39;re not perfect, but we&#39;re committed to improvement.</li>
                                <li><strong>User-Driven Development:</strong> Every suggestion matters. We prioritize new tools and features based on user feedback and real-world needs.</li>
                                <li><strong>Open Communication:</strong> We maintain transparent communication about updates, fixes, and planned features through our feedback system.</li>
                                <li><strong>Quality Over Quantity:</strong> While we offer many tools, we ensure each one is functional, accurate, and user-friendly.</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-xl font-bold text-green-600 mb-3">üí° How You Can Help</h3>
                            <ul class="space-y-2">
                                <li><strong>Report Issues:</strong> Found a bug or error? We want to know! Your reports help us improve.</li>
                                <li><strong>Suggest Features:</strong> Need a tool we don&#39;t have? Tell us what you&#39;d like to see added.</li>
                                <li><strong>Share Feedback:</strong> Love a tool or think it could be better? Your insights guide our development.</li>
                                <li><strong>Spread the Word:</strong> If ScribbleTools helps you, share it with others who might benefit.</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- SEO-Rich Tool Categories -->
                <section class="bg-gradient-to-r from-indigo-50 to-purple-50 p-8 rounded-2xl border border-indigo-200 shadow-lg">
                    <h2 class="handwritten text-4xl text-gray-800 mb-6 text-center">üîç Popular Calculator Categories</h2>
                    <div class="grid md:grid-cols-3 gap-4 text-sm">
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                            <h4 class="font-bold text-blue-600 mb-2">Financial Calculators</h4>
                            <p class="text-gray-600">mortgage calculator, loan calculator, compound interest, 401k calculator, retirement planning, tax calculator, currency converter, investment calculator, savings calculator, amortization calculator</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                            <h4 class="font-bold text-green-600 mb-2">Math & Geometry</h4>
                            <p class="text-gray-600">area calculator, volume calculator, perimeter calculator, triangle calculator, circle calculator, percentage calculator, fraction calculator, algebra solver, statistics calculator, unit converter</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                            <h4 class="font-bold text-red-600 mb-2">Health & Fitness</h4>
                            <p class="text-gray-600">BMI calculator, calorie calculator, body fat calculator, BMR calculator, ideal weight calculator, pregnancy calculator, heart rate calculator, macro calculator, fitness tracker, nutrition calculator</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                            <h4 class="font-bold text-purple-600 mb-2">Text Processing</h4>
                            <p class="text-gray-600">word counter, character counter, text formatter, case converter, text analyzer, regex tester, markdown converter, HTML encoder, text cleaner, duplicate remover</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                            <h4 class="font-bold text-orange-600 mb-2">Image Tools</h4>
                            <p class="text-gray-600">image resizer, photo compressor, format converter, background remover, image cropper, photo editor, batch processor, thumbnail generator, image optimizer, photo filter</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                            <h4 class="font-bold text-indigo-600 mb-2">Student Tools</h4>
                            <p class="text-gray-600">GPA calculator, VIT GPA calculator, grade calculator, study planner, citation generator, resume builder, essay planner, assignment tracker, flashcard maker, research tools, academic calendar</p>
                        </div>
                    </div>
                </section>

                <!-- Call to Action -->
                <section class="text-center bg-gradient-to-r from-red-50 to-pink-50 p-8 rounded-2xl border border-red-200 shadow-lg">
                    <h2 class="handwritten text-4xl text-[#D9534F] mb-4">Ready to Get Started?</h2>
                    <p class="text-xl text-gray-700 mb-6 max-w-3xl mx-auto">
                        Join millions of users who trust ScribbleTools for their daily calculations and conversions. Select any tool from our comprehensive menu, use our search feature, or browse by category.
                    </p>
                    <div class="flex flex-wrap justify-center gap-4 mt-6">
                        <div class="bg-white px-6 py-3 rounded-lg shadow-sm border border-gray-200">
                            <strong class="text-[#D9534F]">200+</strong> Free Tools
                        </div>
                        <div class="bg-white px-6 py-3 rounded-lg shadow-sm border border-gray-200">
                            <strong class="text-[#D9534F]">0</strong> Ads Forever
                        </div>
                        <div class="bg-white px-6 py-3 rounded-lg shadow-sm border border-gray-200">
                            <strong class="text-[#D9534F]">100%</strong> Privacy Focused
                        </div>
                        <div class="bg-white px-6 py-3 rounded-lg shadow-sm border border-gray-200">
                            <strong class="text-[#D9534F]">24/7</strong> Available
                        </div>
                    </div>
                    <p class="text-lg text-gray-600 mt-6 italic">
                        "ScribbleTools - Where productivity meets privacy, and calculations meet convenience."
                    </p>
                </section>
            </div>
        `;        
        const aboutContent = `
             <div class="p-8 space-y-8">
                <div>
                    <h2 class="handwritten text-6xl text-[#D9534F] mb-6 text-center">About ScribbleTools</h2>
                    <p class="text-gray-600 leading-relaxed max-w-3xl mx-auto text-center">
                        ScribbleTools is your all-in-one, distraction-free toolbox for text, math, finance, health, and more. Born from the frustration of ad-filled, clunky utility sites, we set out to build a collection of beautiful, fast, and genuinely useful online tools that people actually enjoy using.<br><br>
                        <strong>What makes us different?</strong> We focus on speed, clarity, and a delightful hand-drawn aesthetic. Every tool is crafted to be intuitive, lightweight, and free of unnecessary clutter. Whether you‚Äôre a student, developer, teacher, or just someone who needs to get things done, ScribbleTools is designed to help you work smarter, not harder.
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="handwritten text-4xl text-gray-800 mb-3">Our Philosophy</h3>
                        <p class="text-gray-600 leading-relaxed">
                            <strong>Simplicity is Key:</strong> Every tool is designed to be intuitive and straightforward. No confusing interfaces, no unnecessary steps. Just the functionality you need, presented clearly.<br><br>
                            <strong>Speed Matters:</strong> Your time is valuable. Our tools are built with modern, lightweight web technologies to ensure they load instantly and perform calculations in a flash.<br><br>
                            <strong>A Joy to Use:</strong> Utility doesn‚Äôt have to be boring. With a unique, hand-drawn aesthetic, we aim to make your daily tasks a little more delightful.<br><br>
                            <strong>Privacy First:</strong> We don‚Äôt track you, store your data, or show you ads. Everything runs in your browser for maximum privacy and speed.
                        </p>
                    </div>
                    <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbXN0eXNqZzZpZ2ZkN2Q0cGJmZzF3b2l1bTdzc2U5N2N6eXFtdnNqZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3o7btNa0RUYa5E7iiQ/giphy.gif" class="rounded-lg shadow-md w-full h-auto object-cover" alt="Creative Process GIF">
                </div>

                 <div class="grid md:grid-cols-2 gap-8 items-center">
                    <img src="https://media.tenor.com/o6HowXvQwW8AAAAM/think-big-think.gif" class="rounded-lg shadow-md w-full h-auto object-cover" alt="Community GIF">
                    <div>
                        <h3 class="handwritten text-4xl text-gray-800 mb-3">Why So Many Tools?</h3>
                        <p class="text-gray-600 leading-relaxed">
                           We believe in thinking big. Why create one tool when you can build a comprehensive library? Our goal is to be the single destination for any quick calculation, conversion, or text manipulation you might need. By building this extensive collection, we aim to create a truly indispensable resource for a wide audience.<br><br>
                           <strong>Always Growing:</strong> This project is a labor of love, and we‚Äôre constantly scribbling down new ideas for utilities to add. If you have a suggestion, let us know!
                        </p>
                    </div>
                </div>
                <div class="mt-8 p-6 bg-amber-50/50 rounded-lg border border-amber-200 max-w-3xl mx-auto">
                    <h3 class="font-semibold text-lg text-amber-800 mb-3">What can you do here?</h3>
                    <ul class="list-disc list-inside text-gray-700">
                        <li>Manipulate, analyze, and format text in dozens of ways</li>
                        <li>Calculate loans, mortgages, investments, and more</li>
                        <li>Crunch numbers with math and science calculators</li>
                        <li>Track your health, fitness, and nutrition</li>
                        <li>Convert, encode, and decode data</li>
                        <li>And much more‚Äîno ads, no tracking, just tools</li>
                    </ul>
                </div>
            </div>
        `;
        
        const blogArchiveContent = `
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <!-- Archive Header -->
                <div class="text-center mb-12">
                    <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">üìö Learning Hub</h1>
                    <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                        Explore all our tutorials, guides, and resources. From beginner basics to advanced techniques.
                    </p>
                </div>

                <!-- Filter Tabs -->
                <div class="flex flex-wrap justify-center gap-3 mb-12">
                    <button class="px-6 py-2 bg-purple-600 text-white rounded-full font-semibold hover:bg-purple-700 transition-colors">All Posts</button>
                    <button class="px-6 py-2 bg-gray-100 text-gray-700 rounded-full font-semibold hover:bg-gray-200 transition-colors">Tutorials</button>
                    <button class="px-6 py-2 bg-gray-100 text-gray-700 rounded-full font-semibold hover:bg-gray-200 transition-colors">Updates</button>
                    <button class="px-6 py-2 bg-gray-100 text-gray-700 rounded-full font-semibold hover:bg-gray-200 transition-colors">Finance</button>
                    <button class="px-6 py-2 bg-gray-100 text-gray-700 rounded-full font-semibold hover:bg-gray-200 transition-colors">Health</button>
                    <button class="px-6 py-2 bg-gray-100 text-gray-700 rounded-full font-semibold hover:bg-gray-200 transition-colors">Tech</button>
                </div>

                <!-- Recent Posts (2024) -->
                <div class="mb-16">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="mr-3">üÜï</span>
                        Recent Posts (2024)
                    </h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Latest Posts -->
                        <article onclick="window.location.hash='#blog-text-tools'" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-blue-500 to-blue-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üìù</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-semibold">Tutorial</span>
                                    <span class="text-gray-500 text-xs">Dec 8, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Mastering Text Tools</h3>
                                <p class="text-gray-600 text-sm mb-4">Discover powerful text manipulation features you might have missed...</p>
                                <span class="text-gray-400 text-xs">5 min read</span>
                            </div>
                        </article>

                        <article onclick="window.location.hash='#blog-financial-planning'" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-green-500 to-green-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üí∞</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-semibold">Finance</span>
                                    <span class="text-gray-500 text-xs">Dec 5, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Financial Planning Made Easy</h3>
                                <p class="text-gray-600 text-sm mb-4">Learn how to use our financial calculators effectively...</p>
                                <span class="text-gray-400 text-xs">7 min read</span>
                            </div>
                        </article>

                        <article onclick="window.location.hash='#blog-tech-stack'" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-purple-500 to-purple-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üõ†Ô∏è</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-semibold">Dev Blog</span>
                                    <span class="text-gray-500 text-xs">Dec 1, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Building ScribbleTools</h3>
                                <p class="text-gray-600 text-sm mb-4">Behind-the-scenes look at our tech stack...</p>
                                <span class="text-gray-400 text-xs">10 min read</span>
                            </div>
                        </article>

                        <article onclick="window.location.hash='#blog-fitness-tracking'" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-orange-500 to-orange-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üèÉ‚Äç‚ôÄÔ∏è</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-semibold">Health</span>
                                    <span class="text-gray-500 text-xs">Nov 28, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Fitness Tracking Simplified</h3>
                                <p class="text-gray-600 text-sm mb-4">Make the most of our health calculators...</p>
                                <span class="text-gray-400 text-xs">6 min read</span>
                            </div>
                        </article>

                        <article onclick="window.location.hash='#blog-image-tools'" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-red-500 to-pink-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üé®</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-semibold">Updates</span>
                                    <span class="text-gray-500 text-xs">Nov 25, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">New Image Tools Released!</h3>
                                <p class="text-gray-600 text-sm mb-4">Latest batch of image editing tools...</p>
                                <span class="text-gray-400 text-xs">4 min read</span>
                            </div>
                        </article>

                        <article onclick="window.location.hash='#blog-community'" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-indigo-500 to-indigo-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üí¨</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-indigo-100 text-indigo-700 rounded text-xs font-semibold">Community</span>
                                    <span class="text-gray-500 text-xs">Nov 22, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Join Our Community</h3>
                                <p class="text-gray-600 text-sm mb-4">Connect with users and shape our future...</p>
                                <span class="text-gray-400 text-xs">3 min read</span>
                            </div>
                        </article>
                    </div>
                </div>

                <!-- Older Posts (October 2024) -->
                <div class="mb-16">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <span class="mr-3">üìÖ</span>
                        October 2024
                    </h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <article class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-teal-500 to-teal-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üßÆ</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-teal-100 text-teal-700 rounded text-xs font-semibold">Finance</span>
                                    <span class="text-gray-500 text-xs">Oct 10, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Master Your Finances</h3>
                                <p class="text-gray-600 text-sm mb-4">Advanced financial calculator tips...</p>
                                <span class="text-gray-400 text-xs">8 min read</span>
                            </div>
                        </article>

                        <article class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-cyan-500 to-cyan-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üìä</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-cyan-100 text-cyan-700 rounded text-xs font-semibold">Education</span>
                                    <span class="text-gray-500 text-xs">Oct 8, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Student Success Tools</h3>
                                <p class="text-gray-600 text-sm mb-4">GPA calculators and grade tracking...</p>
                                <span class="text-gray-400 text-xs">6 min read</span>
                            </div>
                        </article>

                        <article class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-pink-500 to-pink-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üè•</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-pink-100 text-pink-700 rounded text-xs font-semibold">Health</span>
                                    <span class="text-gray-500 text-xs">Oct 5, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Health Calculator Guide</h3>
                                <p class="text-gray-600 text-sm mb-4">Understanding BMI, BMR and more...</p>
                                <span class="text-gray-400 text-xs">9 min read</span>
                            </div>
                        </article>

                        <article class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow cursor-pointer border border-gray-100">
                            <div class="h-48 bg-gradient-to-br from-amber-500 to-amber-600 relative">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-6xl">üì±</span>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="px-2 py-1 bg-amber-100 text-amber-700 rounded text-xs font-semibold">Tech</span>
                                    <span class="text-gray-500 text-xs">Oct 1, 2024</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Mobile-First Design</h3>
                                <p class="text-gray-600 text-sm mb-4">Tools on the go with full responsiveness...</p>
                                <span class="text-gray-400 text-xs">5 min read</span>
                            </div>
                        </article>
                    </div>
                </div>

                <!-- Back to Top -->
                <div class="text-center mt-12">
                    <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="px-8 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-full transition-colors inline-flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
                        </svg>
                        Back to Top
                    </button>
                </div>
            </div>
        `;
        
        // Blog Post 1: Mastering Text Tools - Full Article
        const blogTextToolsContent = `
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <!-- Back Button -->
                <a href="#blog-archive" class="inline-flex items-center text-purple-600 hover:text-purple-700 mb-6 font-semibold">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Back to all posts
                </a>
                
                <!-- Article Header -->
                <article class="prose prose-lg max-w-none">
                    <div class="not-prose mb-8">
                        <div class="flex items-center gap-3 mb-4 flex-wrap">
                            <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold">Tutorial</span>
                            <span class="text-gray-500 text-sm">December 8, 2024</span>
                            <span class="text-gray-400">‚Ä¢</span>
                            <span class="text-gray-500 text-sm">5 min read</span>
                        </div>
                        
                        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">
                            Mastering Text Tools: 10 Hidden Gems You're Not Using
                        </h1>
                        
                        <p class="text-xl text-gray-600 leading-relaxed mb-8">
                            Most people only scratch the surface when it comes to text manipulation tools. Today, I'm sharing the features that power users swear by‚Äîand you probably didn't know existed.
                        </p>
                        
                        <!-- Featured Image -->
                        <div class="rounded-xl overflow-hidden shadow-2xl mb-10">
                            <img src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=1200&h=600&fit=crop&q=80" 
                                 alt="Person typing on laptop with code on screen" 
                                 class="w-full h-auto">
                        </div>
                    </div>

                    <p class="lead text-lg">
                        We've all been there: copy-pasting text into different tools, manually formatting line by line, or worse‚Äîdoing repetitive edits by hand. But what if I told you that most of these tasks could be done in seconds with the right text tools?
                    </p>

                    <p>
                        After helping thousands of users optimize their workflows, I've noticed a pattern. People tend to use the same 3-4 basic tools while completely ignoring features that could save them hours each week. Let's change that.
                    </p>

                    <h2 class="text-3xl font-bold mt-12 mb-4">1. Case Conversion Beyond Basic Upper/Lower</h2>
                    
                    <p>
                        Sure, everyone knows about UPPERCASE and lowercase. But did you know about these variations?
                    </p>

                    <ul class="space-y-2">
                        <li><strong>Title Case:</strong> Perfect for blog headlines and proper formatting</li>
                        <li><strong>Sentence case:</strong> Converts text to proper sentence structure automatically</li>
                        <li><strong>camelCase:</strong> Essential for developers naming variables</li>
                        <li><strong>kebab-case:</strong> Ideal for URLs and file names</li>
                        <li><strong>snake_case:</strong> Another developer favorite for database fields</li>
                    </ul>

                    <div class="not-prose bg-blue-50 border-l-4 border-blue-500 p-6 my-8 rounded-r-lg">
                        <p class="text-blue-900 font-semibold mb-2 flex items-center">
                            <span class="text-2xl mr-2">üí°</span>
                            Pro Tip:
                        </p>
                        <p class="text-blue-800 m-0">
                            Use our Case Converter to transform a list of product names into URL-friendly slugs in one click. Game-changer for e-commerce managers!
                        </p>
                    </div>

                    <h2 class="text-3xl font-bold mt-12 mb-4">2. Smart Line Operations</h2>

                    <div class="not-prose my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=400&fit=crop&q=80" 
                             alt="Data analysis charts and graphs" 
                             class="w-full h-auto">
                    </div>

                    <p>
                        Working with lists? These features will blow your mind:
                    </p>

                    <ul class="space-y-2">
                        <li><strong>Remove Duplicate Lines:</strong> Clean up messy data exports instantly</li>
                        <li><strong>Sort Lines Alphabetically:</strong> Organize lists in seconds</li>
                        <li><strong>Number Lines:</strong> Add sequential numbering automatically</li>
                        <li><strong>Reverse Line Order:</strong> Flip your list upside down</li>
                        <li><strong>Shuffle Lines:</strong> Randomize for fair selections or testing</li>
                    </ul>

                    <p>
                        I recently helped a teacher who was manually numbering 200 student names for a roster. What took her 30 minutes now takes 5 seconds.
                    </p>

                    <h2 class="text-3xl font-bold mt-12 mb-4">3. Advanced Find and Replace</h2>

                    <p>
                        Basic find-and-replace is fine, but have you tried:
                    </p>

                    <ul class="space-y-2">
                        <li><strong>Regex (Regular Expression) mode:</strong> Match patterns, not just exact text</li>
                        <li><strong>Case-sensitive search:</strong> Distinguish between "apple" and "Apple"</li>
                        <li><strong>Whole word matching:</strong> Replace "cat" without affecting "category"</li>
                        <li><strong>Multi-line replacement:</strong> Work across paragraph breaks</li>
                    </ul>

                    <div class="not-prose bg-yellow-50 border-l-4 border-yellow-500 p-6 my-8 rounded-r-lg">
                        <p class="text-yellow-900 font-semibold mb-2 flex items-center">
                            <span class="text-2xl mr-2">‚ö†Ô∏è</span>
                            Common Mistake:
                        </p>
                        <p class="text-yellow-800 m-0">
                            Not using "whole word" mode can lead to hilarious (or disastrous) replacements. Always preview before replacing all!
                        </p>
                    </div>

                    <h2 class="text-3xl font-bold mt-12 mb-4">4. Text Statistics That Matter</h2>

                    <p>
                        Word count is just the beginning. Our text analyzer shows:
                    </p>

                    <ul class="space-y-2">
                        <li>Character count (with and without spaces)</li>
                        <li>Average word length</li>
                        <li>Reading time estimate</li>
                        <li>Most frequently used words</li>
                        <li>Readability scores</li>
                    </ul>

                    <p>
                        Writers love this for hitting exact word counts. SEO specialists use it to optimize meta descriptions to character limits. Students use it to meet essay requirements without counting manually.
                    </p>

                    <h2 class="text-3xl font-bold mt-12 mb-4">5. Whitespace Wizardry</h2>

                    <div class="not-prose my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=800&h=400&fit=crop&q=80" 
                             alt="Clean code editor interface" 
                             class="w-full h-auto">
                    </div>

                    <p>
                        Invisible characters causing problems? We've got you covered:
                    </p>

                    <ul class="space-y-2">
                        <li><strong>Remove extra spaces:</strong> Clean up formatting disasters</li>
                        <li><strong>Trim leading/trailing spaces:</strong> Fix copy-paste artifacts</li>
                        <li><strong>Add line breaks:</strong> Insert paragraph spacing automatically</li>
                        <li><strong>Remove all line breaks:</strong> Create continuous text</li>
                        <li><strong>Normalize whitespace:</strong> Consistent spacing throughout</li>
                    </ul>

                    <h2 class="text-3xl font-bold mt-12 mb-4">6. Encoding & Decoding</h2>

                    <p>
                        Need to work with different text formats?
                    </p>

                    <ul class="space-y-2">
                        <li>Base64 encoding/decoding</li>
                        <li>URL encoding/decoding</li>
                        <li>HTML entity conversion</li>
                        <li>Unicode conversion</li>
                    </ul>

                    <p>
                        Developers use these daily, but they're also useful for anyone sharing links with special characters or working with international text.
                    </p>

                    <h2 class="text-3xl font-bold mt-12 mb-4">7. Extract & Filter</h2>

                    <p>
                        Pull specific information from large blocks of text:
                    </p>

                    <ul class="space-y-2">
                        <li><strong>Extract emails:</strong> Pull all email addresses from text</li>
                        <li><strong>Extract URLs:</strong> Grab all links at once</li>
                        <li><strong>Extract numbers:</strong> Isolate numerical data</li>
                        <li><strong>Filter lines containing:</strong> Show only relevant lines</li>
                    </ul>

                    <div class="not-prose bg-green-50 border-l-4 border-green-500 p-6 my-8 rounded-r-lg">
                        <p class="text-green-900 font-semibold mb-2 flex items-center">
                            <span class="text-2xl mr-2">‚úÖ</span>
                            Real Use Case:
                        </p>
                        <p class="text-green-800 m-0">
                            A marketing manager extracted 1,500 email addresses from conference attendee lists in 10 seconds. Previously, this was a 2-hour manual task.
                        </p>
                    </div>

                    <h2 class="text-3xl font-bold mt-12 mb-4">8. Bulk Operations</h2>

                    <div class="not-prose my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=400&fit=crop&q=80" 
                             alt="Business data processing" 
                             class="w-full h-auto">
                    </div>

                    <p>
                        Process multiple items simultaneously:
                    </p>

                    <ul class="space-y-2">
                        <li>Add prefix/suffix to multiple lines</li>
                        <li>Wrap each line with characters</li>
                        <li>Split text by delimiter</li>
                        <li>Join lines with custom separator</li>
                        <li>Pad lines to equal length</li>
                    </ul>

                    <p>
                        Perfect for creating SQL queries, CSV files, or formatted lists for imports.
                    </p>

                    <h2 class="text-3xl font-bold mt-12 mb-4">Putting It All Together</h2>

                    <p>
                        The real power comes from combining these tools. Here's a real workflow one of our users shared:
                    </p>

                    <ol class="space-y-2">
                        <li>Export email list from CRM (messy formatting)</li>
                        <li>Remove duplicate lines</li>
                        <li>Extract only valid email addresses</li>
                        <li>Sort alphabetically</li>
                        <li>Convert to lowercase</li>
                        <li>Add commas between emails for mail merge</li>
                    </ol>

                    <p>
                        What used to take 45 minutes now takes less than 2 minutes.
                    </p>

                    <div class="not-prose bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-8 my-12 text-center">
                        <h3 class="text-2xl font-bold text-purple-900 mb-4">Ready to Level Up Your Text Game?</h3>
                        <p class="text-purple-800 mb-6">
                            Start exploring these tools today. No sign-up required, completely free, and always available at your fingertips.
                        </p>
                        <a href="#text" class="inline-block px-8 py-3 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700 transition-colors shadow-lg">
                            Explore Text Tools ‚Üí
                        </a>
                    </div>

                    <p class="text-gray-600 italic">
                        Have a text manipulation challenge you're struggling with? We love helping people optimize their workflows! Reach out through our feedback form.
                    </p>
                </article>

                <!-- Author Section -->
                <div class="mt-12 pt-8 border-t-2 border-gray-200">
                    <div class="flex items-start gap-4">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold flex-shrink-0">
                            ST
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">ScribbleTools Team</h3>
                            <p class="text-gray-600 leading-relaxed">
                                Building tools that make your digital life easier, one feature at a time. We're passionate about productivity, clean design, and helping people work smarter.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Related Posts -->
                <div class="mt-12 pt-8 border-t-2 border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">You Might Also Like</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <a href="#blog-archive" class="group block bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-6 border-2 border-gray-100 hover:border-purple-200">
                            <span class="inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-semibold mb-3">Finance</span>
                            <h4 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-purple-600 transition-colors">
                                Financial Planning Made Easy
                            </h4>
                            <p class="text-gray-600">
                                Learn how to use our financial calculators effectively for budgeting and planning...
                            </p>
                        </a>
                        <a href="#blog-archive" class="group block bg-white rounded-xl shadow-md hover:shadow-xl transition-all p-6 border-2 border-gray-100 hover:border-purple-200">
                            <span class="inline-block px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-semibold mb-3">Tech</span>
                            <h4 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-purple-600 transition-colors">
                                Building ScribbleTools: Our Tech Stack
                            </h4>
                            <p class="text-gray-600">
                                Behind-the-scenes look at how we built ScribbleTools for maximum performance...
                            </p>
                        </a>
                    </div>
                </div>
            </div>
        `;
        
        // Privacy Policy Content - Enhanced with Visual Designs and Statistics
        const privacyPolicyContent = `
            <div class="p-4 md:p-8 space-y-8 max-w-7xl mx-auto">
                <!-- Header Section -->
                <div class="text-center mb-12">
                    <h1 class="handwritten text-5xl md:text-6xl text-[#D9534F] mb-6">üîí Privacy Policy</h1>
                    <div class="bg-gradient-to-r from-green-50 via-blue-50 to-purple-50 p-6 md:p-8 rounded-3xl shadow-xl max-w-5xl mx-auto border-2 border-gradient-to-r from-green-200 to-purple-200 relative overflow-hidden">
                        <!-- Background Pattern -->
                        <div class="absolute inset-0 opacity-5">
                            <div class="absolute top-4 left-8 w-16 h-16 bg-green-400 rounded-full"></div>
                            <div class="absolute top-12 right-12 w-20 h-20 bg-blue-400 rounded-full"></div>
                            <div class="absolute bottom-8 left-1/3 w-12 h-12 bg-purple-400 rounded-full"></div>
                        </div>
                        <div class="relative">
                            <span class="text-2xl md:text-3xl font-bold text-[#D9534F] block mb-4">‚ú® Your Privacy is Our Priority ‚ú®</span>
                            <p class="text-lg md:text-xl text-gray-700 leading-relaxed mb-6">
                                At ScribbleTools, we believe privacy is a fundamental right. Here's our commitment to you and the 
                                <span class="font-bold text-[#D9534F]">millions of calculations</span> processed securely every month.
                            </p>
                            
                            <!-- Trust Metrics -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                                <div class="bg-white/80 rounded-2xl p-4 text-center shadow-lg">
                                    <div class="text-2xl md:text-3xl font-bold text-green-600 mb-1">0</div>
                                    <div class="text-xs md:text-sm text-gray-600">Data Collected</div>
                                </div>
                                <div class="bg-white/80 rounded-2xl p-4 text-center shadow-lg">
                                    <div class="text-2xl md:text-3xl font-bold text-blue-600 mb-1">100%</div>
                                    <div class="text-xs md:text-sm text-gray-600">Client-Side Processing</div>
                                </div>
                                <div class="bg-white/80 rounded-2xl p-4 text-center shadow-lg">
                                    <div class="text-2xl md:text-3xl font-bold text-purple-600 mb-1">150+</div>
                                    <div class="text-xs md:text-sm text-gray-600">Free Tools</div>
                                </div>
                                <div class="bg-white/80 rounded-2xl p-4 text-center shadow-lg">
                                    <div class="text-2xl md:text-3xl font-bold text-red-600 mb-1">‚àû</div>
                                    <div class="text-xs md:text-sm text-gray-600">Usage Limit</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Statistics Dashboard -->
                <div class="bg-gradient-to-br from-indigo-50 via-blue-50 to-cyan-50 rounded-3xl p-6 md:p-8 shadow-2xl border-2 border-indigo-200 mb-12">
                    <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-8 flex items-center justify-center gap-3">
                        <span class="text-3xl">üìä</span>
                        ScribbleTools by Numbers
                        <span class="text-3xl">üìà</span>
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <!-- Category Cards -->
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-blue-200">
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-3xl">üìù</span>
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold">Text Tools</span>
                            </div>
                            <div class="text-3xl font-bold text-blue-600 mb-2">25+</div>
                            <p class="text-gray-600 text-sm">Word counters, formatters, converters, and text analyzers</p>
                            <div class="mt-4 h-2 bg-blue-100 rounded-full">
                                <div class="h-full bg-blue-500 rounded-full" style="width: 85%"></div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-green-200">
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-3xl">üßÆ</span>
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-bold">Math Tools</span>
                            </div>
                            <div class="text-3xl font-bold text-green-600 mb-2">30+</div>
                            <p class="text-gray-600 text-sm">Scientific calculators, algebra solvers, and math utilities</p>
                            <div class="mt-4 h-2 bg-green-100 rounded-full">
                                <div class="h-full bg-green-500 rounded-full" style="width: 90%"></div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-yellow-200">
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-3xl">üí∞</span>
                                <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-bold">Financial</span>
                            </div>
                            <div class="text-3xl font-bold text-yellow-600 mb-2">35+</div>
                            <p class="text-gray-600 text-sm">Loan calculators, investment tools, tax calculators</p>
                            <div class="mt-4 h-2 bg-yellow-100 rounded-full">
                                <div class="h-full bg-yellow-500 rounded-full" style="width: 95%"></div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-red-200">
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-3xl">üè•</span>
                                <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-bold">Health</span>
                            </div>
                            <div class="text-3xl font-bold text-red-600 mb-2">20+</div>
                            <p class="text-gray-600 text-sm">BMI calculators, fitness trackers, health metrics</p>
                            <div class="mt-4 h-2 bg-red-100 rounded-full">
                                <div class="h-full bg-red-500 rounded-full" style="width: 70%"></div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-purple-200">
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-3xl">üñºÔ∏è</span>
                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-bold">Image</span>
                            </div>
                            <div class="text-3xl font-bold text-purple-600 mb-2">15+</div>
                            <p class="text-gray-600 text-sm">Image editors, resizers, converters, and processors</p>
                            <div class="mt-4 h-2 bg-purple-100 rounded-full">
                                <div class="h-full bg-purple-500 rounded-full" style="width: 60%"></div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-indigo-200">
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-3xl">üéì</span>
                                <span class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-bold">Student</span>
                            </div>
                            <div class="text-3xl font-bold text-indigo-600 mb-2">25+</div>
                            <p class="text-gray-600 text-sm">GPA calculators, study tools, academic planners</p>
                            <div class="mt-4 h-2 bg-indigo-100 rounded-full">
                                <div class="h-full bg-indigo-500 rounded-full" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Usage Statistics -->
                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">üåç Global Impact</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                            <div class="space-y-2">
                                <div class="text-2xl md:text-3xl font-bold text-blue-600">2M+</div>
                                <div class="text-sm text-gray-600">Monthly Calculations</div>
                            </div>
                            <div class="space-y-2">
                                <div class="text-2xl md:text-3xl font-bold text-green-600">500K+</div>
                                <div class="text-sm text-gray-600">Active Users</div>
                            </div>
                            <div class="space-y-2">
                                <div class="text-2xl md:text-3xl font-bold text-purple-600">190+</div>
                                <div class="text-sm text-gray-600">Countries Served</div>
                            </div>
                            <div class="space-y-2">
                                <div class="text-2xl md:text-3xl font-bold text-red-600">24/7</div>
                                <div class="text-sm text-gray-600">Availability</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Privacy Policy Content -->
                <div class="max-w-6xl mx-auto space-y-8">
                    <div class="bg-gradient-to-br from-white via-red-50 to-red-100 p-6 md:p-8 rounded-3xl shadow-2xl border-l-8 border-red-500 hover:shadow-3xl transition-all duration-300 relative overflow-hidden">
                        <!-- Background Pattern -->
                        <div class="absolute top-0 right-0 w-32 h-32 bg-red-200/30 rounded-full -translate-y-16 translate-x-16"></div>
                        <div class="absolute bottom-0 left-0 w-24 h-24 bg-red-300/20 rounded-full translate-y-12 -translate-x-12"></div>
                        
                        <div class="relative">
                            <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                                <span class="text-4xl">üö´</span> What We DON'T Do
                                <span class="text-sm bg-red-100 text-red-800 px-4 py-2 rounded-full font-bold">Zero Collection</span>
                            </h3>
                            <div class="grid md:grid-cols-2 lg:grid-cols-2 gap-6">
                                <div class="flex items-start gap-4 bg-white p-5 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-red-100">
                                    <span class="text-red-500 font-bold text-3xl">‚úó</span>
                                    <div>
                                        <h4 class="font-bold text-gray-800 text-lg mb-2">üö´ No Data Collection</h4>
                                        <p class="text-gray-600">We don't collect, store, or process your personal information. Your data stays on your device.</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-4 bg-white p-5 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-red-100">
                                    <span class="text-red-500 font-bold text-3xl">‚úó</span>
                                    <div>
                                        <h4 class="font-bold text-gray-800 text-lg mb-2">üëÅÔ∏è No Tracking</h4>
                                        <p class="text-gray-600">No cookies, pixels, or analytics tracking your behavior across the web.</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-4 bg-white p-5 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-red-100">
                                    <span class="text-red-500 font-bold text-3xl">‚úó</span>
                                    <div>
                                        <h4 class="font-bold text-gray-800 text-lg mb-2">üë§ No Accounts Required</h4>
                                        <p class="text-gray-600">Use all 150+ tools anonymously without registration or sign-up.</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-4 bg-white p-5 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-red-100">
                                    <span class="text-red-500 font-bold text-3xl">‚úó</span>
                                    <div>
                                        <h4 class="font-bold text-gray-800 text-lg mb-2">üîÑ No Data Sharing</h4>
                                        <p class="text-gray-600">We have nothing to share with third parties because we collect nothing.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-white via-green-50 to-green-100 p-6 md:p-8 rounded-3xl shadow-2xl border-l-8 border-green-500 hover:shadow-3xl transition-all duration-300 relative overflow-hidden">
                        <!-- Background Pattern -->
                        <div class="absolute top-0 right-0 w-40 h-40 bg-green-200/20 rounded-full -translate-y-20 translate-x-20"></div>
                        <div class="absolute bottom-0 left-0 w-32 h-32 bg-green-300/15 rounded-full translate-y-16 -translate-x-16"></div>
                        
                        <div class="relative">
                            <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                                <span class="text-4xl">‚úÖ</span> How Our Tools Work
                                <span class="text-sm bg-green-100 text-green-800 px-4 py-2 rounded-full font-bold">100% Safe</span>
                            </h3>
                            <div class="space-y-6">
                                <div class="flex items-start gap-6 bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-green-100">
                                    <span class="text-green-500 font-bold text-4xl">‚úì</span>
                                    <div class="flex-1">
                                        <h4 class="font-bold text-gray-800 text-xl mb-3">üíª Client-Side Processing</h4>
                                        <p class="text-gray-600 leading-relaxed">All calculations and processing happen directly in your browser. Nothing leaves your device. Your sensitive financial data, personal information, or uploaded files never reach our servers.</p>
                                        <div class="mt-4 bg-green-50 p-4 rounded-xl">
                                            <div class="flex items-center gap-2 text-green-700 font-semibold mb-2">
                                                <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                                                Your Device Processing
                                            </div>
                                            <div class="text-sm text-green-600">Calculations ‚Ä¢ Storage ‚Ä¢ Privacy</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-6 bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-green-100">
                                    <span class="text-green-500 font-bold text-4xl">‚úì</span>
                                    <div class="flex-1">
                                        <h4 class="font-bold text-gray-800 text-xl mb-3">üåê No Server Communication</h4>
                                        <p class="text-gray-600 leading-relaxed">Tools work completely offline after the initial page load. No data is transmitted to our servers during usage. You can even disconnect from the internet and continue using most tools.</p>
                                        <div class="mt-4 bg-blue-50 p-4 rounded-xl">
                                            <div class="flex items-center gap-2 text-blue-700 font-semibold mb-2">
                                                <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
                                                Offline Capable
                                            </div>
                                            <div class="text-sm text-blue-600">Works without internet ‚Ä¢ No data transmission</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-start gap-6 bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-green-100">
                                    <span class="text-green-500 font-bold text-4xl">‚úì</span>
                                    <div class="flex-1">
                                        <h4 class="font-bold text-gray-800 text-xl mb-3">üíæ Local Storage Only</h4>
                                        <p class="text-gray-600 leading-relaxed">Any preferences or temporary data are saved locally in your browser using HTML5 localStorage. This data never leaves your device and is only accessible by you on your browser.</p>
                                        <div class="mt-4 bg-purple-50 p-4 rounded-xl">
                                            <div class="flex items-center gap-2 text-purple-700 font-semibold mb-2">
                                                <span class="w-3 h-3 bg-purple-500 rounded-full"></span>
                                                Browser Storage Only
                                            </div>
                                            <div class="text-sm text-purple-600">Settings ‚Ä¢ History ‚Ä¢ Preferences</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-white via-purple-50 to-purple-100 p-6 md:p-8 rounded-3xl shadow-2xl border-l-8 border-purple-500 hover:shadow-3xl transition-all duration-300 relative overflow-hidden">
                        <!-- Background Pattern -->
                        <div class="absolute top-0 right-0 w-36 h-36 bg-purple-200/25 rounded-full -translate-y-18 translate-x-18"></div>
                        
                        <div class="relative">
                            <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                                <span class="text-4xl">üõ°Ô∏è</span> Technical Security
                                <span class="text-sm bg-purple-100 text-purple-800 px-4 py-2 rounded-full font-bold">Enterprise Grade</span>
                            </h3>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-purple-100">
                                    <div class="flex items-center gap-3 mb-4">
                                        <span class="text-2xl">üîê</span>
                                        <h4 class="font-bold text-gray-800 text-lg">HTTPS Encryption</h4>
                                    </div>
                                    <p class="text-gray-600 leading-relaxed">All traffic is encrypted with TLS 1.3, the latest security standard. Your connection to ScribbleTools is always secure.</p>
                                    <div class="mt-4 flex items-center gap-2">
                                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                        <span class="text-sm text-green-600 font-semibold">256-bit Encryption</span>
                                    </div>
                                </div>
                                <div class="bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-purple-100">
                                    <div class="flex items-center gap-3 mb-4">
                                        <span class="text-2xl">üìú</span>
                                        <h4 class="font-bold text-gray-800 text-lg">No External Scripts</h4>
                                    </div>
                                    <p class="text-gray-600 leading-relaxed">We only load essential libraries for tool functionality. No Google Analytics, Facebook Pixel, or any tracking scripts.</p>
                                    <div class="mt-4 flex items-center gap-2">
                                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                        <span class="text-sm text-blue-600 font-semibold">Zero Trackers</span>
                                    </div>
                                </div>
                                <div class="bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-purple-100">
                                    <div class="flex items-center gap-3 mb-4">
                                        <span class="text-2xl">üîì</span>
                                        <h4 class="font-bold text-gray-800 text-lg">Open Source Mindset</h4>
                                    </div>
                                    <p class="text-gray-600 leading-relaxed">Our code follows open source principles. All algorithms are transparent and can be inspected for security and accuracy.</p>
                                    <div class="mt-4 flex items-center gap-2">
                                        <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                        <span class="text-sm text-orange-600 font-semibold">Transparent Code</span>
                                    </div>
                                </div>
                                <div class="bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-purple-100">
                                    <div class="flex items-center gap-3 mb-4">
                                        <span class="text-2xl">üá™üá∫</span>
                                        <h4 class="font-bold text-gray-800 text-lg">GDPR Compliant</h4>
                                    </div>
                                    <p class="text-gray-600 leading-relaxed">Since we collect zero personal data, we're automatically compliant with GDPR, CCPA, and other privacy regulations worldwide.</p>
                                    <div class="mt-4 flex items-center gap-2">
                                        <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
                                        <span class="text-sm text-purple-600 font-semibold">Global Compliance</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Our Promise Section -->
                    <div class="bg-gradient-to-r from-[#D9534F] via-[#FF6B6B] to-[#FF8A80] p-8 md:p-12 rounded-3xl shadow-2xl text-white text-center relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse"></div>
                        <div class="absolute top-0 left-0 w-24 h-24 bg-white/10 rounded-full -translate-x-12 -translate-y-12"></div>
                        <div class="absolute bottom-0 right-0 w-32 h-32 bg-white/5 rounded-full translate-x-16 translate-y-16"></div>
                        
                        <div class="relative">
                            <h3 class="text-3xl md:text-4xl font-bold mb-6 flex items-center justify-center gap-4">
                                <span class="text-4xl">üíù</span> Our Promise <span class="text-4xl">üíù</span>
                            </h3>
                            <div class="max-w-4xl mx-auto">
                                <p class="text-lg md:text-xl leading-relaxed mb-8">
                                    ScribbleTools will <strong>always prioritize your privacy over profits</strong>. We built these tools to be useful, not to collect data. 
                                    Your trust is more valuable than any data we could gather.
                                </p>
                                
                                <div class="grid md:grid-cols-3 gap-6 mb-8">
                                    <div class="bg-white/20 rounded-2xl p-6 backdrop-blur-sm">
                                        <div class="text-3xl mb-3">üîí</div>
                                        <h4 class="font-bold mb-2">Privacy First</h4>
                                        <p class="text-sm opacity-90">Your data stays on your device, always</p>
                                    </div>
                                    <div class="bg-white/20 rounded-2xl p-6 backdrop-blur-sm">
                                        <div class="text-3xl mb-3">üÜì</div>
                                        <h4 class="font-bold mb-2">Forever Free</h4>
                                        <p class="text-sm opacity-90">No hidden costs, premium tiers, or paywalls</p>
                                    </div>
                                    <div class="bg-white/20 rounded-2xl p-6 backdrop-blur-sm">
                                        <div class="text-3xl mb-3">üöÄ</div>
                                        <h4 class="font-bold mb-2">Always Improving</h4>
                                        <p class="text-sm opacity-90">New tools and features added regularly</p>
                                    </div>
                                </div>
                                
                                <div class="bg-white/20 rounded-2xl p-6 backdrop-blur-sm">
                                    <p class="text-lg font-semibold mb-2">
                                        üí¨ Questions about privacy? Contact us anytime.
                                    </p>
                                    <p class="text-sm opacity-90">
                                        We're happy to explain our approach and commitment to your privacy.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Footer Information -->
                    <div class="text-center p-6 bg-gradient-to-r from-gray-50 via-blue-50 to-purple-50 rounded-3xl border-2 border-gray-200 shadow-lg">
                        <div class="flex flex-col md:flex-row items-center justify-center gap-6 text-gray-600">
                            <div class="flex items-center gap-2">
                                <span class="text-lg">üìÖ</span>
                                <div class="text-left">
                                    <div class="font-bold text-gray-800">Last Updated</div>
                                    <div class="text-sm">October 2025</div>
                                </div>
                            </div>
                            <div class="hidden md:block w-px h-12 bg-gray-300"></div>
                            <div class="flex items-center gap-2">
                                <span class="text-lg">üìã</span>
                                <div class="text-left">
                                    <div class="font-bold text-gray-800">Policy Version</div>
                                    <div class="text-sm">1.0 - Simple and Permanent</div>
                                </div>
                            </div>
                            <div class="hidden md:block w-px h-12 bg-gray-300"></div>
                            <div class="flex items-center gap-2">
                                <span class="text-lg">üåç</span>
                                <div class="text-left">
                                    <div class="font-bold text-gray-800">Global Compliance</div>
                                    <div class="text-sm">GDPR, CCPA, PIPEDA Ready</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        // Individual Blog Post Contents
        const blogWelcomeContent = `
            <div class="p-8 max-w-4xl mx-auto">
                <div class="mb-8">
                    <button onclick="window.location.hash = '#blogs'" class="text-[#D9534F] hover:underline mb-4 flex items-center gap-2">
                        ‚Üê Back to Blog
                    </button>
                    <div class="flex items-center gap-4 mb-4">
                        <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-semibold">Featured</span>
                        <span class="text-gray-500">December 10, 2024</span>
                        <span class="text-gray-400">‚Ä¢</span>
                        <span class="text-gray-500">8 min read</span>
                    </div>
                    <h1 class="handwritten text-4xl text-gray-800 mb-6">üöÄ Welcome to ScribbleTools: Your New Favorite Productivity Hub</h1>
                </div>
                
                <!-- Blog Subscription CTA -->
                <div class="mb-8 bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border border-blue-200">
                    <div class="flex items-center justify-between">
                        <div class="flex-1 mr-4">
                            <h3 class="font-bold text-gray-800 mb-2 flex items-center">
                                <span class="mr-2 text-xl">üì¨</span>
                                Never miss our latest posts!
                            </h3>
                            <p class="text-sm text-gray-600">Get exclusive productivity tips and tool updates straight to your inbox.</p>
                        </div>
                        <button onclick="document.getElementById('subscription-modal').classList.remove('hidden'); document.getElementById('subscription-modal-content').classList.add('scale-100', 'opacity-100');" 
                                class="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-bold shadow-lg whitespace-nowrap">
                            üöÄ Subscribe Free
                        </button>
                    </div>
                </div>
                
                <div class="prose prose-lg max-w-none">
                    <p class="text-lg text-gray-700 leading-relaxed">Coming soon...</p>
                </div>
                
                <!-- End of Post Subscription CTA -->
                <div class="mt-12 p-8 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 rounded-2xl border-2 border-indigo-200 text-center">
                    <div class="text-4xl mb-4">üíå</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Loved this post? Get more like it!</h3>
                    <p class="text-gray-600 mb-6">Join 10,000+ users who never miss our latest productivity tips, tool updates, and exclusive tutorials.</p>
                    <button onclick="document.getElementById('subscription-modal').classList.remove('hidden'); document.getElementById('subscription-modal-content').classList.add('scale-100', 'opacity-100');" 
                            class="px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 font-bold shadow-lg hover:shadow-xl transform hover:scale-105 text-lg">
                        <span class="mr-2">üéØ</span>
                        Subscribe Now - It's Free!
                    </button>
                    <p class="text-xs text-gray-500 mt-4">‚úÖ No spam ever ‚Ä¢ ‚úÖ Unsubscribe with 1 click ‚Ä¢ ‚úÖ 100% free forever</p>
                </div>
            </div>
        `;

        const blogFinancialPlanningContent = `
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <!-- Back Button -->
                <button onclick="window.location.hash='#blog-archive'" class="mb-8 inline-flex items-center gap-2 text-purple-600 hover:text-purple-700 font-medium transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                    </svg>
                    Back to Blog Archive
                </button>

                <!-- Article Header -->
                <header class="mb-12">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-semibold">Finance</span>
                        <span class="text-gray-500">Oct 10, 2025</span>
                        <span class="text-gray-400">‚Ä¢</span>
                        <span class="text-gray-500">8 min read</span>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">
                        üí∞ Master Your Finances with Our Calculator Suite
                    </h1>
                    <p class="text-xl text-gray-600 leading-relaxed">
                        Discover how to use our advanced financial calculators to plan your retirement, calculate loan payments, and optimize your investments for a secure financial future.
                    </p>
                </header>

                <!-- Featured Image -->
                <div class="mb-12 rounded-2xl overflow-hidden shadow-2xl">
                    <img src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=1200&h=600&fit=crop" 
                         alt="Financial planning and calculator" 
                         class="w-full h-auto object-cover">
                </div>

                <!-- Article Content -->
                <article class="prose prose-lg max-w-none">
                    <p class="text-lg text-gray-700 leading-relaxed">
                        Financial planning doesn't have to be complicated. With the right tools and knowledge, anyone can take control of their financial future. Our comprehensive suite of financial calculators makes it easy to understand complex financial concepts and make informed decisions about your money.
                    </p>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üè¶ Understanding Loan Calculators</h2>
                    
                    <p>
                        Whether you're buying a home, a car, or taking out a personal loan, understanding your monthly payments is crucial. Our loan calculators help you:
                    </p>

                    <ul class="space-y-2 my-6">
                        <li><strong>Calculate monthly payments</strong> based on loan amount, interest rate, and term</li>
                        <li><strong>Compare different loan scenarios</strong> to find the best option</li>
                        <li><strong>See total interest paid</strong> over the life of the loan</li>
                        <li><strong>Create amortization schedules</strong> to track principal vs. interest</li>
                    </ul>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 my-8 rounded-r-lg">
                        <p class="text-blue-900 font-semibold mb-2">üí° Pro Tip: Extra Payments Matter</p>
                        <p class="text-blue-800 mb-0">Making just one extra mortgage payment per year can reduce a 30-year loan by 4-5 years and save tens of thousands in interest!</p>
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üè† Mortgage Planning Made Simple</h2>

                    <div class="my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=400&fit=crop" 
                             alt="House and mortgage planning" 
                             class="w-full h-auto">
                    </div>

                    <p>
                        Buying a home is one of the biggest financial decisions you'll make. Our mortgage calculators help you understand what you can afford and plan for the long term:
                    </p>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">House Affordability Calculator</h3>
                    <p>
                        Input your income, debts, and down payment to discover your ideal home price range. The calculator considers:
                    </p>
                    <ul class="my-4">
                        <li>Debt-to-income ratio (DTI)</li>
                        <li>Property taxes and insurance</li>
                        <li>HOA fees and maintenance costs</li>
                        <li>PMI requirements if down payment is less than 20%</li>
                    </ul>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Mortgage Amortization</h3>
                    <p>
                        See exactly how your mortgage payment is split between principal and interest over time. Early payments are mostly interest, but as you progress, more goes toward the principal. Understanding this helps you make smart decisions about refinancing or extra payments.
                    </p>

                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 my-8 rounded-r-lg">
                        <p class="text-yellow-900 font-semibold mb-2">‚ö†Ô∏è Common Mistake to Avoid</p>
                        <p class="text-yellow-800 mb-0">Don't forget to include property taxes, insurance, and HOA fees when calculating affordability. These can add 30-50% to your base mortgage payment!</p>
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üìà Investment & Retirement Planning</h2>

                    <div class="my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?w=800&h=400&fit=crop" 
                             alt="Investment growth chart" 
                             class="w-full h-auto">
                    </div>

                    <p>
                        Building wealth for the future requires understanding compound interest and consistent investing. Our retirement calculators show you:
                    </p>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">401(k) Calculator</h3>
                    <p>
                        Plan your retirement savings with our comprehensive 401(k) calculator. It factors in:
                    </p>
                    <ul class="my-4">
                        <li><strong>Current balance:</strong> What you've saved so far</li>
                        <li><strong>Contribution rate:</strong> How much you're adding each paycheck</li>
                        <li><strong>Employer match:</strong> Free money you shouldn't leave on the table!</li>
                        <li><strong>Expected returns:</strong> Realistic growth projections</li>
                        <li><strong>Inflation:</strong> How purchasing power changes over time</li>
                    </ul>

                    <div class="bg-green-50 border-l-4 border-green-500 p-6 my-8 rounded-r-lg">
                        <p class="text-green-900 font-semibold mb-2">üéØ Real-World Example</p>
                        <p class="text-green-800 mb-2">Contributing $500/month from age 25 to 65 with 7% annual returns = $1.2 million at retirement. Starting at age 35 instead? Only $600k. Those 10 years double your retirement savings!</p>
                    </div>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Compound Interest Calculator</h3>
                    <p>
                        See the magic of compound interest in action. Small, consistent investments can grow into substantial wealth over time. Our calculator shows you how different contribution schedules, interest rates, and time horizons affect your final balance.
                    </p>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üí≥ Tax Planning Tools</h2>

                    <p>
                        Understanding your tax obligations is crucial for financial planning. Our tax calculators help you:
                    </p>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Income Tax Calculator</h3>
                    <ul class="my-4">
                        <li>Estimate federal and state income taxes</li>
                        <li>Compare different filing statuses</li>
                        <li>See the impact of deductions and credits</li>
                        <li>Plan for quarterly estimated tax payments</li>
                    </ul>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Estate Tax Calculator</h3>
                    <p>
                        Plan your legacy and understand potential estate tax obligations. While most estates won't owe federal estate tax (2024 exemption: $13.61 million per person), state estate taxes may apply at much lower thresholds.
                    </p>

                    <div class="my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1554224154-26032ffc0d07?w=800&h=400&fit=crop" 
                             alt="Tax planning and documents" 
                             class="w-full h-auto">
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üéì Getting Started: Your Financial Planning Journey</h2>

                    <p>
                        Ready to take control of your finances? Here's a step-by-step approach:
                    </p>

                    <ol class="space-y-4 my-6">
                        <li><strong>Start with debt:</strong> Use our loan calculators to understand current obligations and create a payoff plan</li>
                        <li><strong>Build emergency savings:</strong> Calculate 3-6 months of expenses using our savings calculator</li>
                        <li><strong>Plan for major purchases:</strong> Use mortgage and auto loan calculators before big decisions</li>
                        <li><strong>Invest for the future:</strong> Maximize retirement contributions using our 401(k) and IRA calculators</li>
                        <li><strong>Optimize taxes:</strong> Understand tax implications of your financial decisions</li>
                        <li><strong>Review regularly:</strong> Update your calculations quarterly as circumstances change</li>
                    </ol>

                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 my-8 rounded-r-lg">
                        <p class="text-purple-900 font-semibold mb-2">üöÄ Take Action Today</p>
                        <p class="text-purple-800 mb-0">The best time to start financial planning was yesterday. The second best time is today. Spend 30 minutes with our calculators right now to see where you stand!</p>
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">ÔøΩ Common Financial Planning Mistakes</h2>

                    <p>Avoid these pitfalls that derail many people's financial plans:</p>

                    <ul class="space-y-3 my-6">
                        <li><strong>Not accounting for inflation:</strong> Your money loses purchasing power over time</li>
                        <li><strong>Ignoring employer 401(k) match:</strong> This is free money - always contribute enough to get the full match</li>
                        <li><strong>Underestimating retirement needs:</strong> You'll likely need 70-80% of pre-retirement income</li>
                        <li><strong>Forgetting about taxes:</strong> Traditional retirement accounts are taxed on withdrawal</li>
                        <li><strong>Not diversifying investments:</strong> Don't put all eggs in one basket</li>
                        <li><strong>Emotional decision making:</strong> Stick to your plan during market volatility</li>
                    </ul>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üéØ Conclusion</h2>

                    <p>
                        Financial planning is a journey, not a destination. Our calculator suite gives you the tools to make informed decisions at every stage of your financial life. Whether you're just starting out, planning for a major purchase, or preparing for retirement, understanding the numbers behind your decisions is the first step toward financial success.
                    </p>

                    <p class="text-lg font-semibold text-gray-900 mt-8">
                        Ready to take control of your financial future? Explore our full suite of financial calculators and start planning today!
                    </p>
                </article>

                <!-- Author Bio -->
                <div class="mt-12 pt-8 border-t-2 border-gray-200">
                    <div class="flex items-start gap-4">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-2xl text-white font-bold">
                            ST
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-gray-900">ScribbleTools Team</h3>
                            <p class="text-gray-600 mt-1">Helping users make better financial decisions through powerful, easy-to-use calculators and comprehensive guides.</p>
                        </div>
                    </div>
                </div>

                <!-- Related Posts -->
                <div class="mt-12 pt-8 border-t-2 border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">Related Posts</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <a href="#blog-text-tools" class="group">
                            <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow">
                                <h4 class="font-bold text-lg text-gray-900 mb-2 group-hover:text-blue-600">üìù Mastering Text Tools</h4>
                                <p class="text-gray-600 text-sm">Discover powerful text manipulation features...</p>
                            </div>
                        </a>
                        <a href="#blog-tech-stack" class="group">
                            <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow">
                                <h4 class="font-bold text-lg text-gray-900 mb-2 group-hover:text-purple-600">üõ†Ô∏è Building ScribbleTools</h4>
                                <p class="text-gray-600 text-sm">Behind-the-scenes look at our tech stack...</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        `;

        const blogTechStackContent = `
            <div class="p-8 max-w-4xl mx-auto">
                <div class="mb-8">
                    <button onclick="window.location.hash = '#blogs'" class="text-[#D9534F] hover:underline mb-4 flex items-center gap-2">
                        ‚Üê Back to Blog
                    </button>
                    <div class="flex items-center gap-4 mb-4">
                        <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-semibold">Dev Blog</span>
                        <span class="text-gray-500">December 1, 2024</span>
                        <span class="text-gray-400">‚Ä¢</span>
                        <span class="text-gray-500">10 min read</span>
                    </div>
                    <h1 class="handwritten text-4xl text-gray-800 mb-6">üõ†Ô∏è Building ScribbleTools: Tech Stack</h1>
                </div>
                <div class="prose prose-lg max-w-none">
                    <p class="text-lg text-gray-700 leading-relaxed">Coming soon...</p>
                </div>
            </div>
        `;

        const blogHealthCalculatorContent = `
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <!-- Back Button -->
                <button onclick="window.location.hash='#blog-archive'" class="mb-8 inline-flex items-center gap-2 text-purple-600 hover:text-purple-700 font-medium transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                    </svg>
                    Back to Blog Archive
                </button>

                <!-- Article Header -->
                <header class="mb-12">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-semibold">Health</span>
                        <span class="text-gray-500">Oct 5, 2025</span>
                        <span class="text-gray-400">‚Ä¢</span>
                        <span class="text-gray-500">9 min read</span>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">
                        üè• Health Calculator Guide: Understanding BMI, BMR & More
                    </h1>
                    <p class="text-xl text-gray-600 leading-relaxed">
                        Your complete guide to understanding body metrics. Learn how to use our health calculators to track fitness, optimize nutrition, and achieve your wellness goals.
                    </p>
                </header>

                <!-- Featured Image -->
                <div class="mb-12 rounded-2xl overflow-hidden shadow-2xl">
                    <img src="https://images.unsplash.com/photo-1476480862126-209bfaa8edc8?w=1200&h=600&fit=crop" 
                         alt="Health and fitness tracking" 
                         class="w-full h-auto object-cover">
                </div>

                <!-- Article Content -->
                <article class="prose prose-lg max-w-none">
                    <p class="text-lg text-gray-700 leading-relaxed">
                        Understanding your body's metrics is the first step toward better health. Whether you're trying to lose weight, build muscle, or simply maintain a healthy lifestyle, our health calculators provide the insights you need to make informed decisions about your wellness journey.
                    </p>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">‚öñÔ∏è BMI Calculator: Body Mass Index Explained</h2>
                    
                    <p>
                        Body Mass Index (BMI) is one of the most widely used health metrics. It's a simple calculation based on your height and weight that helps determine if you're at a healthy weight for your height.
                    </p>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">How BMI Works</h3>
                    <p>
                        BMI is calculated using the formula: <strong>weight (kg) / height (m)¬≤</strong>. Our calculator does this instantly:
                    </p>

                    <ul class="space-y-2 my-6">
                        <li><strong>Underweight:</strong> BMI less than 18.5</li>
                        <li><strong>Normal weight:</strong> BMI 18.5-24.9</li>
                        <li><strong>Overweight:</strong> BMI 25-29.9</li>
                        <li><strong>Obese:</strong> BMI 30 or greater</li>
                    </ul>

                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 my-8 rounded-r-lg">
                        <p class="text-yellow-900 font-semibold mb-2">‚ö†Ô∏è Important Limitation</p>
                        <p class="text-yellow-800 mb-0">BMI doesn't distinguish between muscle and fat. Athletes and bodybuilders may have high BMI scores but low body fat. Always consider BMI alongside other health metrics.</p>
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üî• BMR Calculator: Basal Metabolic Rate</h2>

                    <div class="my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&h=400&fit=crop" 
                             alt="Metabolism and energy" 
                             class="w-full h-auto">
                    </div>

                    <p>
                        Your Basal Metabolic Rate (BMR) is the number of calories your body burns at rest just to maintain vital functions like breathing, circulation, and cell production. Think of it as your body's "baseline" calorie burn.
                    </p>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Why BMR Matters</h3>
                    <ul class="my-4">
                        <li><strong>Weight loss:</strong> Eat below your total daily energy expenditure (TDEE)</li>
                        <li><strong>Weight gain:</strong> Eat above your TDEE</li>
                        <li><strong>Maintenance:</strong> Eat at your TDEE level</li>
                        <li><strong>Nutrition planning:</strong> Understand your minimum calorie needs</li>
                    </ul>

                    <p>
                        Our BMR calculator uses the Mifflin-St Jeor equation, the most accurate formula available:
                    </p>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-6 my-8 rounded-r-lg">
                        <p class="text-blue-900 font-semibold mb-2">üí° Pro Tip: Activity Multiplier</p>
                        <p class="text-blue-800 mb-0">Multiply your BMR by your activity level: Sedentary (1.2), Light Activity (1.375), Moderate (1.55), Very Active (1.725), Extra Active (1.9) to get your Total Daily Energy Expenditure (TDEE).</p>
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üçé Calorie Calculator: Daily Needs</h2>

                    <p>
                        Knowing how many calories you need each day is fundamental to achieving any fitness goal. Our calorie calculator considers:
                    </p>

                    <ul class="space-y-3 my-6">
                        <li><strong>Age:</strong> Metabolism slows with age</li>
                        <li><strong>Gender:</strong> Men typically have higher calorie needs</li>
                        <li><strong>Height & Weight:</strong> Larger bodies need more energy</li>
                        <li><strong>Activity Level:</strong> Exercise burns additional calories</li>
                        <li><strong>Goals:</strong> Weight loss, gain, or maintenance</li>
                    </ul>

                    <div class="my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=800&h=400&fit=crop" 
                             alt="Healthy food and nutrition" 
                             class="w-full h-auto">
                    </div>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Calorie Deficit for Weight Loss</h3>
                    <p>
                        To lose weight safely and sustainably, create a moderate calorie deficit:
                    </p>
                    <ul class="my-4">
                        <li><strong>Mild deficit (250-500 cal/day):</strong> 0.5-1 lb/week weight loss</li>
                        <li><strong>Moderate deficit (500-750 cal/day):</strong> 1-1.5 lbs/week</li>
                        <li><strong>Aggressive deficit (750-1000 cal/day):</strong> 1.5-2 lbs/week (maximum recommended)</li>
                    </ul>

                    <div class="bg-red-50 border-l-4 border-red-500 p-6 my-8 rounded-r-lg">
                        <p class="text-red-900 font-semibold mb-2">‚ö†Ô∏è Never Go Too Low</p>
                        <p class="text-red-800 mb-0">Women should consume at least 1,200 calories/day, men at least 1,500. Going lower can slow metabolism, cause muscle loss, and lead to nutritional deficiencies.</p>
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üí™ Body Fat Calculator</h2>

                    <p>
                        Body fat percentage is often more important than weight or BMI. Two people with the same weight can look completely different based on body composition.
                    </p>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Healthy Body Fat Ranges</h3>
                    
                    <p><strong>For Men:</strong></p>
                    <ul class="my-4">
                        <li>Essential fat: 2-5%</li>
                        <li>Athletes: 6-13%</li>
                        <li>Fitness: 14-17%</li>
                        <li>Average: 18-24%</li>
                        <li>Obese: 25% and higher</li>
                    </ul>

                    <p><strong>For Women:</strong></p>
                    <ul class="my-4">
                        <li>Essential fat: 10-13%</li>
                        <li>Athletes: 14-20%</li>
                        <li>Fitness: 21-24%</li>
                        <li>Average: 25-31%</li>
                        <li>Obese: 32% and higher</li>
                    </ul>

                    <div class="bg-green-50 border-l-4 border-green-500 p-6 my-8 rounded-r-lg">
                        <p class="text-green-900 font-semibold mb-2">üéØ Measurement Methods</p>
                        <p class="text-green-800 mb-0">Our calculator uses the U.S. Navy method (waist, neck, height measurements) which is reasonably accurate and doesn't require special equipment.</p>
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üèÉ Calories Burned Calculator</h2>

                    <div class="my-8 rounded-xl overflow-hidden shadow-lg">
                        <img src="https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=800&h=400&fit=crop" 
                             alt="Exercise and fitness" 
                             class="w-full h-auto">
                    </div>

                    <p>
                        Different activities burn different amounts of calories. Our calculator helps you understand how much energy you're expending during various exercises:
                    </p>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Calorie Burn Examples (for 155 lb person, 30 minutes)</h3>
                    <ul class="space-y-2 my-6">
                        <li><strong>Walking (3.5 mph):</strong> 140 calories</li>
                        <li><strong>Running (6 mph):</strong> 372 calories</li>
                        <li><strong>Cycling (moderate):</strong> 260 calories</li>
                        <li><strong>Swimming (moderate):</strong> 223 calories</li>
                        <li><strong>Weight training:</strong> 112 calories</li>
                        <li><strong>Yoga:</strong> 149 calories</li>
                        <li><strong>High-intensity interval training (HIIT):</strong> 400+ calories</li>
                    </ul>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üíß Hydration & Macros</h2>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Water Intake Calculator</h3>
                    <p>
                        Proper hydration is crucial for health and performance. General recommendations:
                    </p>
                    <ul class="my-4">
                        <li><strong>Basic formula:</strong> Body weight (lbs) √ó 0.5 = ounces of water per day</li>
                        <li><strong>Active individuals:</strong> Add 12 oz for every 30 minutes of exercise</li>
                        <li><strong>Hot weather:</strong> Increase by 20-30%</li>
                    </ul>

                    <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Macro Calculator</h3>
                    <p>
                        Balance your macronutrients (protein, carbs, fats) based on your goals:
                    </p>
                    <ul class="space-y-3 my-6">
                        <li><strong>Weight loss:</strong> High protein (40%), moderate carbs (30%), moderate fat (30%)</li>
                        <li><strong>Muscle gain:</strong> High protein (30%), high carbs (40%), moderate fat (30%)</li>
                        <li><strong>Balanced diet:</strong> Protein (30%), carbs (40%), fat (30%)</li>
                        <li><strong>Ketogenic:</strong> High fat (70%), moderate protein (25%), very low carbs (5%)</li>
                    </ul>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üìä Putting It All Together</h2>

                    <p>
                        Using multiple health calculators together gives you a complete picture of your health:
                    </p>

                    <ol class="space-y-4 my-6">
                        <li><strong>Start with BMI and body fat:</strong> Understand your current body composition</li>
                        <li><strong>Calculate your BMR:</strong> Know your baseline calorie needs</li>
                        <li><strong>Determine daily calories:</strong> Factor in activity level and goals</li>
                        <li><strong>Plan your macros:</strong> Optimize protein, carbs, and fats</li>
                        <li><strong>Track calories burned:</strong> Monitor exercise intensity</li>
                        <li><strong>Stay hydrated:</strong> Calculate water needs</li>
                        <li><strong>Reassess monthly:</strong> Update calculations as you progress</li>
                    </ol>

                    <div class="bg-purple-50 border-l-4 border-purple-500 p-6 my-8 rounded-r-lg">
                        <p class="text-purple-900 font-semibold mb-2">üéØ Remember: Tools, Not Rules</p>
                        <p class="text-purple-800 mb-0">These calculators provide estimates and guidelines. Listen to your body, consult healthcare professionals for personalized advice, and adjust based on your results. Health is a journey, not a destination!</p>
                    </div>

                    <h2 class="text-3xl font-bold text-gray-900 mt-12 mb-6">üöÄ Start Your Health Journey Today</h2>

                    <p>
                        Knowledge is power when it comes to health and fitness. Now that you understand what each metric means and how to use our calculators, you're equipped to make data-driven decisions about your wellness.
                    </p>

                    <p class="text-lg font-semibold text-gray-900 mt-8">
                        Ready to take control of your health? Explore our complete suite of health calculators and start tracking your progress today!
                    </p>
                </article>

                <!-- Author Bio -->
                <div class="mt-12 pt-8 border-t-2 border-gray-200">
                    <div class="flex items-start gap-4">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-2xl text-white font-bold">
                            ST
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-gray-900">ScribbleTools Team</h3>
                            <p class="text-gray-600 mt-1">Empowering users to achieve their health and fitness goals through accurate, easy-to-use calculators and comprehensive wellness guides.</p>
                        </div>
                    </div>
                </div>

                <!-- Related Posts -->
                <div class="mt-12 pt-8 border-t-2 border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">Related Posts</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <a href="#blog-financial-planning" class="group">
                            <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow">
                                <h4 class="font-bold text-lg text-gray-900 mb-2 group-hover:text-green-600">üí∞ Master Your Finances</h4>
                                <p class="text-gray-600 text-sm">Complete financial planning guide...</p>
                            </div>
                        </a>
                        <a href="#blog-text-tools" class="group">
                            <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow">
                                <h4 class="font-bold text-lg text-gray-900 mb-2 group-hover:text-blue-600">üìù Mastering Text Tools</h4>
                                <p class="text-gray-600 text-sm">Powerful text manipulation features...</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        `;

        const blogFitnessTrackingContent = `
            <div class="p-8 max-w-4xl mx-auto">
                <div class="mb-8">
                    <button onclick="window.location.hash = '#blogs'" class="text-[#D9534F] hover:underline mb-4 flex items-center gap-2">
                        ‚Üê Back to Blog
                    </button>
                    <div class="flex items-center gap-4 mb-4">
                        <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-semibold">Health</span>
                        <span class="text-gray-500">November 28, 2024</span>
                        <span class="text-gray-400">‚Ä¢</span>
                        <span class="text-gray-500">6 min read</span>
                    </div>
                    <h1 class="handwritten text-4xl text-gray-800 mb-6">üèÉ‚Äç‚ôÄÔ∏è Fitness Tracking Simplified</h1>
                </div>
                <div class="prose prose-lg max-w-none">
                    <p class="text-lg text-gray-700 leading-relaxed">Coming soon...</p>
                </div>
            </div>
        `;

        const blogImageToolsContent = `
            <div class="p-8 max-w-4xl mx-auto">
                <div class="mb-8">
                    <button onclick="window.location.hash = '#blogs'" class="text-[#D9534F] hover:underline mb-4 flex items-center gap-2">
                        ‚Üê Back to Blog
                    </button>
                    <div class="flex items-center gap-4 mb-4">
                        <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">Updates</span>
                        <span class="text-gray-500">November 25, 2024</span>
                        <span class="text-gray-400">‚Ä¢</span>
                        <span class="text-gray-500">4 min read</span>
                    </div>
                    <h1 class="handwritten text-4xl text-gray-800 mb-6">üé® New Image Tools Released!</h1>
                </div>
                <div class="prose prose-lg max-w-none">
                    <p class="text-lg text-gray-700 leading-relaxed">Coming soon...</p>
                </div>
            </div>
        `;

        const blogCommunityContent = `
            <div class="p-8 max-w-4xl mx-auto">
                <div class="mb-8">
                    <button onclick="window.location.hash = '#blogs'" class="text-[#D9534F] hover:underline mb-4 flex items-center gap-2">
                        ‚Üê Back to Blog
                    </button>
                    <div class="flex items-center gap-4 mb-4">
                        <span class="bg-teal-100 text-teal-800 px-3 py-1 rounded-full text-sm font-semibold">Community</span>
                        <span class="text-gray-500">November 20, 2024</span>
                        <span class="text-gray-400">‚Ä¢</span>
                        <span class="text-gray-500">3 min read</span>
                    </div>
                    <h1 class="handwritten text-4xl text-gray-800 mb-6">üí¨ Community Spotlight & Feedback</h1>
                </div>
                <div class="prose prose-lg max-w-none">
                    <p class="text-lg text-gray-700 leading-relaxed">Coming soon...</p>
                </div>
            </div>
        `;
        
        const contactContent = `
             <div class="p-8">
                <h2 class="handwritten text-5xl text-[#D9534F] mb-4">Contact Us</h2>
                <p class="text-gray-600 leading-relaxed">Have a suggestion for a new tool or feedback on an existing one? We'd love to hear from you. Please feel free to reach out to our team.</p>
                <div class="mt-6">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdbzEwaABUSLTN16DSDToWJXYJtUISp7pfGcZHijvJ1zkPKZA/viewform?embedded=true" width="100%" height="600" frameborder="0" marginheight="0" marginwidth="0">Loading‚Ä¶</iframe>
                </div>
            </div>
        `;

        const feedbackContent = `
             <div class="p-8">
                <h2 class="handwritten text-5xl text-[#D9534F] mb-4">Submit Feedback</h2>
                <p class="text-gray-600 leading-relaxed">Your feedback is valuable to us! Please let us know if you've found a bug, have a suggestion for a new tool, or have any other comments.</p>
                <div class="mt-6">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeoySeGnd8OJUzDjcz5fnLnICpxdt6DmQBI50lkHSKsYfSe0Q/viewform?embedded=true" width="100%" height="700" frameborder="0" marginheight="0" marginwidth="0">Loading‚Ä¶</iframe>
                </div>
            </div>
        `;

        const requestToolContent = `
            <div class="p-8 max-w-4xl mx-auto">
                <h2 class="handwritten text-5xl text-[#D9534F] mb-4 text-center">üìù Request a Tool</h2>
               
                <p class="text-gray-700 text-lg mb-6 text-center">Need a comprehensive tool with specific features? Tell us exactly what you need, why you need it, and how it should work. We love building detailed solutions!</p>
                <div class="bg-white rounded-lg shadow-md border border-gray-200 p-6">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfIUv3Y4n7n2Iab39GssPzzA3gnQyTNaXuThzuUM22TxwYalw/viewform?embedded=true" width="100%" height="800" frameborder="0" marginheight="0" marginwidth="0">Loading‚Ä¶</iframe>
                </div>
                <p class="text-sm text-gray-500 text-center mt-4">üí° For quick, simple ideas, try our chat widget in the bottom-right corner!</p>
            </div>
        `;

        // Blog navigation function
        function navigateToBlog(blogId) {
            window.location.hash = '#' + blogId;
        }

        // Function to hide/show tool navigation based on current page
        function toggleToolNavigation(show) {
            // With the new hamburger menu, navigation is always available
            // This function is kept for compatibility but doesn't need to do anything
            // since the hamburger menu provides access to all tools at all times
        }

        async function loadContent(path, query) {
            // console.log('loadContent called with path:', path);
            // console.log('Current location:', window.location.href);
            
            // Clear any existing intervals or timeouts to prevent memory leaks
            for (let i = 1; i < 99999; i++) {
                window.clearInterval(i);
                window.clearTimeout(i);
            }
            
            appContainer.innerHTML = '<div class="flex justify-center items-center h-full"><div class="spinner"></div></div>';
            try {
                // console.log('Fetching:', path);
                const response = await fetch(path);
                // console.log('Fetch response:', response.status, response.ok, response.statusText);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);
                }
                
                const html = await response.text();
                // console.log('HTML received, length:', html.length);
                // console.log('HTML starts with:', html.substring(0, 100));

                // Create a temporary container to parse the HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;

                // Remove all <script> tags from the tempDiv and collect them
                const scripts = Array.from(tempDiv.querySelectorAll('script'));
                scripts.forEach(script => script.parentNode.removeChild(script));

                // Inject the rest of the HTML into the app container
                appContainer.innerHTML = '';
                while (tempDiv.firstChild) {
                    appContainer.appendChild(tempDiv.firstChild);
                }

                // Clean up existing tool scripts to prevent conflicts
                const existingToolScripts = document.querySelectorAll('script[data-tool-script]');
                existingToolScripts.forEach(script => script.remove());

                // Run scripts with proper cleanup and initialization
                const scriptPromises = scripts.map(oldScript => {
                    return new Promise((resolve, reject) => {
                        const newScript = document.createElement('script');
                        newScript.setAttribute('data-tool-script', 'true');

                        Array.from(oldScript.attributes).forEach(attr => {
                            if (attr.name !== 'data-tool-script') {
                                newScript.setAttribute(attr.name, attr.value);
                            }
                        });

                        if (oldScript.src) {
                            const originalSrc = oldScript.getAttribute('src');
                            if (originalSrc) {
                                // Handle relative paths from the loaded tool file
                                if (originalSrc.startsWith('http') || originalSrc.startsWith('/') || originalSrc.startsWith('client/')) {
                                    newScript.src = originalSrc;
                                } else {
                                    const basePath = path.substring(0, path.lastIndexOf('/') + 1);
                                    newScript.src = basePath + originalSrc;
                                }
                            }
                            newScript.onload = () => resolve();
                            newScript.onerror = () => reject(new Error(`Script load error: ${newScript.src}`));
                        } else {
                            newScript.textContent = oldScript.textContent;
                            resolve(); // Inline scripts are executed synchronously when appended
                        }
                        document.body.appendChild(newScript);
                    });
                });

                // After all scripts are loaded, call the initializer once.
                Promise.all(scriptPromises)
                    .then(() => {
                        // console.log(`‚úÖ All scripts for ${path} have been loaded. Initializing tool...`);
                        checkAndInitializeTool(path);
                    })
                    .catch(error => {
                        console.error('An error occurred while loading tool scripts:', error);
                    });

                // This function is now a placeholder, but we'll keep the structure
                function runScriptsWithQRCodeCheck(scripts) {
                    if (typeof QRCode !== 'undefined') {
                        // Scripts are already running via Promises
                    } else {
                        // Wait for QRCode to be available
                        const interval = setInterval(() => {
                            if (typeof QRCode !== 'undefined') {
                                clearInterval(interval);
                                // Scripts are already running
                            }
                        }, 50);
                    }
                }

                // Centralized tool initialization function
                function checkAndInitializeTool(path) {
                    // Wait a bit more for DOM and scripts to be fully ready
                    setTimeout(() => {
                        // Image tools
                        if (path.includes('image-compressor') && window.initializeImageCompressor) {
                            window.initializeImageCompressor();
                        } else if (path.includes('image-converter') && window.initializeImageConverter) {
                            window.initializeImageConverter();
                        } else if (path.includes('passport-photo-maker') && window.initializePassportPhotoMaker) {
                            window.initializePassportPhotoMaker();
                        } else if (path.includes('reduce-image-size-kb') && window.initializeReduceImageSize) {
                            window.initializeReduceImageSize();
                        } else if (path.includes('resize-image-pixel') && window.initializeResizeImagePixel) {
                            window.initializeResizeImagePixel();
                        } else if (path.includes('generate-signature') && window.initializeGenerateSignature) {
                            window.initializeGenerateSignature();
                        } else if (path.includes('increase-image-size-kb') && window.initializeIncreaseImageSize) {
                            window.initializeIncreaseImageSize();
                        } else if (path.includes('watermark-images') && window.initializeWatermarkImages) {
                            window.initializeWatermarkImages();
                        } else if (path.includes('rotate-image') && window.initializeRotateImage) {
                            window.initializeRotateImage();
                        } else if (path.includes('gif-tools') && window.initializeGIFTools) {
                            window.initializeGIFTools();
                        } else if (path.includes('grayscale-image') && window.initializeGrayscaleImageTool) {
                            window.initializeGrayscaleImageTool();
                        } else if (path.includes('image-color-picker') && window.initializeImageColorPickerTool) {
                            window.initializeImageColorPickerTool();
                        } else if (path.includes('remove-image-background') && window.initializeRemoveImageBackgroundTool) {
                            window.initializeRemoveImageBackgroundTool();
                        } else if (path.includes('picture-to-pixel-art') && window.initializePictureToPixelArtTool) {
                            window.initializePictureToPixelArtTool();
                        } else if (path.includes('black-white-image') && window.initializeBlackWhiteImageTool) {
                            window.initializeBlackWhiteImageTool();
                        } else if (path.includes('circle-crop') && window.initializeCircleCropTool) {
                            window.initializeCircleCropTool();
                        } else if (path.includes('flip-image') && window.initializeFlipImageTool) {
                            window.initializeFlipImageTool();
                        } else if (path.includes('resize-sign-50mm-20mm') && window.initializeResizeSign50x20Tool) {
                            // console.log('üìè Initializing Resize Sign 50mm x 20mm Tool...');
                            window.initializeResizeSign50x20Tool();
                            // console.log('‚úÖ Resize Sign 50mm x 20mm Tool initialized');
                        } else if (path.includes('add-name-dob-photo') && window.initializeAddNameDobTool) {
                            // console.log('üè∑Ô∏è Initializing Add Name & DOB Tool...');
                            window.initializeAddNameDobTool();
                            // console.log('‚úÖ Add Name & DOB Tool initialized');
                                                } else if (path.includes('gif-tools') && window.initializeGifTools) {
                            window.initializeGifTools();
                        }
                        // Other tools
                        else if (path.includes('personal-notes')) {
                            // console.log('üìù Initializing Personal Notes...');
                            // Try multiple initialization methods
                            if (window.initializePersonalNotes) {
                                window.initializePersonalNotes();
                            } else if (window.loadNotes) {
                                window.loadNotes();
                            } else {
                                // Fallback: wait a bit and try again
                                setTimeout(() => {
                                    if (window.initializePersonalNotes) {
                                        window.initializePersonalNotes();
                                    } else if (window.loadNotes) {
                                        window.loadNotes();
                                    }
                                }, 500);
                            }
                            // console.log('‚úÖ Personal Notes initialization attempted');
                        }
                        // Student Tools
                        else if (path.includes('resume-builder')) {
                            // console.log('üìã Initializing Resume Builder...');
                            try {
                                if (window.initializeResumeBuilder) {
                                    const result = window.initializeResumeBuilder();
                                    // if (result) {
                                    //     console.log('‚úÖ Resume Builder initialized successfully');
                                    // }
                                } else {
                                    // console.warn('‚ö†Ô∏è Resume Builder initialization function not found, retrying...');
                                    // Retry after a short delay
                                    setTimeout(() => {
                                        if (window.initializeResumeBuilder) {
                                            window.initializeResumeBuilder();
                                            // console.log('‚úÖ Resume Builder initialized on retry');
                                        }
                                    }, 500);
                                }
                            } catch (error) {
                                console.error('‚ùå Error initializing Resume Builder:', error);
                            }
                        } else if (path.includes('cover-letter-generator') && window.initializeCoverLetterGenerator) {
                            // console.log('üìÑ Initializing Cover Letter Generator...');
                            window.initializeCoverLetterGenerator();
                        } else if (path.includes('job-tracker') && window.initializeJobTracker) {
                            // console.log('üìä Initializing Job Application Tracker...');
                            window.initializeJobTracker();
                        } else if (path.includes('gpa-calculator') && window.initializeGpaCalculator) {
                            // console.log('üìö Initializing GPA Calculator...');
                            window.initializeGpaCalculator();
                        } else if (path.includes('grade-calculator') && window.initializeGradeCalculator) {
                            // console.log('üìà Initializing Grade Calculator...');
                            window.initializeGradeCalculator();
                        } else if (path.includes('study-planner') && window.initializeStudyPlanner) {
                            // console.log('üìÖ Initializing Study Planner...');
                            window.initializeStudyPlanner();
                        } else if (path.includes('assignment-tracker') && window.initializeAssignmentTracker) {
                            console.log('üìù Initializing Assignment Tracker...');
                            window.initializeAssignmentTracker();
                        } else if (path.includes('student-budget') && window.initializeStudentBudget) {
                            console.log('üí∞ Initializing Student Budget Calculator...');
                            window.initializeStudentBudget();
                        } else if (path.includes('student-loan-calculator') && window.initializeStudentLoanCalculator) {
                            console.log('üéì Initializing Student Loan Calculator...');
                            window.initializeStudentLoanCalculator();
                        } else if (path.includes('textbook-cost') && window.initializeTextbookCost) {
                            console.log('üìñ Initializing Textbook Cost Optimizer...');
                            window.initializeTextbookCost();
                        } else if (path.includes('semester-cost') && window.initializeSemesterCost) {
                            console.log('üè´ Initializing Semester Cost Estimator...');
                            window.initializeSemesterCost();
                        } else if (path.includes('expense-splitter') && window.initializeExpenseSplitter) {
                            console.log('üí∏ Initializing Expense Splitter...');
                            window.initializeExpenseSplitter();
                        } else if (path.includes('habit-tracker') && window.initializeHabitTracker) {
                            console.log('üéØ Initializing Habit Tracker...');
                            window.initializeHabitTracker();
                        } else if (path.includes('time-tracker') && window.initializeTimeTracker) {
                            console.log('‚è±Ô∏è Initializing Study Time Tracker...');
                            window.initializeTimeTracker();
                        } else if (path.includes('goal-tracker') && window.initializeGoalTracker) {
                            console.log('üéØ Initializing Goal Progress Tracker...');
                            window.initializeGoalTracker();
                        } else if (path.includes('procrastination-breaker') && window.initializeProcrastinationBreaker) {
                            console.log('‚ö° Initializing Procrastination Breaker...');
                            window.initializeProcrastinationBreaker();
                        } else if (path.includes('focus-timer') && window.initializeFocusTimer) {
                            console.log('üß† Initializing Focus Session Timer...');
                            window.initializeFocusTimer();
                        } else if (path.includes('reflection-journal') && window.initializeReflectionJournal) {
                            console.log('üìî Initializing Weekly Reflection Journal...');
                            window.initializeReflectionJournal();
                        }
                        // Financial tools
                        else if (path.includes('Canadian-Mortgage-Calculator') && window.initializeCanadianMortgageCalculator) {
                            window.initializeCanadianMortgageCalculator();
                        } else if ((path.includes('indian-gst-calculator') || path.includes('sales-tax-calculator')) && window.initializeIndianGSTCalculator) {
                            console.log('üáÆüá≥ Initializing Indian GST Calculator...');
                            window.initializeIndianGSTCalculator();
                        } else if (path.includes('auto-loan-calculator') && window.initializeAutoLoanCalculator) {
                            console.log('üöó Initializing Auto Loan Calculator...');
                            window.initializeAutoLoanCalculator();
                        } else if (path.includes('salary-calculator') && window.initializeSalaryCalculator) {
                            window.initializeSalaryCalculator();
                        }
                        // Health tools
                        else if (path.includes('ideal-weight-calculator') && window.initializeIdealWeightCalculator) {
                            window.initializeIdealWeightCalculator();
                        }
                        // New tools
                        else if (path.includes('password-generator') && window.initializePasswordGenerator) {
                            console.log('üîê Initializing Password Generator...');
                            window.initializePasswordGenerator();
                            console.log('‚úÖ Password Generator initialized');
                        } else if (path.includes('basic-calculator') && window.initializeBasicCalculator) {
                            console.log('üßÆ Initializing Basic Calculator...');
                            setTimeout(() => {
                                // Force initialization even if DOMContentLoaded already fired
                                window.initializeBasicCalculator();
                                
                                // Double-check that keypad events are working
                                const keypad = document.querySelector('.basic-calc-keypad');
                                if (keypad && !keypad.dataset.initialized) {
                                    console.log('Rebinding basic calculator keypad events...');
                                    keypad.addEventListener('click', function(e) {
                                        if (e.target.matches('[data-val]')) {
                                            console.log('Calculator button clicked:', e.target.dataset.val);
                                        }
                                    });
                                    keypad.dataset.initialized = 'true';
                                }
                                
                                // Ensure keyboard events work
                                document.addEventListener('keydown', function(e) {
                                    if (document.querySelector('.basic-calc-container')) {
                                        console.log('Calculator keyboard event:', e.key);
                                    }
                                });
                            }, 200);
                            console.log('‚úÖ Basic Calculator initialized');
                        } else if (path.includes('percentage-calculator')) {
                            console.log('üìä Initializing Percentage Calculator...');
                            // Percentage calculator is ready by default, ensure DOM is loaded
                            setTimeout(() => {
                                const calcBtn = document.getElementById('perc-calc-calc');
                                const inputField = document.getElementById('perc-input');
                                
                                if (calcBtn && inputField) {
                                    console.log('Percentage calculator elements found, ensuring event listeners...');
                                    
                                    // Remove existing listeners to prevent duplicates
                                    const newCalcBtn = calcBtn.cloneNode(true);
                                    const newInputField = inputField.cloneNode(true);
                                    
                                    calcBtn.parentNode.replaceChild(newCalcBtn, calcBtn);
                                    inputField.parentNode.replaceChild(newInputField, inputField);
                                    
                                    // Re-add event listeners
                                    newCalcBtn.addEventListener('click', function() {
                                        let expr = newInputField.value;
                                        if (!expr.trim()) return showResult('Enter a percentage expression.');
                                        evaluatePercentExpr(expr);
                                    });
                                    
                                    newInputField.addEventListener('keydown', function(e) {
                                        if (e.key === 'Enter') {
                                            let expr = newInputField.value;
                                            if (!expr.trim()) return showResult('Enter a percentage expression.');
                                            evaluatePercentExpr(expr);
                                        }
                                    });
                                    
                                    console.log('Percentage calculator event listeners rebound successfully');
                                }
                            }, 200);
                            console.log('‚úÖ Percentage Calculator initialized');
                        } else if (path.includes('square-root-calculator')) {
                            console.log('‚àö Initializing Square Root Calculator...');
                            setTimeout(() => {
                                // Ensure all form elements and buttons have proper event listeners
                                const allButtons = document.querySelectorAll('button');
                                const allInputs = document.querySelectorAll('input[type="number"], input[type="text"]');
                                
                                allButtons.forEach(btn => {
                                    if (btn.textContent.includes('Calculate') || btn.id.includes('calc')) {
                                        console.log('Found calculate button, ensuring it works:', btn.id);
                                    }
                                });
                                
                                allInputs.forEach(input => {
                                    input.addEventListener('keydown', function(e) {
                                        if (e.key === 'Enter') {
                                            const calcBtn = input.closest('div, form').querySelector('button');
                                            if (calcBtn) calcBtn.click();
                                        }
                                    });
                                });
                            }, 200);
                            console.log('‚úÖ Square Root Calculator initialized');
                        } else if (path.includes('exponent-calculator')) {
                            console.log('^ Initializing Exponent Calculator...');
                            console.log('‚úÖ Exponent Calculator initialized');
                        } else if (path.includes('average-calculator')) {
                            console.log('üìä Initializing Average Calculator...');
                            console.log('‚úÖ Average Calculator initialized');
                        } else if (path.includes('fraction-calculator')) {
                            console.log('‚Öì Initializing Fraction Calculator...');
                            console.log('‚úÖ Fraction Calculator initialized');
                        } else if (path.includes('discount-calculator')) {
                            console.log('üí∞ Initializing Discount Calculator...');
                            console.log('‚úÖ Discount Calculator initialized');
                        } else if (path.includes('tip-calculator')) {
                            console.log('üí° Initializing Tip Calculator...');
                            console.log('‚úÖ Tip Calculator initialized');
                        } else if (path.includes('simple-interest-calculator')) {
                            console.log('üíµ Initializing Simple Interest Calculator...');
                            console.log('‚úÖ Simple Interest Calculator initialized');
                        } else if (path.includes('unit-price-calculator')) {
                            console.log('üè™ Initializing Unit Price Calculator...');
                            console.log('‚úÖ Unit Price Calculator initialized');
                        } else if (path.includes('age-calculator') && window.initializeAgeCalculator) {
                            console.log('üìÖ Initializing Age Calculator...');
                            window.initializeAgeCalculator();
                            console.log('‚úÖ Age Calculator initialized');
                        }
                        // Math/Geometry tool initializations
                        else if (path.includes('area-calculator')) {
                            console.log('üìê Initializing Area Calculator...');
                            // For geometry tools, trigger the default initialization if available
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Area Calculator initialized');
                        } else if (path.includes('perimeter-calculator')) {
                            console.log('üìè Initializing Perimeter Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Perimeter Calculator initialized');
                        } else if (path.includes('volume-calculator')) {
                            console.log('üßä Initializing Volume Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Volume Calculator initialized');
                        } else if (path.includes('surface-area-calculator')) {
                            console.log('üì¶ Initializing Surface Area Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Surface Area Calculator initialized');
                        }
                        // Statistics tool initializations  
                        else if (path.includes('statistics-calculator')) {
                            console.log('üìä Initializing Statistics Calculator...');
                            // Statistics tools are ready by default
                            console.log('‚úÖ Statistics Calculator initialized');
                        } else if (path.includes('standard-deviation-calculator')) {
                            console.log('üìà Initializing Standard Deviation Calculator...');
                            console.log('‚úÖ Standard Deviation Calculator initialized');
                        } else if (path.includes('mean-median-mode-range-calculator')) {
                            console.log('üìä Initializing Mean/Median/Mode Calculator...');
                            console.log('‚úÖ Mean/Median/Mode Calculator initialized');
                        } else if (path.includes('z-score-calculator')) {
                            console.log('üìâ Initializing Z-Score Calculator...');
                            console.log('‚úÖ Z-Score Calculator initialized');
                        } else if (path.includes('probability-calculator')) {
                            console.log('üé≤ Initializing Probability Calculator...');
                            console.log('‚úÖ Probability Calculator initialized');
                        } else if (path.includes('permutation-and-combination-calculator')) {
                            console.log('üî¢ Initializing Permutation & Combination Calculator...');
                            console.log('‚úÖ Permutation & Combination Calculator initialized');
                        } else if (path.includes('confidence-interval-calculator')) {
                            console.log('üìä Initializing Confidence Interval Calculator...');
                            console.log('‚úÖ Confidence Interval Calculator initialized');
                        } else if (path.includes('sample-size-calculator')) {
                            console.log('üë• Initializing Sample Size Calculator...');
                            console.log('‚úÖ Sample Size Calculator initialized');
                        }
                        // Shapes tool initializations
                        else if (path.includes('circle-calculator')) {
                            console.log('‚≠ï Initializing Circle Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Circle Calculator initialized');
                        } else if (path.includes('triangle-calculator')) {
                            console.log('üî∫ Initializing Triangle Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Triangle Calculator initialized');
                        } else if (path.includes('rectangle-calculator')) {
                            console.log('‚¨õ Initializing Rectangle Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Rectangle Calculator initialized');
                        } else if (path.includes('sphere-calculator')) {
                            console.log('üåï Initializing Sphere Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Sphere Calculator initialized');
                        } else if (path.includes('cylinder-calculator')) {
                            console.log('ü•§ Initializing Cylinder Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Cylinder Calculator initialized');
                        } else if (path.includes('cuboid-calculator')) {
                            console.log('üì¶ Initializing Cuboid Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Cuboid Calculator initialized');
                        } else if (path.includes('polygon-calculator')) {
                            console.log('üî∑ Initializing Polygon Calculator...');
                            if (window.updateInputs && typeof window.updateInputs === 'function') {
                                window.updateInputs();
                            }
                            console.log('‚úÖ Polygon Calculator initialized');
                        }
                        // Add emoji tool initialization
                        else if (path.includes('emoji-replacer-inserter') && window.initializeEmojiTool) {
                            console.log('üòÄ Initializing Emoji Replacer/Inserter...');
                            window.initializeEmojiTool();
                            console.log('‚úÖ Emoji Replacer/Inserter initialized');
                        }
                        
                        // General math tool fix for input/button issues
                        setTimeout(() => {
                            if (path.includes('math/')) {
                                console.log('üîß Applying general math tool fixes...');
                                
                                // Find all input fields and ensure they can accept values
                                const inputs = document.querySelectorAll('input[type="number"], input[type="text"], textarea');
                                inputs.forEach(input => {
                                    // Remove any potential restrictions that might prevent input
                                    input.removeAttribute('readonly');
                                    input.removeAttribute('disabled');
                                    
                                    // Ensure the input can receive focus and input
                                    input.addEventListener('focus', function() {
                                        this.style.pointerEvents = 'auto';
                                        this.style.userSelect = 'auto';
                                    });
                                    
                                    // Add Enter key support
                                    input.addEventListener('keydown', function(e) {
                                        if (e.key === 'Enter') {
                                            const container = this.closest('div, form, .container');
                                            const calcBtn = container?.querySelector('button, .calc-btn, [id*="calc"], [class*="calc"]');
                                            if (calcBtn) {
                                                console.log('Triggering calculation via Enter key');
                                                calcBtn.click();
                                            }
                                        }
                                    });
                                });
                                
                                // Find all calculation buttons and ensure they work
                                const calcButtons = document.querySelectorAll('button, .calc-btn, [id*="calc"], [class*="calc"]');
                                calcButtons.forEach(btn => {
                                    if (btn.textContent.toLowerCase().includes('calculate') || 
                                        btn.id.toLowerCase().includes('calc') ||
                                        btn.className.toLowerCase().includes('calc')) {
                                        
                                        console.log('Ensuring math button works:', btn.id || btn.textContent);
                                        
                                        // Remove potential CSS that might block interaction
                                        btn.style.pointerEvents = 'auto';
                                        btn.style.userSelect = 'auto';
                                        btn.removeAttribute('disabled');
                                        
                                        // Ensure click events work
                                        btn.addEventListener('click', function(e) {
                                            console.log('Math tool button clicked:', this.id || this.textContent);
                                        });
                                    }
                                });
                                
                                console.log('‚úÖ General math tool fixes applied');
                            }
                        }, 100);
                        
                        // Add more tool initializations as needed
                        
                        // For tools without specific initialization functions, try generic initialization
                        if (typeof initializeTool === 'function') {
                            initializeTool();
                        }
                        
                        // For tools that do not have specific initialization, ensure basic event listeners are working
                        // Re-trigger any click event handlers that might have been added in the scripts
                        const buttons = appContainer.querySelectorAll('button, input[type="button"], .calc-btn');
                        buttons.forEach(button => {
                            // Check if button already has event listeners by trying to trigger events
                            const event = new Event('initCheck');
                            button.dispatchEvent(event);
                        });
                        
                        // Trigger a custom event to notify tools they can initialize
                        const toolLoadedEvent = new CustomEvent('toolLoaded', { detail: { path: path } });
                        document.dispatchEvent(toolLoadedEvent);
                        
                        // Ensure logo toggle functionality is maintained after tool loading
                        initializeLogoToggle();
                    }, 200);
                }
                runScriptsWithQRCodeCheck(scripts);
                
                // Fallback initialization for tools that might need extra time
                setTimeout(() => checkAndInitializeTool(path), 500);
            } catch (error) {
                console.error("Failed to load content:", error);
                // console.error("Path was:", path);
                // console.error("Error details:", error.message, error.stack);
                appContainer.innerHTML = `<p class="text-red-500 text-center">Sorry, we couldn't load this tool. Error: ${error.message}</p>`;
            }
        }

        function router() {
            console.log('Router called with hash:', window.location.hash);
            let hash = window.location.hash || '#privacy-policy'; // Default to #privacy-policy
            let query = '';
            if (hash.includes('?')) {
                [hash, query] = hash.split('?');
            }
            
            // Get the path from routes
            const path = routes[hash];
            console.log('Looking for path:', path, 'for hash:', hash);
            
            // Track tool navigation
            if (hash !== '#home') {
                try {
                    trackToolNavigation(hash.replace('#', ''));
                } catch (e) {
                    console.warn('Tool tracking error:', e);
                }
            }
            
            // Update navigation active states
            try {
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.toggle('active', link.getAttribute('href') === hash);
                });
            } catch (e) {
                console.warn('Navigation update error:', e);
            }

            // Handle individual learning resources and resource listing
            if (hash.startsWith('#blog-')) {
                console.log('Handling blog route:', hash);
                try {
                    toggleToolNavigation(false); // Hide tool navigation for learning resources
                    
                    if (hash === '#blog-welcome') {
                        appContainer.innerHTML = blogWelcomeContent;
                    } else if (hash === '#blog-text-tools') {
                        appContainer.innerHTML = blogTextToolsContent;
                    } else if (hash === '#blog-financial-planning') {
                        appContainer.innerHTML = blogFinancialPlanningContent;
                    } else if (hash === '#blog-health-calculator') {
                        appContainer.innerHTML = blogHealthCalculatorContent;
                    } else if (hash === '#blog-tech-stack') {
                        appContainer.innerHTML = blogTechStackContent;
                    } else if (hash === '#blog-fitness-tracking') {
                        appContainer.innerHTML = blogFitnessTrackingContent;
                    } else if (hash === '#blog-image-tools') {
                        appContainer.innerHTML = blogImageToolsContent;
                    } else if (hash === '#blog-community') {
                        appContainer.innerHTML = blogCommunityContent;
                    } else {
                        console.warn('Unknown blog route:', hash);
                        appContainer.innerHTML = '<div class="p-8"><h2 class="text-2xl">Blog post not found</h2><a href="#blogs" class="text-blue-500">‚Üê Back to Blog</a></div>';
                    }
                    console.log('Blog content loaded for:', hash);
                    return;
                } catch (e) {
                    console.error('Blog routing error:', e);
                    appContainer.innerHTML = '<div class="p-8"><h2 class="text-2xl text-red-500">Error loading blog post</h2><a href="#blogs" class="text-blue-500">‚Üê Back to Blog</a></div>';
                    return;
                }
            } else {
                toggleToolNavigation(true); // Show tool navigation for other pages
            }

            // Handle regular routes
            try {
                // Blog archive deprecated
                if (false) {
                    /* legacy blog-archive branch removed */
                } else if (path && path !== 'blog-listing') {
                    console.log('Loading content from path:', path);
                    loadContent(path);
                } else if (hash === '#about') {
                    appContainer.innerHTML = aboutContent;
                } else if (hash === '#blogs') {
                    console.log('Loading blog listing');
                    toggleToolNavigation(true); // Show tool navigation for blog listing
                    appContainer.innerHTML = blogContent;
                } else if (hash === '#privacy-policy') {
                    appContainer.innerHTML = privacyPolicyContent;
                } else if (hash === '#contact') {
                    appContainer.innerHTML = contactContent;
                } else if (hash === '#feedback') {
                    appContainer.innerHTML = feedbackContent;
                } else if (hash === '#request-tool') {
                    appContainer.innerHTML = requestToolContent;
                } else {
                    console.log('Loading privacy policy as default');
                    appContainer.innerHTML = privacyPolicyContent;
                }
            } catch (e) {
                console.error('Router error:', e);
                appContainer.innerHTML = '<div class="p-8"><h2 class="text-2xl text-red-500">Error loading page</h2></div>';
            }
            
            // Ensure logo toggle functionality is always available after any navigation
            setTimeout(() => {
                initializeLogoToggle();
            }, 100);
        }
        
        // --- Search Functionality ---
        // Search functionality is now handled in the hamburger menu initialization

        // Chat system variables
        let chatOpen = false;
        let chatWindow = null;
        let chatInput = null;
        let chatSend = null;
        let chatMessages = null;
        let chatAutocomplete = null;
        let allChatMessages = [];
        let selectedAutocompleteIndex = -1;
        
        // Ground rules for the platform
        const groundRules = {
            chat: {
                maxMessageLength: 500,
                cooldownPeriod: 2000, // 2 seconds between messages
                bannedWords: ['spam', 'abuse', 'inappropriate'],
                maxMessagesPerHour: 50
            },
            tools: {
                maxFileSize: 50 * 1024 * 1024, // 50MB
                allowedFileTypes: ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'text/plain', 'text/csv'],
                rateLimit: 100 // requests per hour
            },
            admin: {
                canModerateChat: true,
                canDeleteMessages: true,
                canBanUsers: true,
                canAccessAnalytics: true,
                canManageTools: true
            }
        };

        // Create tool suggestions from routes
        const toolSuggestions = Object.keys(routes).map(route => {
            const toolName = route.replace('#', '').replace(/-/g, ' ');
            const category = getToolCategory(route);
            return {
                name: toolName,
                route: route,
                category: category,
                icon: getToolIcon(category)
            };
        });

        // Additional autocomplete suggestions (200+ total)
        const extraSuggestions = [
            // Popular tools and requests
            { name: 'tool', icon: 'üîß', category: 'General' },
            { name: 'calculator', icon: 'üî¢', category: 'Math' },
            { name: 'converter', icon: 'üîÑ', category: 'Utility' },
            { name: 'generator', icon: '‚ö°', category: 'Utility' },
            { name: 'checker', icon: '‚úÖ', category: 'Utility' },
            { name: 'analyzer', icon: 'üìä', category: 'Utility' },
            { name: 'formatter', icon: 'üìù', category: 'Text' },
            { name: 'compressor', icon: 'üì¶', category: 'Image' },
            { name: 'resizer', icon: 'üìè', category: 'Image' },
            { name: 'editor', icon: '‚úèÔ∏è', category: 'Text' },
            
            // Common tool requests
            { name: 'password generator', icon: 'üîê', category: 'Security' },
            { name: 'qr code generator', icon: 'üì±', category: 'Utility' },
            { name: 'color picker', icon: 'üé®', category: 'Image' },
            { name: 'unit converter', icon: 'üìê', category: 'Math' },
            { name: 'currency converter', icon: 'üí±', category: 'Finance' },
            { name: 'json formatter', icon: 'üìÑ', category: 'Text' },
            { name: 'base64 encoder', icon: 'üî§', category: 'Text' },
            { name: 'url shortener', icon: 'üîó', category: 'Utility' },
            { name: 'hash generator', icon: 'üî¢', category: 'Security' },
            { name: 'timestamp converter', icon: '‚è∞', category: 'Utility' },
            
            // Health tools
            { name: 'calorie counter', icon: 'üçé', category: 'Health' },
            { name: 'water intake calculator', icon: 'üíß', category: 'Health' },
            { name: 'sleep calculator', icon: 'üò¥', category: 'Health' },
            { name: 'bmi tracker', icon: '‚öñÔ∏è', category: 'Health' },
            { name: 'workout planner', icon: 'üí™', category: 'Health' },
            { name: 'heart rate monitor', icon: '‚ù§Ô∏è', category: 'Health' },
            { name: 'nutrition tracker', icon: 'ü•ó', category: 'Health' },
            { name: 'fitness calculator', icon: 'üèÉ', category: 'Health' },
            
            // Finance tools
            { name: 'budget calculator', icon: 'üí∞', category: 'Finance' },
            { name: 'loan calculator', icon: 'üè¶', category: 'Finance' },
            { name: 'tax calculator', icon: 'üìä', category: 'Finance' },
            { name: 'investment tracker', icon: 'üìà', category: 'Finance' },
            { name: 'savings calculator', icon: 'üè¶', category: 'Finance' },
            { name: 'expense tracker', icon: 'üí≥', category: 'Finance' },
            { name: 'mortgage calculator', icon: 'üè†', category: 'Finance' },
            { name: 'retirement planner', icon: 'üèñÔ∏è', category: 'Finance' },
            
            // Text tools
            { name: 'word counter', icon: 'üìù', category: 'Text' },
            { name: 'text analyzer', icon: 'üîç', category: 'Text' },
            { name: 'plagiarism checker', icon: 'üìã', category: 'Text' },
            { name: 'grammar checker', icon: '‚úèÔ∏è', category: 'Text' },
            { name: 'spell checker', icon: 'üìñ', category: 'Text' },
            { name: 'text translator', icon: 'üåê', category: 'Text' },
            { name: 'markdown editor', icon: 'üìÑ', category: 'Text' },
            { name: 'regex tester', icon: 'üîß', category: 'Text' },
            
            // Image tools
            { name: 'photo editor', icon: 'üñºÔ∏è', category: 'Image' },
            { name: 'background remover', icon: 'üñºÔ∏è', category: 'Image' },
            { name: 'image optimizer', icon: '‚ö°', category: 'Image' },
            { name: 'photo filters', icon: 'üé®', category: 'Image' },
            { name: 'image cropper', icon: '‚úÇÔ∏è', category: 'Image' },
            { name: 'watermark tool', icon: 'üíß', category: 'Image' },
            { name: 'gif maker', icon: 'üé¨', category: 'Image' },
            { name: 'meme generator', icon: 'üòÇ', category: 'Image' },
            
            // Developer tools
            { name: 'code formatter', icon: 'üíª', category: 'Developer' },
            { name: 'api tester', icon: 'üîå', category: 'Developer' },
            { name: 'css generator', icon: 'üé®', category: 'Developer' },
            { name: 'html validator', icon: '‚úÖ', category: 'Developer' },
            { name: 'minifier', icon: 'üì¶', category: 'Developer' },
            { name: 'beautifier', icon: '‚ú®', category: 'Developer' },
            { name: 'sql formatter', icon: 'üóÑÔ∏è', category: 'Developer' },
            { name: 'xml parser', icon: 'üìÑ', category: 'Developer' },
            
            // Utility tools
            { name: 'habit tracker', icon: 'üìÖ', category: 'Utility' },
            { name: 'todo list', icon: '‚úÖ', category: 'Utility' },
            { name: 'timer', icon: '‚è±Ô∏è', category: 'Utility' },
            { name: 'stopwatch', icon: '‚è∞', category: 'Utility' },
            { name: 'reminder app', icon: 'üîî', category: 'Utility' },
            { name: 'note taker', icon: 'üìì', category: 'Utility' },
            { name: 'voice recorder', icon: 'üé§', category: 'Utility' },
            
            // Educational tools
            { name: 'flashcards', icon: 'üìö', category: 'Education' },
            { name: 'quiz maker', icon: '‚ùì', category: 'Education' },
            { name: 'study planner', icon: 'üìÖ', category: 'Education' },
            { name: 'grade calculator', icon: 'üìä', category: 'Education' },
            { name: 'citation generator', icon: 'üìñ', category: 'Education' },
            { name: 'research helper', icon: 'üîç', category: 'Education' },
            { name: 'learning tracker', icon: 'üìà', category: 'Education' },
            { name: 'presentation maker', icon: 'üìΩÔ∏è', category: 'Education' },
            
            // Popular requests
            { name: 'dark mode', icon: 'üåô', category: 'Feature' },
            { name: 'mobile app', icon: 'üì±', category: 'Feature' },
            { name: 'offline mode', icon: 'üì±', category: 'Feature' },
            { name: 'export feature', icon: 'üì§', category: 'Feature' },
            { name: 'import feature', icon: 'üì•', category: 'Feature' },
            { name: 'save to cloud', icon: '‚òÅÔ∏è', category: 'Feature' },
            { name: 'keyboard shortcuts', icon: '‚å®Ô∏è', category: 'Feature' },
            { name: 'user accounts', icon: 'üë§', category: 'Feature' },
            
            // More specific tools
            { name: 'isbn checker', icon: 'üìö', category: 'Utility' },
            { name: 'credit card validator', icon: 'üí≥', category: 'Utility' },
            { name: 'email validator', icon: 'üìß', category: 'Utility' },
            { name: 'phone number formatter', icon: 'üìû', category: 'Utility' },
            { name: 'zip code lookup', icon: 'üìÆ', category: 'Utility' },
            { name: 'weather widget', icon: 'üå§Ô∏è', category: 'Utility' },
            { name: 'world clock', icon: 'üåç', category: 'Utility' },
            { name: 'timezone converter', icon: 'üïê', category: 'Utility' },
            
            // Common chat words and greetings
            { name: 'hello', icon: 'üëã', category: 'Chat' },
            { name: 'hi', icon: 'üëã', category: 'Chat' },
            { name: 'hey', icon: 'üëã', category: 'Chat' },
            { name: 'good morning', icon: 'üåÖ', category: 'Chat' },
            { name: 'good afternoon', icon: '‚òÄÔ∏è', category: 'Chat' },
            { name: 'good evening', icon: 'üåÜ', category: 'Chat' },
            { name: 'good night', icon: 'üåô', category: 'Chat' },
            { name: 'thanks', icon: 'üôè', category: 'Chat' },
            { name: 'thank you', icon: 'üôè', category: 'Chat' },
            { name: 'please', icon: 'üôè', category: 'Chat' },
            { name: 'welcome', icon: 'ü§ó', category: 'Chat' },
            { name: 'awesome', icon: 'üåü', category: 'Chat' },
            { name: 'amazing', icon: 'ü§©', category: 'Chat' },
            { name: 'great', icon: 'üëç', category: 'Chat' },
            { name: 'cool', icon: 'üòé', category: 'Chat' },
            { name: 'nice', icon: 'üëå', category: 'Chat' },
            { name: 'perfect', icon: '‚ú®', category: 'Chat' },
            { name: 'excellent', icon: 'üíØ', category: 'Chat' },
            { name: 'love it', icon: '‚ù§Ô∏è', category: 'Chat' },
            { name: 'help', icon: 'üÜò', category: 'Chat' },
            { name: 'question', icon: '‚ùì', category: 'Chat' },
            { name: 'idea', icon: 'üí°', category: 'Chat' },
            { name: 'suggestion', icon: 'üéØ', category: 'Chat' },
            { name: 'feedback', icon: 'üìù', category: 'Chat' },
            { name: 'bug report', icon: 'üêõ', category: 'Chat' },
            { name: 'feature request', icon: '‚≠ê', category: 'Chat' },
            { name: 'how to', icon: 'ü§î', category: 'Chat' },
            { name: 'tutorial', icon: 'üìö', category: 'Chat' },
            { name: 'guide', icon: 'üó∫Ô∏è', category: 'Chat' },
            { name: 'documentation', icon: 'üìñ', category: 'Chat' },
            { name: 'examples', icon: 'üìã', category: 'Chat' },
            { name: 'demo', icon: 'üé¨', category: 'Chat' },
            { name: 'test', icon: 'üß™', category: 'Chat' },
            { name: 'working', icon: '‚úÖ', category: 'Chat' },
            { name: 'not working', icon: '‚ùå', category: 'Chat' },
            { name: 'broken', icon: 'üíî', category: 'Chat' },
            { name: 'fixed', icon: 'üîß', category: 'Chat' },
            { name: 'updated', icon: 'üîÑ', category: 'Chat' },
            { name: 'new', icon: 'üÜï', category: 'Chat' },
            { name: 'old', icon: 'üìú', category: 'Chat' },
            { name: 'fast', icon: '‚ö°', category: 'Chat' },
            { name: 'slow', icon: 'üêå', category: 'Chat' },
            { name: 'easy', icon: 'üòä', category: 'Chat' },
            { name: 'difficult', icon: 'üòÖ', category: 'Chat' },
            { name: 'simple', icon: 'üéØ', category: 'Chat' },
            { name: 'complex', icon: 'üß©', category: 'Chat' },
            { name: 'useful', icon: 'üëç', category: 'Chat' },
            { name: 'useless', icon: 'üëé', category: 'Chat' },
            { name: 'important', icon: '‚ö†Ô∏è', category: 'Chat' },
            { name: 'urgent', icon: 'üö®', category: 'Chat' },
            { name: 'priority', icon: 'üî•', category: 'Chat' },
            { name: 'later', icon: '‚è∞', category: 'Chat' },
            { name: 'now', icon: '‚ö°', category: 'Chat' },
            { name: 'today', icon: 'üìÖ', category: 'Chat' },
            { name: 'tomorrow', icon: 'üìÜ', category: 'Chat' },
            { name: 'yesterday', icon: 'üìã', category: 'Chat' },
            { name: 'soon', icon: 'üîú', category: 'Chat' },
            { name: 'maybe', icon: 'ü§∑', category: 'Chat' },
            { name: 'definitely', icon: 'üíØ', category: 'Chat' },
            { name: 'probably', icon: 'ü§î', category: 'Chat' },
            { name: 'yes', icon: '‚úÖ', category: 'Chat' },
            { name: 'no', icon: '‚ùå', category: 'Chat' },
            { name: 'okay', icon: 'üëå', category: 'Chat' },
            { name: 'alright', icon: 'üëç', category: 'Chat' },
            { name: 'sure', icon: '‚ú®', category: 'Chat' },
            { name: 'absolutely', icon: 'üíØ', category: 'Chat' },
            { name: 'exactly', icon: 'üéØ', category: 'Chat' },
            { name: 'totally', icon: 'üíØ', category: 'Chat' },
            { name: 'completely', icon: '‚úÖ', category: 'Chat' },
            { name: 'really', icon: 'üòÆ', category: 'Chat' },
            { name: 'seriously', icon: 'üò§', category: 'Chat' },
            { name: 'actually', icon: 'ü§ì', category: 'Chat' },
            { name: 'honestly', icon: 'üòá', category: 'Chat' },
            { name: 'basically', icon: 'üìù', category: 'Chat' },
            { name: 'generally', icon: 'üåê', category: 'Chat' },
            { name: 'specifically', icon: 'üéØ', category: 'Chat' },
            { name: 'especially', icon: '‚≠ê', category: 'Chat' },
            { name: 'particularly', icon: 'üîç', category: 'Chat' },
            { name: 'mainly', icon: 'üéØ', category: 'Chat' },
            { name: 'mostly', icon: 'üìä', category: 'Chat' },
            { name: 'sometimes', icon: 'üîÑ', category: 'Chat' },
            { name: 'always', icon: '‚ôæÔ∏è', category: 'Chat' },
            { name: 'never', icon: 'üö´', category: 'Chat' },
            { name: 'often', icon: 'üîÅ', category: 'Chat' },
            { name: 'rarely', icon: 'üî∏', category: 'Chat' },
            { name: 'frequently', icon: 'üìà', category: 'Chat' },
            { name: 'occasionally', icon: 'üé≤', category: 'Chat' }
        ];

        // Combine all suggestions
        const allSuggestions = [...toolSuggestions, ...extraSuggestions];

        // Auto-response messages for community engagement
        const autoResponses = [
            "That's a great idea! üëç",
            "I've been looking for something like that too!",
            "Would love to see this implemented üöÄ",
            "This could be really useful for students!",
            "Perfect for productivity! ‚ö°",
            "Great suggestion! Hope the devs see this üëÄ",
            "I use tools like this daily, would be awesome here!",
            "This would save me so much time! ‚è∞",
            "Brilliant idea! üí°",
            "Yes please! This is exactly what I need üôè",
            "Amazing suggestion! Can't wait to try it",
            "This would be a game changer! üéÆ",
            "Such a practical tool idea! üõ†Ô∏è",
            "I'd use this every day! üìÖ",
            "Great thinking! Very useful üß†",
            "Love this concept! ‚ù§Ô∏è",
            "This would help so many people! üë•",
            "Fantastic idea! Keep them coming! üåü",
            "So needed! Hope it gets built soon ü§û",
            "This is why I love this community! ü§ù"
        ];

        function getToolCategory(route) {
            if (route.includes('text')) return 'Text';
            if (route.includes('math')) return 'Math';
            if (route.includes('financial')) return 'Finance';
            if (route.includes('health')) return 'Health';
            if (route.includes('image')) return 'Image';
            return 'Utility';
        }

        function getToolIcon(category) {
            const icons = {
                'Text': 'üìù',
                'Math': 'üî¢',
                'Finance': 'üí∞',
                'Health': 'üè•',
                'Image': 'üñºÔ∏è',
                'Utility': 'üõ†Ô∏è',
                'Security': 'üîê',
                'Developer': 'üíª',
                'Education': 'üìö',
                'Feature': '‚ö°',
                'General': 'üîß',
                'Chat': 'üí¨'
            };
            return icons[category] || 'üîß';
        }

        // Initialize with some sample public messages
        const sampleMessages = [
            { user: "Alex", message: "Just tried the @bmi-calculator.html - works perfectly! üí™", timestamp: new Date(Date.now() - 3600000) },
            { user: "Sarah", message: "@tool need a habit tracker for daily routines", timestamp: new Date(Date.now() - 1800000) },
            { user: "Mike", message: "The @gif-tools.html is getting better! When will it be fully ready?", timestamp: new Date(Date.now() - 900000) },
            { user: "DevTeam", message: "Working on @gif-tools.html improvements! Thanks for the feedback üõ†Ô∏è", timestamp: new Date(Date.now() - 600000), isAdmin: true }
        ];

        function toggleChat() {
            // Simplified chat toggle without authentication
            if (!chatWindow) {
                console.log('Chat window not found');
                return;
            }
            
            chatOpen = !chatOpen;
            chatWindow.style.display = chatOpen ? 'flex' : 'none';
            if (chatOpen) {
                loadChatHistory();
                if (chatInput) chatInput.focus();
            }
        }

        // Simplified notification function

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-4 py-2 rounded-lg text-white font-medium ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'
            }`;
            notification.textContent = message; // Removed sanitizeInput dependency
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Chat functions without authentication requirements
        let lastMessageTime = 0;
        let messagesThisHour = 0;
        let hourStartTime = Date.now();

        function addMessage(message, isUser = false, username = null, isAdmin = false, skipStorage = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${isUser ? 'user' : 'bot'}`;
            
            // Store message for persistence and download (only if not loading from storage)
            if (!skipStorage) {
                const messageData = {
                    message: message,
                    isUser: isUser,
                    username: username,
                    isAdmin: isAdmin,
                    timestamp: new Date().toISOString(),
                    hasMention: message.includes('@')
                };
                allChatMessages.push(messageData);
                saveChatToStorage();
            }
            
            if (isUser && username) {
                // Format user messages with username - brighter colors for better visibility
                const userColor = isAdmin ? '#ff4500' : '#ffffff'; // Bright orange for admin, white for regular users
                const userBadge = isAdmin ? 'üë®‚Äçüíª' : 'üë§';
                messageDiv.innerHTML = `<strong style="color: ${userColor}; text-shadow: 0 1px 2px rgba(0,0,0,0.5); font-weight: 700;">${userBadge} ${username}:</strong><br>${highlightMentions(message)}`;
            } else if (!isUser) {
                // Bot/system messages
                messageDiv.innerHTML = message;
            } else {
                // Simple user message without username
                messageDiv.innerHTML = highlightMentions(message);
            }
            
            // Only append to DOM if chatMessages element exists
            if (chatMessages) {
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        function highlightMentions(text) {
            // Highlight @tool mentions
            text = text.replace(/@tool\b/gi, '<span style="background: #fef3c7; color: #92400e; padding: 2px 4px; border-radius: 4px; font-weight: bold;">@tool</span>');
            
            // Highlight @filename.html mentions
            text = text.replace(/@([a-zA-Z0-9-_]+\.html)\b/gi, '<span style="background: #dbeafe; color: #1d4ed8; padding: 2px 4px; border-radius: 4px; font-weight: bold;">@$1</span>');
            
            // Highlight other @mentions
            text = text.replace(/@([a-zA-Z0-9-_]+)\b/gi, '<span style="background: #f3e8ff; color: #7c3aed; padding: 2px 4px; border-radius: 4px; font-weight: bold;">@$1</span>');
            
            return text;
        }

        async function loadChatHistory() {
            // Only load chat history if chat elements exist
            if (!chatMessages) {
                console.log('Chat elements not available, skipping chat history load');
                return;
            }
            
            try {
                // Load from localStorage only (no backend authentication)
                const savedChat = localStorage.getItem('scribbletools_chat');
                if (savedChat) {
                    allChatMessages = JSON.parse(savedChat);
                } else {
                    // Initialize with sample messages if no saved chat
                    allChatMessages = sampleMessages.map(msg => ({
                        message: msg.message,
                        isUser: true,
                        username: msg.user,
                        isAdmin: msg.isAdmin || false,
                        timestamp: msg.timestamp.toISOString(),
                        hasMention: msg.message.includes('@')
                    }));
                    saveChatToStorage();
                }
                
                // Clear current messages except welcome message
                const welcomeMessage = chatMessages.querySelector('.chat-message.bot');
                chatMessages.innerHTML = '';
                if (welcomeMessage) {
                    chatMessages.appendChild(welcomeMessage);
                }
                
                // Load all saved messages
                allChatMessages.forEach(msg => {
                    addMessageToDisplay(msg.message, msg.isUser, msg.username, msg.isAdmin);
                });
                
            } catch (error) {
                console.error('Error loading chat history:', error);
            }
        }

        function addMessageToDisplay(message, isUser = false, username = null, isAdmin = false) {
            // Use addMessage with skipStorage=true to avoid duplicating in storage
            addMessage(message, isUser, username, isAdmin, true);
        }

        function saveChatToStorage() {
            localStorage.setItem('scribbletools_chat', JSON.stringify(allChatMessages));
        }

        function downloadMentionChats() {
            // Filter messages that contain @ mentions
            const mentionMessages = allChatMessages.filter(msg => msg.hasMention);
            
            if (mentionMessages.length === 0) {
                alert('No messages with @ mentions found!');
                return;
            }

            // Prepare data for Excel
            const excelData = [];
            
            // Add header row
            excelData.push(['Timestamp', 'Username', 'Message', 'Type', 'Has Mention', 'Response 1', 'Response 2']);
            
            // Process each mention message and find the next 2 responses
            mentionMessages.forEach((mentionMsg, index) => {
                const mentionIndex = allChatMessages.findIndex(msg => 
                    msg.timestamp === mentionMsg.timestamp && msg.username === mentionMsg.username
                );
                
                // Get the next 2 messages as responses
                const response1 = allChatMessages[mentionIndex + 1] || null;
                const response2 = allChatMessages[mentionIndex + 2] || null;
                
                // Format the row data
                const row = [
                    new Date(mentionMsg.timestamp).toLocaleString(),
                    mentionMsg.username || 'System',
                    mentionMsg.message.replace(/<[^>]*>/g, ''), // Remove HTML tags
                    mentionMsg.isAdmin ? 'Admin' : (mentionMsg.isUser ? 'User' : 'System'),
                    'Yes',
                    response1 ? `${response1.username || 'System'}: ${response1.message.replace(/<[^>]*>/g, '')}` : '',
                    response2 ? `${response2.username || 'System'}: ${response2.message.replace(/<[^>]*>/g, '')}` : ''
                ];
                
                excelData.push(row);
            });

            // Convert to CSV format
            const csvContent = excelData.map(row => 
                row.map(cell => `"${String(cell).replace(/"/g, '""')}"`).join(',')
            ).join('\n');

            // Create and download the file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `scribbletools_mention_chats_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function clearChatHistory() {
            if (confirm('Are you sure you want to clear all chat history? This cannot be undone.')) {
                allChatMessages = [];
                localStorage.removeItem('scribbletools_chat');
                loadChatHistory();
            }
        }

        function generateRandomUsername() {
            const adjectives = ['Cool', 'Smart', 'Quick', 'Bright', 'Happy', 'Swift', 'Sharp', 'Clever'];
            const nouns = ['User', 'Coder', 'Helper', 'Builder', 'Maker', 'Thinker', 'Creator'];
            const adj = adjectives[Math.floor(Math.random() * adjectives.length)];
            const noun = nouns[Math.floor(Math.random() * nouns.length)];
            return `${adj}${noun}${Math.floor(Math.random() * 99)}`;
        }

        function detectMentionType(message) {
            if (message.toLowerCase().includes('@tool')) {
                return 'tool';
            } else if (message.match(/@[a-zA-Z0-9-_]+\.html/i)) {
                return 'file';
            } else if (message.match(/@[a-zA-Z0-9-_]+/i)) {
                return 'general';
            }
            return 'chat';
        }

        function handleCommunityMessage(message) {
            const username = generateRandomUsername();
            const mentionType = detectMentionType(message);
            
            // Add user message
            addMessage(message, true, username);
            
            // Check for greeting messages and auto-respond
            const lowerMessage = message.toLowerCase().trim();
            const greetings = ['hi', 'hello', 'hey', 'good morning', 'good afternoon', 'good evening', 'good night'];
            const isGreeting = greetings.some(greeting => 
                lowerMessage === greeting || 
                lowerMessage.startsWith(greeting + ' ') || 
                lowerMessage.startsWith(greeting + '!')
            );
            
            if (isGreeting) {
                const greetingResponses = [
                    "Hi there! üëã Welcome to ScribbleTools!",
                    "Hello! üòä Great to see you here! Feel free to explore our tools.",
                    "Hey! üåü Hope you're having a great day! What brings you to our tools collection?",
                    "Hi! üëã Welcome! Check out our amazing tools or suggest new ones.",
                    "Hello and welcome! üéâ We love feedback and suggestions!",
                    "Hey there! üòÑ Nice to meet you! Don't hesitate to suggest new tools.",
                    "Hi! üöÄ Welcome to the ScribbleTools family! What's your favorite type of tool?",
                    "Hello! ‚≠ê Great to have you here! We're always improving with new ideas!"
                ];
                
                setTimeout(() => {
                    const randomGreeting = greetingResponses[Math.floor(Math.random() * greetingResponses.length)];
                    addMessage(randomGreeting, false);
                }, 500 + Math.random() * 300);
                
                // Add a second community member response for greetings
                setTimeout(() => {
                    const communityUser = generateRandomUsername();
                    const communityGreetings = [
                        "Welcome to the community! ü§ó",
                        "Hi! Hope you find some useful tools here! üëç",
                        "Hey! This community has the best tool suggestions! üåü",
                        "Welcome! Feel free to ask if you need help finding anything! üòä",
                        "Hi there! The tools here have saved me so much time! ‚è∞",
                        "Hey! Great to see new faces in our community! üéâ"
                    ];
                    const communityResponse = communityGreetings[Math.floor(Math.random() * communityGreetings.length)];
                    addMessage(communityResponse, true, communityUser);
                }, 1200 + Math.random() * 800);
                
                return; // Skip the default response system for greetings
            }
            
            // Generate appropriate response based on mention type
            setTimeout(() => {
                let response = '';
                
                switch (mentionType) {
                    case 'tool':
                        const toolIdea = message.replace(/@tool\s*/i, '').trim();
                        response = `üí° Great tool idea "${toolIdea}"! Added to our community suggestions. Other users can vote on this in our development board! üó≥Ô∏è`;
                        break;
                        
                    case 'file':
                        const fileName = message.match(/@([a-zA-Z0-9-_]+\.html)/i)?.[1];
                        response = `üìÅ Thanks for the feedback on <strong>${fileName}</strong>! Our dev team monitors these mentions for improvements. Keep the suggestions coming! üîß`;
                        break;
                        
                    case 'general':
                        response = `üëã Thanks for joining the community discussion! Feel free to share ideas, feedback, or chat with other ScribbleTools users!`;
                        break;
                        
                    default:
                        response = `üåê Message shared with the community! Other users can see and respond to your message.`;
                }
                
                addMessage(response, false);
            }, 800 + Math.random() * 400);

            // Enhanced auto-response system - more frequent responses
            if (Math.random() < 0.6) { // 60% chance of user response
                setTimeout(() => {
                    const otherUser = generateRandomUsername();
                    const randomResponse = autoResponses[Math.floor(Math.random() * autoResponses.length)];
                    addMessage(randomResponse, true, otherUser);
                }, 1500 + Math.random() * 2500);
            }

            // Additional responses for tool mentions (more engagement)
            if (mentionType === 'tool' && Math.random() < 0.4) {
                setTimeout(() => {
                    const supportiveUser = generateRandomUsername();
                    const supportResponses = [
                        "Upvoted! This would be so useful! üëç",
                        "Yes! I was just thinking about this yesterday!",
                        "The devs should definitely prioritize this! üéØ",
                        "I'd use this feature daily! Great idea! üìÖ",
                        "This community has the best suggestions! üåü",
                        "Hope this gets built soon! üöÄ"
                    ];
                    const supportResponse = supportResponses[Math.floor(Math.random() * supportResponses.length)];
                    addMessage(supportResponse, true, supportiveUser);
                }, 3000 + Math.random() * 3000);
            }

            // Occasional admin/developer responses
            if ((mentionType === 'tool' || mentionType === 'file') && Math.random() < 0.15) {
                setTimeout(() => {
                    const devResponses = [
                        "We're looking into this! Thanks for the suggestion üõ†Ô∏è",
                        "Added to our roadmap! Stay tuned for updates üìã",
                        "Great feedback! We'll discuss this in our next dev meeting üë®‚Äçüíª",
                        "This aligns with our plans! Thanks for confirming the need üéØ",
                        "Love seeing community engagement like this! Keep it coming! üí™"
                    ];
                    const devResponse = devResponses[Math.floor(Math.random() * devResponses.length)];
                    addMessage(devResponse, true, "DevTeam", true); // true for admin
                }, 4000 + Math.random() * 4000);
            }
        }

        async function sendMessage() {
            // Check if chat input exists (may not exist on main page)
            if (!chatInput) {
                console.warn('sendMessage called but chatInput not found');
                return;
            }
            
            const message = chatInput.value.trim();
            if (!message) return;

            // Simple message validation (no authentication needed)
            if (message.length > 500) {
                showNotification('Message too long! Maximum 500 characters.', 'warning');
                return;
            }

            hideAutocomplete();
            
            // Use a generated username since no authentication
            const username = generateRandomUsername();
            const mentionType = detectMentionType(message);
            
            // Add user message
            addMessage(message, true, username, false);
            
            // Clear input
            chatInput.value = '';
            
            // Check for greeting messages and auto-respond
            const lowerMessage = message.toLowerCase().trim();
            const greetings = ['hi', 'hello', 'hey', 'good morning', 'good afternoon', 'good evening', 'good night'];
            const isGreeting = greetings.some(greeting => 
                lowerMessage === greeting || 
                lowerMessage.startsWith(greeting + ' ') || 
                lowerMessage.startsWith(greeting + '!')
            );
            
            if (isGreeting) {
                const greetingResponses = [
                    `Hi ${username}! üëã Welcome to ScribbleTools!`,
                    `Hello ${username}! üòä Great to see you here! Feel free to explore our tools.`,
                    `Hey ${username}! üåü Hope you\\'re having a great day! What brings you to our tools collection?`,
                    `Hi ${username}! üëã Welcome! Check out our amazing tools or suggest new ones.`,
                    `Hello and welcome ${username}! üéâ We love feedback and suggestions!`,
                    `Hey there ${username}! üòÑ Nice to meet you! Don't hesitate to suggest new tools.`,
                    `Hi ${username}! üöÄ Welcome to the ScribbleTools family! What's your favorite type of tool?`,
                    `Hello ${username}! ‚≠ê Great to have you here! We're always improving with new ideas!`
                ];
                
                setTimeout(() => {
                    const randomGreeting = greetingResponses[Math.floor(Math.random() * greetingResponses.length)];
                    addMessage(randomGreeting, false);
                }, 500 + Math.random() * 300);
                
                // Add a second community member response for greetings
                setTimeout(() => {
                    const communityUser = generateRandomUsername();
                    const communityGreetings = [
                        `Welcome to the community ${username}! ü§ó`,
                        `Hi ${username}! Hope you find some useful tools here! üëç`,
                        `Hey ${username}! This community has the best tool suggestions! üåü`,
                        `Welcome ${username}! Feel free to ask if you need help finding anything! üòä`,
                        `Hi there ${username}! The tools here have saved me so much time! ‚è∞`,
                        `Hey ${username}! Great to see new faces in our community! üéâ`
                    ];
                    const communityResponse = communityGreetings[Math.floor(Math.random() * communityGreetings.length)];
                    addMessage(communityResponse, true, communityUser);
                }, 1200 + Math.random() * 800);
                
                chatInput.value = '';
                chatInput.style.height = 'auto';
                return; // Skip the default response system for greetings
            }
            
            // Generate appropriate response based on mention type
            setTimeout(() => {
                let response = '';
                
                switch (mentionType) {
                    case 'tool':
                        const toolIdea = message.replace(/@tool\s*/i, '').trim();
                        response = `üí° Great tool idea "${toolIdea}" from ${username}! Added to our community suggestions. Other users can vote on this in our development board! üó≥Ô∏è`;
                        break;
                        
                    case 'file':
                        const fileName = message.match(/@([a-zA-Z0-9-_]+\.html)/i)?.[1];
                        response = `üìÅ Thanks for the feedback on <strong>${fileName}</strong>, ${username}! Our dev team monitors these mentions for improvements. Keep the suggestions coming! üîß`;
                        break;
                        
                    case 'general':
                        response = `üëã Thanks for joining the community discussion, ${username}! Feel free to share ideas, feedback, or chat with other ScribbleTools users!`;
                        break;
                        
                    default:
                        response = `üåê Message from ${username} shared with the community! Other users can see and respond to your message.`;
                }
                
                addMessage(response, false);
            }, 800 + Math.random() * 400);

            // Enhanced auto-response system - more frequent responses for authenticated users
            if (Math.random() < 0.7) { // 70% chance of user response for authenticated users
                setTimeout(() => {
                    const otherUser = generateRandomUsername();
                    const randomResponse = autoResponses[Math.floor(Math.random() * autoResponses.length)];
                    addMessage(`@${username} ${randomResponse}`, true, otherUser);
                }, 1500 + Math.random() * 2500);
            }

            // Additional responses for tool mentions (more engagement)
            if (mentionType === 'tool' && Math.random() < 0.5) {
                setTimeout(() => {
                    const supportiveUser = generateRandomUsername();
                    const supportResponses = [
                        `@${username} Upvoted! This would be so useful! üëç`,
                        `@${username} Yes! I was just thinking about this yesterday!`,
                        `@${username} The devs should definitely prioritize this! üéØ`,
                        `@${username} I'd use this feature daily! Great idea! üìÖ`,
                        `@${username} This community has the best suggestions! üåü`,
                        `@${username} Hope this gets built soon! üöÄ`
                    ];
                    const supportResponse = supportResponses[Math.floor(Math.random() * supportResponses.length)];
                    addMessage(supportResponse, true, supportiveUser);
                }, 3000 + Math.random() * 3000);
            }

            // Occasional admin/developer responses
            if ((mentionType === 'tool' || mentionType === 'file') && Math.random() < 0.2) {
                setTimeout(() => {
                    const devResponses = [
                        `@${username} We're looking into this! Thanks for the suggestion üõ†Ô∏è`,
                        `@${username} Added to our roadmap! Stay tuned for updates üìã`,
                        `@${username} Great feedback! We'll discuss this in our next dev meeting üë®‚Äçüíª`,
                        `@${username} This aligns with our plans! Thanks for confirming the need üéØ`,
                        `@${username} Love seeing community engagement like this! Keep it coming! üí™`
                    ];
                    const devResponse = devResponses[Math.floor(Math.random() * devResponses.length)];
                    addMessage(devResponse, true, "DevTeam", true); // true for admin
                }, 4000 + Math.random() * 4000);
            }

            // Clear input if it exists
            if (chatInput) {
                chatInput.value = '';
                chatInput.style.height = 'auto';
            }
        }

        function showAutocomplete(suggestions) {
            if (!chatAutocomplete || suggestions.length === 0) {
                hideAutocomplete();
                return;
            }

            chatAutocomplete.innerHTML = '';
            suggestions.slice(0, 8).forEach((suggestion, index) => {
                const item = document.createElement('div');
                item.className = 'autocomplete-item';
                if (index === selectedAutocompleteIndex) {
                    item.classList.add('selected');
                }
                item.innerHTML = `
                    <span class="autocomplete-icon">${suggestion.icon}</span>
                    <span>${suggestion.name}</span>
                    <small style="margin-left: auto; opacity: 0.7;">${suggestion.category}</small>
                `;
                item.addEventListener('click', () => {
                    insertSuggestion(suggestion.name);
                });
                chatAutocomplete.appendChild(item);
            });

            chatAutocomplete.style.display = 'block';
        }

        function hideAutocomplete() {
            if (chatAutocomplete) {
                chatAutocomplete.style.display = 'none';
            }
            selectedAutocompleteIndex = -1;
        }

        function insertSuggestion(suggestionName) {
            if (!chatInput) return;
            
            const cursorPos = chatInput.selectionStart;
            const textBefore = chatInput.value.substring(0, cursorPos);
            const textAfter = chatInput.value.substring(cursorPos);
            
            // Check if we are completing an @ mention
            const atIndex = textBefore.lastIndexOf('@');
            if (atIndex !== -1 && !textBefore.substring(atIndex + 1).includes(' ')) {
                // @ mention completion
                const newText = textBefore.substring(0, atIndex + 1) + suggestionName + ' ' + textAfter;
                chatInput.value = newText;
                const newCursorPos = atIndex + suggestionName.length + 2;
                chatInput.setSelectionRange(newCursorPos, newCursorPos);
            } else {
                // Regular word completion
                const words = textBefore.split(' ');
                const currentWordIndex = words.length - 1;
                words[currentWordIndex] = suggestionName;
                const newText = words.join(' ') + ' ' + textAfter;
                chatInput.value = newText;
                const newCursorPos = words.join(' ').length + 1;
                chatInput.setSelectionRange(newCursorPos, newCursorPos);
            }
            
            hideAutocomplete();
            chatInput.focus();
        }

        function handleAutocompleteInput() {
            if (!chatInput) return;
            
            const cursorPos = chatInput.selectionStart;
            const textBefore = chatInput.value.substring(0, cursorPos);
            
            // Find the last @ symbol before cursor
            const atIndex = textBefore.lastIndexOf('@');
            
            if (atIndex === -1) {
                // Regular chat autocomplete (without @)
                const words = textBefore.split(' ');
                const currentWord = words[words.length - 1].toLowerCase();
                
                if (currentWord.length >= 2) {
                    // Filter chat suggestions and tools
                    const chatSuggestions = allSuggestions.filter(suggestion =>
                        suggestion.name.toLowerCase().startsWith(currentWord) ||
                        suggestion.name.toLowerCase().includes(currentWord)
                    );
                    
                    if (chatSuggestions.length > 0) {
                        showAutocomplete(chatSuggestions);
                    } else {
                        hideAutocomplete();
                    }
                } else {
                    hideAutocomplete();
                }
                return;
            }

            // Get text after @ symbol
            const afterAt = textBefore.substring(atIndex + 1);
            
            // Check if there's a space after @, if so, hide autocomplete
            if (afterAt.includes(' ')) {
                hideAutocomplete();
                return;
            }

            // Filter suggestions based on input
            const filteredSuggestions = allSuggestions.filter(suggestion =>
                suggestion.name.toLowerCase().includes(afterAt.toLowerCase())
            );

            if (afterAt.length > 0) {
                showAutocomplete(filteredSuggestions);
            } else {
                // Show popular suggestions when just @ is typed
                const popularSuggestions = [
                    { name: 'tool', icon: 'üîß', category: 'General' },
                    { name: 'calculator', icon: 'üî¢', category: 'Math' },
                    { name: 'password generator', icon: 'ÔøΩ', category: 'Security' },
                    { name: 'bmi calculator', icon: 'üè•', category: 'Health' },
                    { name: 'text counter', icon: 'üìù', category: 'Text' },
                    { name: 'image compressor', icon: 'üì¶', category: 'Image' },
                    { name: 'budget calculator', icon: 'ÔøΩ', category: 'Finance' },
                    { name: 'habit tracker', icon: 'üìÖ', category: 'Utility' }
                ];
                showAutocomplete(popularSuggestions);
            }
        }

        // Community Chat Popup Functions removed

        // Initialize chat system
        function initializeChat() {
            // Initialize chat DOM elements (they may not exist in main page)
            chatWindow = document.getElementById('chatWindow');
            chatInput = document.getElementById('chatInput');
            chatSend = document.getElementById('chatSend');
            chatMessages = document.getElementById('chatMessages');
            chatAutocomplete = document.getElementById('chatAutocomplete');
            
            // Only set up event listeners if chat elements exist
            if (chatInput && chatSend) {
                chatSend.addEventListener('click', sendMessage);
                chatInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
                chatInput.addEventListener('input', handleAutocompleteInput);
            }
            
            // Load chat history if available
            loadChatHistory();
        }

        // Event listeners
        window.addEventListener('hashchange', router);
        window.addEventListener('DOMContentLoaded', router);
        
        // Initialize chat system on page load
        window.addEventListener('DOMContentLoaded', initializeChat);
        
        // Legacy mobile navigation toggle - kept for compatibility
        function initializeMobileNavToggle() {
            // This function is kept for compatibility but is no longer needed
            // since we now use the hamburger menu system
        }
        
        // Legacy mobile header toggle - kept for compatibility  
        function initializeMobileHeaderToggle() {
            // This function is kept for compatibility but is no longer needed
            // since we now use the hamburger menu system
        }
        
        // Initialize mobile toggle on page load
        window.addEventListener('DOMContentLoaded', initializeMobileNavToggle);
        window.addEventListener('DOMContentLoaded', initializeMobileHeaderToggle);
        
        // Global dropdown auto-close functionality (works with hamburger menu)
        function initializeGlobalAutoClose() {
            const hamburgerMenu = document.getElementById('hamburger-menu');
            const hamburgerToolNav = document.getElementById('hamburger-tool-nav');
            
            if (!hamburgerMenu || !hamburgerToolNav) return;
            
            console.log('Initializing global auto-close functionality for hamburger menu');
            
            // Remove existing listeners first to prevent duplicates
            const existingHandler = hamburgerToolNav.dataset.autoHideHandler;
            if (existingHandler && window[existingHandler]) {
                hamburgerToolNav.removeEventListener('click', window[existingHandler]);
            }
            
            // Create a single event handler for the hamburger navigation
            const navClickHandler = function(e) {
                try {
                    // Check if clicked element is a navigation link
                    if (e.target.matches('.hamburger-nav-link') || e.target.closest('.hamburger-nav-link')) {
                        console.log('Hamburger tool link clicked');
                        
                        // Track the tool click in database
                        const linkElement = e.target.matches('.hamburger-nav-link') ? e.target : e.target.closest('.hamburger-nav-link');
                        const href = linkElement.getAttribute('href');
                        
                        if (href && href.startsWith('#') && routes[href]) {
                            const toolPath = routes[href];
                            const toolInfo = getToolInfo(href);
                            
                            // Track click asynchronously (don't block navigation)
                            trackToolClick(toolInfo.toolName, toolPath, toolInfo.category);
                            
                            // Also track with existing analytics
                            trackToolNavigation(toolInfo.toolName);
                        }
                        
                        // Always close hamburger menu when a tool link is clicked
                        const hamburgerMenuElement = document.getElementById('hamburger-menu');
                        if (hamburgerMenuElement) {
                            hamburgerMenuElement.classList.add('translate-x-full');
                            hamburgerMenuElement.classList.remove('translate-x-0');
                            document.body.style.overflow = '';
                        }
                        
                        // Close all dropdown menus in hamburger
                        const allDetails = hamburgerToolNav.querySelectorAll('details');
                        const openDetails = Array.from(allDetails).filter(details => details.hasAttribute('open'));
                        
                        console.log(`Found ${openDetails.length} open dropdown(s) in hamburger menu`);
                        
                        // Close all open details elements
                        openDetails.forEach(details => {
                            const summaryText = details.querySelector('summary')?.textContent?.trim();
                            console.log('Closing dropdown:', summaryText);
                            
                            details.removeAttribute('open');
                            
                            // Reset arrow indicator
                            const arrow = details.querySelector('summary .arrow');
                            if (arrow) {
                                arrow.style.transform = 'rotate(0deg)';
                            }
                        });
                    }
                } catch (error) {
                    console.error('Error in hamburger navigation auto-close handler:', error);
                }
            };
            
            // Store handler reference and add event listener
            const handlerName = 'globalHamburgerNavAutoHideHandler';
            window[handlerName] = navClickHandler;
            hamburgerToolNav.dataset.autoHideHandler = handlerName;
            hamburgerToolNav.addEventListener('click', navClickHandler);
            
            console.log('Global auto-close event handler attached to hamburger navigation');
        }
        
        // Initialize global auto-close on page load
        window.addEventListener('DOMContentLoaded', initializeGlobalAutoClose);
        
        // Simple periodic cleanup (no authentication needed)
        setInterval(() => {
            // Just clear any old temporary data occasionally
            const oldData = localStorage.getItem('temp_data');
            if (oldData) {
                try {
                    const data = JSON.parse(oldData);
                    const currentTime = Date.now();
                    
                    // Clean up data older than 24 hours
                    if (data.timestamp && currentTime - data.timestamp > 86400000) {
                        localStorage.removeItem('temp_data');
                    }
                } catch (error) {
                    localStorage.removeItem('temp_data');
                }
            }
        }, 60 * 60 * 1000); // Check every hour

        // Accordion functionality - Auto-close other sections when one is opened
        function setupAccordionBehavior() {
            const categories = document.querySelectorAll('.nav-category');
            const subcategories = document.querySelectorAll('.nav-subcategory');
            
            // For main categories (Text, Math, Financial, etc.)
            categories.forEach(category => {
                category.addEventListener('toggle', function(e) {
                    if (this.open) {
                        // Close all other main categories
                        categories.forEach(otherCategory => {
                            if (otherCategory !== this && otherCategory.open) {
                                otherCategory.open = false;
                            }
                        });
                    }
                });
            });
            
            // For subcategories within each main category
            subcategories.forEach(subcategory => {
                subcategory.addEventListener('toggle', function(e) {
                    if (this.open) {
                        // Find parent category
                        const parentCategory = this.closest('.nav-category');
                        
                        // Close all other subcategories within the same parent category
                        if (parentCategory) {
                            const siblingSubcategories = parentCategory.querySelectorAll('.nav-subcategory');
                            siblingSubcategories.forEach(sibling => {
                                if (sibling !== this && sibling.open) {
                                    sibling.open = false;
                                }
                            });
                        }
                    }
                });
            });
        }
        
        // Initialize accordion behavior when the page loads
        document.addEventListener('DOMContentLoaded', setupAccordionBehavior);
        
        // Also run it immediately in case DOMContentLoaded already fired
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', setupAccordionBehavior);
        } else {
            setupAccordionBehavior();
        }

        // Privacy Notice Functionality
        function initializePrivacyNotice() {
            const privacyBtn = document.getElementById('privacy-btn');
            const privacyModal = document.getElementById('privacy-modal');
            const closePrivacy = document.getElementById('close-privacy');
            const gotItBtn = document.getElementById('got-it-btn');
            const btnText = document.getElementById('btn-text');
            const lampIcon = document.getElementById('lamp-icon');

            if (!privacyBtn || !privacyModal) return;

            // Button hover effects - Magical Genie Animation
            privacyBtn.addEventListener('mouseenter', function() {
                btnText.textContent = 'Rub the Lamp';
                lampIcon.textContent = 'ü™î';
                privacyBtn.classList.add('jeene-mode');
                
                // Add magical glow effect
                privacyBtn.style.boxShadow = '0 0 25px rgba(138, 43, 226, 0.6), 0 0 50px rgba(255, 20, 147, 0.4)';
            });

            privacyBtn.addEventListener('mouseleave', function() {
                btnText.textContent = 'Privacy Notice';
                lampIcon.textContent = 'ü™î';
                privacyBtn.classList.remove('jeene-mode');
                
                // Remove magical glow
                privacyBtn.style.boxShadow = '';
            });

            // Open modal with magical effect
            privacyBtn.addEventListener('click', function() {
                privacyModal.classList.remove('hidden');
                const modalContent = privacyModal.querySelector('.bg-white');
                modalContent.classList.add('modal-enter');
                
                // Add magical sparkle effect to the modal
                createMagicalSparkles();
                
                // Track the magical interaction
                if (typeof trackCalculatorUsage === 'function') {
                    trackCalculatorUsage('Magic Genie Privacy', 'summon');
                }
            });

            // Close modal functions
            function closeModal() {
                privacyModal.classList.add('hidden');
                const modalContent = privacyModal.querySelector('.bg-white');
                modalContent.classList.remove('modal-enter');
                
                // Remove any remaining sparkles
                removeSparkles();
            }

            if (closePrivacy) closePrivacy.addEventListener('click', closeModal);
            if (gotItBtn) gotItBtn.addEventListener('click', closeModal);

            // Close on outside click
            privacyModal.addEventListener('click', function(e) {
                if (e.target === privacyModal) {
                    closeModal();
                }
            });

            // Close on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && !privacyModal.classList.contains('hidden')) {
                    closeModal();
                }
            });

            // Add magical floating animation to the privacy button
            setInterval(() => {
                if (!privacyBtn.matches(':hover')) {
                    const time = Date.now() / 1000;
                    const float = Math.sin(time) * 3;
                    const rotate = Math.sin(time * 0.5) * 2;
                    privacyBtn.style.transform = `translateY(${float}px) rotate(${rotate}deg)`;
                }
            }, 50);

            // Create magical sparkles around the modal
            function createMagicalSparkles() {
                const modal = document.getElementById('privacy-modal');
                const sparkleEmojis = ['‚ú®', '‚≠ê', 'üí´', 'üåü', 'üíé', 'üîÆ'];
                
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => {
                        const sparkle = document.createElement('div');
                        sparkle.className = 'magical-sparkle fixed pointer-events-none z-50';
                        sparkle.textContent = sparkleEmojis[Math.floor(Math.random() * sparkleEmojis.length)];
                        sparkle.style.left = Math.random() * window.innerWidth + 'px';
                        sparkle.style.top = Math.random() * window.innerHeight + 'px';
                        sparkle.style.fontSize = (Math.random() * 20 + 15) + 'px';
                        sparkle.style.animation = 'sparkle ' + (Math.random() * 2 + 1) + 's ease-in-out infinite';
                        
                        document.body.appendChild(sparkle);
                        
                        // Remove sparkle after animation
                        setTimeout(() => {
                            if (sparkle.parentNode) {
                                sparkle.parentNode.removeChild(sparkle);
                            }
                        }, 3000);
                    }, i * 200);
                }
            }

            function removeSparkles() {
                const sparkles = document.querySelectorAll('.magical-sparkle');
                sparkles.forEach(sparkle => {
                    if (sparkle.parentNode) {
                        sparkle.parentNode.removeChild(sparkle);
                    }
                });
            }
        }

        // Initialize header search functionality
        function initializeHeaderSearch() {
            const searchToggle = document.getElementById('search-toggle');
            const searchBar = document.getElementById('search-bar');
            const headerSearch = document.getElementById('header-search');
            const searchClose = document.getElementById('search-close');
            
            if (searchToggle && searchBar) {
                // Toggle search bar visibility
                searchToggle.addEventListener('click', function() {
                    const isHidden = searchBar.classList.contains('hidden');
                    if (isHidden) {
                        searchBar.classList.remove('hidden');
                        headerSearch.focus();
                    } else {
                        searchBar.classList.add('hidden');
                        headerSearch.value = '';
                        clearSearchResults();
                    }
                });
                
                // Close search bar
                if (searchClose) {
                    searchClose.addEventListener('click', function() {
                        searchBar.classList.add('hidden');
                        headerSearch.value = '';
                        clearSearchResults();
                    });
                }
                
                // Search functionality
                if (headerSearch) {
                    headerSearch.addEventListener('input', function() {
                        const searchTerm = this.value.toLowerCase();
                        if (searchTerm.length > 0) {
                            showSearchResults(searchTerm);
                        } else {
                            clearSearchResults();
                        }
                    });
                }
                
                // Close search when clicking outside
                document.addEventListener('click', function(e) {
                    if (!searchBar.contains(e.target) && !searchToggle.contains(e.target)) {
                        if (!searchBar.classList.contains('hidden')) {
                            searchBar.classList.add('hidden');
                            headerSearch.value = '';
                            clearSearchResults();
                        }
                    }
                });
            }
        }
        
        // Initialize category filtering
        function initializeCategoryFiltering() {
            const categoryBtns = document.querySelectorAll('.category-btn');
            
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    // Remove active state from all buttons
                    categoryBtns.forEach(b => b.classList.remove('bg-white', 'shadow-sm', 'text-[#D9534F]'));
                    
                    // Add active state to clicked button
                    this.classList.add('bg-white', 'shadow-sm', 'text-[#D9534F]');
                    
                    // Show category tools
                    showCategoryTools(category);
                });
            });
        }
        
        // Show search results
        function showSearchResults(searchTerm) {
            const matchingTools = [];
            
            // Search through all routes
            for (const [hash, path] of Object.entries(routes)) {
                const toolName = hash.replace('#', '').replace('-', ' ');
                if (toolName.toLowerCase().includes(searchTerm)) {
                    matchingTools.push({
                        name: toolName,
                        hash: hash,
                        path: path
                    });
                }
            }
            
            // Display search results in app container
            const appContainer = document.getElementById('app-container');
            if (matchingTools.length > 0) {
                const resultsHtml = `
                    <div class="p-6">
                        <h2 class="text-2xl font-bold mb-4">Search Results for "${searchTerm}"</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${matchingTools.map(tool => `
                                <a href="${tool.hash}" class="block p-4 border border-gray-200 rounded-lg hover:border-[#D9534F] hover:shadow-md transition-all duration-200">
                                    <h3 class="font-semibold text-gray-800 capitalize">${tool.name.replace(/-/g, ' ')}</h3>
                                </a>
                            `).join('')}
                        </div>
                    </div>
                `;
                appContainer.innerHTML = resultsHtml;
            } else {
                appContainer.innerHTML = `
                    <div class="p-6 text-center">
                        <h2 class="text-2xl font-bold mb-4">No results found</h2>
                        <p class="text-gray-600">No tools found for "${searchTerm}"</p>
                    </div>
                `;
            }
        }
        
        // Clear search results
        function clearSearchResults() {
            // Return to home content or current page
            if (window.location.hash === '' || window.location.hash === '#home') {
                const appContainer = document.getElementById('app-container');
                appContainer.innerHTML = homeContent;
            }
        }
        
        // Show category tools with subsections
        function showCategoryTools(category) {
            const categoryTools = getCategoryTools(category);
            const appContainer = document.getElementById('app-container');
            
            const categoryNames = {
                'text': 'Text Tools',
                'math': 'Math Calculators',
                'financial': 'Financial Calculators',
                'health': 'Health & Fitness',
                'image': 'Image & Media',
                'student': 'Student Tools',
                'utilities': 'General Utilities'
            };
            
            if (categoryTools.length > 0) {
                const subsections = groupToolsIntoSubsections(category, categoryTools);
                
                const toolsHtml = `
                    <div class="p-3 sm:p-4 md:p-6">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-6 md:mb-8 text-[#D9534F] text-center">${categoryNames[category]}</h2>
                        ${Object.entries(subsections).map(([sectionName, tools]) => `
                            <div class="mb-6 sm:mb-8">
                                <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800 border-b-2 border-[#D9534F] pb-2">${sectionName}</h3>
                                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 sm:gap-3 md:gap-4">
                                    ${tools.map(tool => `
                                        <a href="${tool.hash}" class="block p-3 sm:p-4 bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-lg sm:rounded-xl hover:border-[#D9534F] hover:shadow-lg hover:from-blue-50 hover:to-purple-50 transition-all duration-300 group transform hover:scale-105 active:scale-95">
                                            <h4 class="font-semibold text-sm sm:text-base text-gray-800 group-hover:text-[#D9534F] capitalize leading-tight">${tool.name.replace(/-/g, ' ')}</h4>
                                            <p class="text-xs text-gray-500 mt-1 sm:mt-2 group-hover:text-gray-600">Click to use this tool</p>
                                        </a>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                appContainer.innerHTML = toolsHtml;
            }
        }
        
        // Group tools into logical subsections
        function groupToolsIntoSubsections(category, tools) {
            const subsections = {};
            
            tools.forEach(tool => {
                let sectionName = 'Other Tools';
                
                if (category === 'text') {
                    if (tool.name.includes('case') || tool.name.includes('convert') || tool.name.includes('transform')) {
                        sectionName = 'Text Transformation';
                    } else if (tool.name.includes('count') || tool.name.includes('length') || tool.name.includes('analyze')) {
                        sectionName = 'Text Analysis';
                    } else if (tool.name.includes('format') || tool.name.includes('beautify') || tool.name.includes('minify')) {
                        sectionName = 'Text Formatting';
                    } else if (tool.name.includes('encode') || tool.name.includes('decode') || tool.name.includes('hash')) {
                        sectionName = 'Encoding & Decoding';
                    } else {
                        sectionName = 'Text Manipulation';
                    }
                } else if (category === 'math') {
                    // Basic Math Operations
                    if (tool.name.includes('basic-calculator') || tool.name.includes('square-root') || 
                        tool.name.includes('exponent') || tool.name.includes('average') || 
                        tool.name.includes('fraction') || tool.name.includes('scientific-notation') ||
                        tool.name.includes('quadratic')) {
                        sectionName = 'üî¢ Basic Math Operations';
                    }
                    // Percentage & Financial Math
                    else if (tool.name.includes('percentage') || tool.name.includes('discount') || 
                             tool.name.includes('tip-calculator') || tool.name.includes('simple-interest') ||
                             tool.name.includes('unit-price')) {
                        sectionName = 'üí∞ Percentage & Financial Math';
                    }
                    // Shape Calculators
                    else if (tool.name.includes('circle') || tool.name.includes('triangle') || 
                             tool.name.includes('rectangle') || tool.name.includes('polygon') ||
                             tool.name.includes('sphere') || tool.name.includes('cylinder') ||
                             tool.name.includes('cuboid')) {
                        sectionName = 'üî∑ Shape Calculators';
                    }
                    // Geometry - Area & Volume
                    else if (tool.name.includes('area') || tool.name.includes('volume') || 
                             tool.name.includes('perimeter') || tool.name.includes('surface')) {
                        sectionName = 'üìê Geometry - Area & Volume';
                    }
                    // Statistics & Probability
                    else if (tool.name.includes('statistics') || tool.name.includes('standard-deviation') ||
                             tool.name.includes('mean-median') || tool.name.includes('probability') ||
                             tool.name.includes('permutation') || tool.name.includes('combination') ||
                             tool.name.includes('z-score') || tool.name.includes('confidence-interval') ||
                             tool.name.includes('sample-size') || tool.name.includes('number-sequence')) {
                        sectionName = 'üìà Statistics & Probability';
                    }
                    else {
                        sectionName = 'üßÆ Other Math Tools';
                    }
                } else if (category === 'financial') {
                    if (tool.name.includes('loan') || tool.name.includes('mortgage') || tool.name.includes('amortization')) {
                        sectionName = 'Loans & Mortgages';
                    } else if (tool.name.includes('investment') || tool.name.includes('compound') || tool.name.includes('savings')) {
                        sectionName = 'Investments';
                    } else if (tool.name.includes('tax') || tool.name.includes('salary') || tool.name.includes('income')) {
                        sectionName = 'Tax & Income';
                    } else if (tool.name.includes('retirement') || tool.name.includes('401k') || tool.name.includes('pension')) {
                        sectionName = 'Retirement Planning';
                    } else {
                        sectionName = 'General Finance';
                    }
                } else if (category === 'health') {
                    if (tool.name.includes('bmi') || tool.name.includes('weight') || tool.name.includes('body')) {
                        sectionName = 'Body Measurements';
                    } else if (tool.name.includes('calorie') || tool.name.includes('nutrition') || tool.name.includes('diet')) {
                        sectionName = 'Nutrition & Diet';
                    } else if (tool.name.includes('heart') || tool.name.includes('blood') || tool.name.includes('pressure')) {
                        sectionName = 'Cardiovascular Health';
                    } else {
                        sectionName = 'General Health';
                    }
                } else if (category === 'image') {
                    if (tool.name.includes('resize') || tool.name.includes('crop') || tool.name.includes('rotate')) {
                        sectionName = 'Image Editing';
                    } else if (tool.name.includes('convert') || tool.name.includes('format') || tool.name.includes('compress')) {
                        sectionName = 'Image Conversion';
                    } else if (tool.name.includes('filter') || tool.name.includes('effect') || tool.name.includes('enhance')) {
                        sectionName = 'Image Effects';
                    } else {
                        sectionName = 'Image Tools';
                    }
                } else if (category === 'student') {
                    if (tool.name.includes('gpa') || tool.name.includes('grade') || tool.name.includes('academic')) {
                        sectionName = 'Academic Tools';
                    } else if (tool.name.includes('budget') || tool.name.includes('loan') || tool.name.includes('financial')) {
                        sectionName = 'Student Finance';
                    } else if (tool.name.includes('plan') || tool.name.includes('schedule') || tool.name.includes('time')) {
                        sectionName = 'Study Planning';
                    } else {
                        sectionName = 'Student Resources';
                    }
                } else {
                    if (tool.name.includes('password') || tool.name.includes('generator') || tool.name.includes('random')) {
                        sectionName = 'Generators';
                    } else if (tool.name.includes('date') || tool.name.includes('time') || tool.name.includes('age')) {
                        sectionName = 'Date & Time';
                    } else if (tool.name.includes('unit') || tool.name.includes('convert') || tool.name.includes('measurement')) {
                        sectionName = 'Unit Converters';
                    } else {
                        sectionName = 'Utility Tools';
                    }
                }
                
                if (!subsections[sectionName]) {
                    subsections[sectionName] = [];
                }
                subsections[sectionName].push(tool);
            });
            
            return subsections;
        }
        
        // Get tools for a specific category
        function getCategoryTools(category) {
            const categoryTools = [];
            
            // Handle regular tool categories
            for (const [hash, path] of Object.entries(routes)) {
                let toolCategory = '';
                
                if (path.includes('/text/')) toolCategory = 'text';
                else if (path.includes('/math/')) toolCategory = 'math';
                else if (path.includes('/financial/')) toolCategory = 'financial';
                else if (path.includes('/health/')) toolCategory = 'health';
                else if (path.includes('/image/')) toolCategory = 'image';
                else if (path.includes('/student/')) toolCategory = 'student';
                else toolCategory = 'utilities';
                
                if (toolCategory === category) {
                    categoryTools.push({
                        name: hash.replace('#', ''),
                        hash: hash,
                        path: path
                    });
                }
            }
            
            return categoryTools;
        }

        // Initialize hamburger menu functionality
        function initializeHamburgerMenu() {
            const hamburgerToggle = document.getElementById('mobile-menu-toggle');
            const hamburgerMenu = document.getElementById('hamburger-menu');
            const hamburgerClose = document.getElementById('hamburger-close');
            const hamburgerIcon = document.getElementById('hamburger-icon');
            const hamburgerBackdrop = document.getElementById('hamburger-backdrop');
            
            if (hamburgerToggle && hamburgerMenu && hamburgerBackdrop) {
                // Open hamburger menu with centered microscopic-to-full animation
                hamburgerToggle.addEventListener('click', function() {
                    hamburgerMenu.classList.remove('opacity-0', 'scale-[0.01]', 'w-1', 'h-1');
                    hamburgerMenu.classList.add('opacity-100', 'scale-100', 'w-64', 'sm:w-72', 'md:w-80');
                    
                    // Show backdrop
                    hamburgerBackdrop.classList.remove('opacity-0', 'pointer-events-none');
                    hamburgerBackdrop.classList.add('opacity-100', 'pointer-events-auto');
                    
                    // Focus first menu item for better keyboard navigation (desktop enhancement)
                    setTimeout(() => {
                        const firstLink = hamburgerMenu.querySelector('.hamburger-nav-link');
                        if (firstLink && window.innerWidth > 768) {
                            firstLink.focus();
                        }
                    }, 200);
                });
                
                // Close hamburger menu with full-to-microscopic animation
                function closeHamburgerMenu() {
                    hamburgerMenu.classList.add('opacity-0', 'scale-[0.01]', 'w-1', 'h-1');
                    hamburgerMenu.classList.remove('opacity-100', 'scale-100', 'w-64', 'sm:w-72', 'md:w-80');
                    
                    // Hide backdrop
                    hamburgerBackdrop.classList.add('opacity-0', 'pointer-events-none');
                    hamburgerBackdrop.classList.remove('opacity-100', 'pointer-events-auto');
                }
                
                if (hamburgerClose) {
                    // Enhanced event handling for better reliability
                    hamburgerClose.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        closeHamburgerMenu();
                    });
                    
                    hamburgerClose.addEventListener('touchend', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        closeHamburgerMenu();
                    });
                    
                    // Ensure button is always interactive
                    hamburgerClose.style.pointerEvents = 'auto';
                    hamburgerClose.style.zIndex = '999';
                }
                
                // Close menu when clicking outside the menu
                document.addEventListener('click', function(e) {
                    if (!hamburgerMenu.contains(e.target) && !hamburgerToggle.contains(e.target)) {
                        if (hamburgerMenu.classList.contains('opacity-100')) {
                            closeHamburgerMenu();
                        }
                    }
                });
                
                // Enhanced keyboard navigation for desktop
                document.addEventListener('keydown', function(e) {
                    if (hamburgerMenu.classList.contains('opacity-100')) {
                        // Close menu when pressing Escape key
                        if (e.key === 'Escape') {
                            closeHamburgerMenu();
                            hamburgerToggle.focus();
                        }
                        
                        // Navigate menu items with arrow keys (desktop enhancement)
                        if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
                            e.preventDefault();
                            const links = Array.from(hamburgerMenu.querySelectorAll('.hamburger-nav-link'));
                            const currentIndex = links.findIndex(link => link === document.activeElement);
                            
                            if (e.key === 'ArrowDown') {
                                const nextIndex = currentIndex + 1 < links.length ? currentIndex + 1 : 0;
                                links[nextIndex].focus();
                            } else {
                                const prevIndex = currentIndex > 0 ? currentIndex - 1 : links.length - 1;
                                links[prevIndex].focus();
                            }
                        }
                        
                        // Close menu with Ctrl/Cmd + W (desktop shortcut)
                        if ((e.ctrlKey || e.metaKey) && e.key === 'w') {
                            e.preventDefault();
                            closeHamburgerMenu();
                        }
                    }
                });
                
                // Close menu when clicking backdrop
                if (hamburgerBackdrop) {
                    hamburgerBackdrop.addEventListener('click', function() {
                        closeHamburgerMenu();
                    });
                }
                
                // Close menu when clicking on navigation links
                const hamburgerNavLinks = hamburgerMenu.querySelectorAll('.hamburger-nav-link');
                hamburgerNavLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        closeHamburgerMenu();
                        
                        // Track the tool click if it's a tool link
                        const href = link.getAttribute('href');
                        if (href && href.startsWith('#') && routes[href]) {
                            const toolPath = routes[href];
                            const toolInfo = getToolInfo(href);
                            trackToolClick(toolInfo.toolName, toolPath, toolInfo.category);
                            trackToolNavigation(toolInfo.toolName);
                        }
                    });
                });
            }
            
            // Sync search functionality between hamburger and main search
            if (hamburgerSearchInput && window.setupToolSearch) {
                // Set up search functionality for hamburger search
                hamburgerSearchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const toolNavLinks = document.querySelectorAll('#hamburger-tool-nav .hamburger-nav-link');
                    const categories = document.querySelectorAll('#hamburger-tool-nav .nav-category');
                    
                    if (searchTerm === '') {
                        // Show all items when search is empty
                        toolNavLinks.forEach(link => {
                            link.style.display = 'block';
                        });
                        categories.forEach(category => {
                            category.style.display = 'block';
                        });
                        return;
                    }
                    
                    let hasVisibleItems = false;
                    
                    // Filter tool links
                    toolNavLinks.forEach(link => {
                        const linkText = link.textContent.toLowerCase();
                        if (linkText.includes(searchTerm)) {
                            link.style.display = 'block';
                            hasVisibleItems = true;
                        } else {
                            link.style.display = 'none';
                        }
                    });
                    
                    // Show/hide categories based on whether they have visible items
                    categories.forEach(category => {
                        const visibleLinks = category.querySelectorAll('.hamburger-nav-link[style*="display: block"], .hamburger-nav-link:not([style*="display: none"])');
                        if (visibleLinks.length > 0) {
                            category.style.display = 'block';
                        } else {
                            category.style.display = 'none';
                        }
                    });
                });
            }
        }

        // Mobile functionality
        function initializeMobileFunctionality() {
            // Mobile category dropdown
            const mobileSelect = document.getElementById('mobile-category-select');
            if (mobileSelect) {
                mobileSelect.addEventListener('change', function() {
                    const selectedCategory = this.value;
                    if (selectedCategory) {
                        // Trigger category display using correct function
                        if (typeof showCategoryTools === 'function') {
                            showCategoryTools(selectedCategory);
                        }
                        // Reset dropdown to default after a short delay
                        setTimeout(() => {
                            this.value = '';
                        }, 1000);
                    }
                });
            }

            // Mobile search input
            const mobileSearch = document.getElementById('mobile-search');
            if (mobileSearch) {
                mobileSearch.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase().trim();
                    // Use existing search functionality
                    if (searchTerm.length > 0) {
                        if (typeof showSearchResults === 'function') {
                            showSearchResults(searchTerm);
                        }
                    } else {
                        if (typeof clearSearchResults === 'function') {
                            clearSearchResults();
                        }
                    }
                });

                // Clear search on escape
                mobileSearch.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        this.value = '';
                        this.blur();
                        // Clear search results
                        if (typeof clearSearchResults === 'function') {
                            clearSearchResults();
                        }
                    }
                });
            }

            // Mobile menu toggle with beautiful UI
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            console.log('Mobile menu toggle element:', mobileMenuToggle);
            if (mobileMenuToggle) {
                console.log('Adding click listener to mobile menu toggle');
                
                // Remove any existing event listeners
                mobileMenuToggle.replaceWith(mobileMenuToggle.cloneNode(true));
                const newToggle = document.getElementById('mobile-menu-toggle');
                
                newToggle.addEventListener('click', function(e) {
                    console.log('Mobile menu clicked!');
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Create beautiful modal menu matching website style
                    const overlay = document.createElement('div');
                    overlay.className = 'fixed inset-0 bg-gradient-to-br from-black/70 via-blue-900/30 to-purple-900/30 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fadeIn';
                    overlay.style.animation = 'fadeIn 0.3s ease-out';
                    
                    overlay.innerHTML = `
                        <div class="bg-gradient-to-br from-white via-blue-50 to-purple-50 rounded-3xl p-8 w-full max-w-sm shadow-2xl border border-purple-200 transform animate-slideUp" style="animation: slideUp 0.4s ease-out;">
                            <!-- Header -->
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                                    <span class="text-2xl text-white">üöÄ</span>
                                </div>
                                <h3 class="handwritten text-2xl text-gray-800 mb-2">ScribbleTools Menu</h3>
                                <p class="text-sm text-gray-600">Navigate to any section</p>
                            </div>
                            
                            <!-- Menu Options -->
                            <div class="space-y-3 mb-6">
                                <button class="menu-option-btn w-full text-left p-4 rounded-xl bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 border border-blue-100 hover:border-blue-200 transition-all duration-300 group transform hover:scale-105 hover:shadow-md" data-section="about">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3 group-hover:animate-bounce">‚ÑπÔ∏è</span>
                                        <div>
                                            <div class="font-semibold text-gray-800 group-hover:text-blue-700">About Us</div>
                                            <div class="text-xs text-gray-500">Learn about ScribbleTools</div>
                                        </div>
                                        <span class="ml-auto text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity">‚Üí</span>
                                    </div>
                                </button>
                                
                                <button class="menu-option-btn w-full text-left p-4 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 border border-green-100 hover:border-green-200 transition-all duration-300 group transform hover:scale-105 hover:shadow-md" data-section="request-tool">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3 group-hover:animate-pulse">üõ†Ô∏è</span>
                                        <div>
                                            <div class="font-semibold text-gray-800 group-hover:text-green-700">Request Tool</div>
                                            <div class="text-xs text-gray-500">Suggest new calculators</div>
                                        </div>
                                        <span class="ml-auto text-green-400 opacity-0 group-hover:opacity-100 transition-opacity">‚Üí</span>
                                    </div>
                                </button>
                                
                                <button class="menu-option-btn w-full text-left p-4 rounded-xl bg-gradient-to-r from-orange-50 to-yellow-50 hover:from-orange-100 hover:to-yellow-100 border border-orange-100 hover:border-orange-200 transition-all duration-300 group transform hover:scale-105 hover:shadow-md" data-section="feedback">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3 group-hover:animate-bounce">üí¨</span>
                                        <div>
                                            <div class="font-semibold text-gray-800 group-hover:text-orange-700">Feedback</div>
                                            <div class="text-xs text-gray-500">Share your thoughts</div>
                                        </div>
                                        <span class="ml-auto text-orange-400 opacity-0 group-hover:opacity-100 transition-opacity">‚Üí</span>
                                    </div>
                                </button>
                                
                                <button class="menu-option-btn w-full text-left p-4 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 border border-purple-100 hover:border-purple-200 transition-all duration-300 group transform hover:scale-105 hover:shadow-md" data-section="contact">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-3 group-hover:animate-pulse">üìß</span>
                                        <div>
                                            <div class="font-semibold text-gray-800 group-hover:text-purple-700">Contact</div>
                                            <div class="text-xs text-gray-500">Get in touch with us</div>
                                        </div>
                                        <span class="ml-auto text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity">‚Üí</span>
                                    </div>
                                </button>
                                
                                <button class="menu-option-btn w-full text-left p-4 rounded-xl bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100 border border-gray-200 hover:border-gray-300 transition-all duration-300 group transform hover:scale-105 hover:shadow-md" data-section="privacy-policy">
                                    <div class="flex items-center">
                                        <span class="text-lg mr-3 group-hover:animate-pulse">üîí</span>
                                        <div>
                                            <div class="font-semibold text-gray-800 group-hover:text-gray-700">Privacy Policy</div>
                                            <div class="text-xs text-gray-500">Our privacy commitment</div>
                                        </div>
                                        <span class="ml-auto text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity">‚Üí</span>
                                    </div>
                                </button>
                            </div>
                            
                            <!-- Close Button -->
                            <button class="w-full p-3 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl" onclick="this.closest('.fixed').remove()">
                                ‚úï Close Menu
                            </button>
                        </div>
                    `;
                    
                    document.body.appendChild(overlay);
                    
                    // Handle menu option clicks
                    overlay.querySelectorAll('.menu-option-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const section = this.getAttribute('data-section');
                            // Use proper navigation method
                            window.location.hash = '#' + section;
                            overlay.remove();
                        });
                    });
                    
                    // Close on backdrop click
                    overlay.addEventListener('click', function(e) {
                        if (e.target === overlay) {
                            overlay.remove();
                        }
                    });
                });
            }
        }

        // Real-time subscriber count display (Global function)
        function updateSubscriberDisplay() {
            const analytics = JSON.parse(localStorage.getItem('subscriptionAnalytics') || '{}');
            const totalSubscribers = Object.values(analytics).reduce((sum, day) => sum + day.count, 0);
            
            // Update any subscriber count displays
            document.querySelectorAll('.subscriber-count').forEach(el => {
                el.textContent = totalSubscribers.toLocaleString();
            });
        }

        // Blog Subscription System
        function initializeBlogSubscription() {
            // Subscription tracking
            let subscriptionShown = localStorage.getItem('subscriptionModalShown') === 'true';
            let pageViews = parseInt(localStorage.getItem('pageViews') || '0');
            let timeOnSite = 0;
            let subscribed = localStorage.getItem('userSubscribed') === 'true';
            
            // Track page views
            pageViews++;
            localStorage.setItem('pageViews', pageViews.toString());
            
            // Track time on site
            const startTime = Date.now();
            setInterval(() => {
                timeOnSite = Math.floor((Date.now() - startTime) / 1000);
            }, 1000);
            
            // Show subscription modal based on user behavior
            function showSubscriptionModal() {
                if (subscribed || subscriptionShown) return;
                
                const modal = document.getElementById('subscription-modal');
                const modalContent = document.getElementById('subscription-modal-content');
                
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modalContent.classList.remove('scale-95', 'opacity-0');
                    modalContent.classList.add('scale-100', 'opacity-100');
                }, 50);
                
                localStorage.setItem('subscriptionModalShown', 'true');
            }
            
            // Show subscription bar as alternative
            function showSubscriptionBar() {
                if (subscribed || subscriptionShown) return;
                
                const bar = document.getElementById('subscription-bar');
                bar.classList.remove('hidden');
                setTimeout(() => {
                    bar.classList.remove('translate-y-full');
                }, 100);
            }
            
            // Trigger conditions
            setTimeout(() => {
                // Show modal after 30 seconds OR 3+ page views OR return visitor
                if (timeOnSite >= 30 || pageViews >= 3 || pageViews > 1) {
                    showSubscriptionModal();
                }
            }, 30000);
            
            // Show bar after 60 seconds if modal wasn't shown
            setTimeout(() => {
                if (!subscriptionShown) {
                    showSubscriptionBar();
                }
            }, 60000);
            
            // Exit intent detection (desktop only)
            if (window.innerWidth > 768) {
                document.addEventListener('mouseleave', (e) => {
                    if (e.clientY <= 0 && !subscriptionShown && !subscribed) {
                        showSubscriptionModal();
                    }
                });
            }
            
            // Handle subscription form submissions with FREE real-time features
            async function handleSubscription(email, subscriptionTypes, source) {
                console.log('Subscription data:', { email, subscriptionTypes, source });
                
                try {
                    // 1. Store subscription locally
                    localStorage.setItem('userSubscribed', 'true');
                    localStorage.setItem('subscriberEmail', email);
                    localStorage.setItem('subscriptionDate', new Date().toISOString());
                    localStorage.setItem('subscriptionSource', source);
                    
                    // 2. Request browser notification permission (FREE)
                    if ('Notification' in window && Notification.permission !== 'granted') {
                        const permission = await Notification.requestPermission();
                        if (permission === 'granted') {
                            new Notification('üéâ Successfully Subscribed!', {
                                body: 'You\'ll receive real-time notifications for new learning resources',
                                icon: '/favicon.ico'
                            });
                        }
                    }
                    
                    // 3. FREE Email Service Integration (Choose one)
                    await subscribeToFreeEmailService(email, subscriptionTypes);
                    
                    // 4. Track subscription analytics (FREE - localStorage)
                    trackSubscription(email, source);
                    
                    return true;
                } catch (error) {
                    console.error('Subscription error:', error);
                    return false;
                }
            }
            
            // FREE Email Service Integration Options
            async function subscribeToFreeEmailService(email, subscriptionTypes) {
                // Option 1: Mailchimp Free Tier (500 contacts, 1000 emails/month)
                try {
                    const mailchimpResponse = await fetch('/api/subscribe-mailchimp', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            email, 
                            tags: subscriptionTypes,
                            source: 'scribble-tools-blog'
                        })
                    });
                    
                    if (mailchimpResponse.ok) {
                        console.log('‚úÖ Mailchimp subscription successful');
                        return true;
                    }
                } catch (error) {
                    console.log('Mailchimp unavailable, using fallback');
                }
                
                // Option 2: Brevo Free Tier (unlimited contacts, 300 emails/day)
                try {
                    const brevoResponse = await fetch('/api/subscribe-brevo', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            email, 
                            listIds: [1], // Your free Brevo list
                            attributes: { SUBSCRIPTION_TYPES: subscriptionTypes.join(',') }
                        })
                    });
                    
                    if (brevoResponse.ok) {
                        console.log('‚úÖ Brevo subscription successful');
                        return true;
                    }
                } catch (error) {
                    console.log('Brevo unavailable, using localStorage backup');
                }
                
                // Fallback: Store in localStorage for manual export
                const subscribers = JSON.parse(localStorage.getItem('pendingSubscriptions') || '[]');
                subscribers.push({
                    email,
                    subscriptionTypes,
                    date: new Date().toISOString(),
                    status: 'pending'
                });
                localStorage.setItem('pendingSubscriptions', JSON.stringify(subscribers));
                
                return true;
            }
            
            // FREE Analytics Tracking
            function trackSubscription(email, source) {
                const analytics = JSON.parse(localStorage.getItem('subscriptionAnalytics') || '{}');
                const today = new Date().toDateString();
                
                if (!analytics[today]) analytics[today] = { count: 0, sources: {} };
                analytics[today].count++;
                analytics[today].sources[source] = (analytics[today].sources[source] || 0) + 1;
                
                localStorage.setItem('subscriptionAnalytics', JSON.stringify(analytics));
                updateSubscriberDisplay();
            }
            
            // Modal subscription form
            const modalForm = document.getElementById('modal-subscription-form');
            const modalSubscribeBtn = document.getElementById('modal-subscribe-btn');
            const modalSuccess = document.getElementById('modal-success');
            
            if (modalForm) {
                modalForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const email = document.getElementById('modal-email').value;
                    const subscriptionTypes = Array.from(document.querySelectorAll('input[name="subscription_type"]:checked'))
                        .map(checkbox => checkbox.value);
                    
                    modalSubscribeBtn.textContent = '‚è≥ Subscribing...';
                    modalSubscribeBtn.disabled = true;
                    
                    try {
                        await handleSubscription(email, subscriptionTypes, 'modal');
                        modalForm.classList.add('hidden');
                        modalSuccess.classList.remove('hidden');
                    } catch (error) {
                        alert('Subscription failed. Please try again.');
                        modalSubscribeBtn.textContent = 'üöÄ Subscribe';
                        modalSubscribeBtn.disabled = false;
                    }
                });
            }
            
            // Sidebar newsletter form
            const newsletterBtn = document.getElementById('newsletter-subscribe-btn');
            const newsletterEmail = document.getElementById('newsletter-email');
            const newsletterSuccess = document.getElementById('newsletter-success');
            
            if (newsletterBtn) {
                newsletterBtn.addEventListener('click', async () => {
                    const email = newsletterEmail.value;
                    if (!email || !email.includes('@')) {
                        alert('Please enter a valid email address.');
                        return;
                    }
                    
                    const subscriptionTypes = [];
                    if (document.getElementById('blog-updates')?.checked) subscriptionTypes.push('blog_updates');
                    if (document.getElementById('tool-updates')?.checked) subscriptionTypes.push('tool_updates');
                    if (document.getElementById('weekly-tips')?.checked) subscriptionTypes.push('weekly_tips');
                    
                    newsletterBtn.textContent = '‚è≥ Subscribing...';
                    newsletterBtn.disabled = true;
                    
                    try {
                        await handleSubscription(email, subscriptionTypes, 'sidebar');
                        newsletterSuccess.classList.remove('hidden');
                        newsletterBtn.textContent = '‚úÖ Subscribed!';
                        
                        setTimeout(() => {
                            newsletterBtn.textContent = 'üöÄ Subscribe Now';
                            newsletterBtn.disabled = false;
                            newsletterEmail.value = '';
                            newsletterSuccess.classList.add('hidden');
                        }, 3000);
                    } catch (error) {
                        alert('Subscription failed. Please try again.');
                        newsletterBtn.textContent = 'üöÄ Subscribe Now';
                        newsletterBtn.disabled = false;
                    }
                });
            }
            
            // Subscription bar form
            const barSubscribeBtn = document.getElementById('bar-subscribe-btn');
            const barEmail = document.getElementById('bar-email');
            
            if (barSubscribeBtn) {
                barSubscribeBtn.addEventListener('click', async () => {
                    const email = barEmail.value;
                    if (!email || !email.includes('@')) {
                        alert('Please enter a valid email address.');
                        return;
                    }
                    
                    barSubscribeBtn.textContent = '‚è≥ Subscribing...';
                    barSubscribeBtn.disabled = true;
                    
                    try {
                        await handleSubscription(email, ['blog_updates', 'tool_updates'], 'bar');
                        barSubscribeBtn.textContent = '‚úÖ Done!';
                        
                        setTimeout(() => {
                            document.getElementById('subscription-bar').classList.add('translate-y-full');
                            setTimeout(() => {
                                document.getElementById('subscription-bar').classList.add('hidden');
                            }, 500);
                        }, 2000);
                    } catch (error) {
                        alert('Subscription failed. Please try again.');
                        barSubscribeBtn.textContent = 'Subscribe';
                        barSubscribeBtn.disabled = false;
                    }
                });
            }
            
            // Footer subscription form
            const footerSubscribeBtn = document.getElementById('footer-subscribe-btn');
            const footerEmail = document.getElementById('footer-email');
            
            if (footerSubscribeBtn) {
                footerSubscribeBtn.addEventListener('click', async () => {
                    const email = footerEmail.value;
                    if (!email || !email.includes('@')) {
                        alert('Please enter a valid email address.');
                        return;
                    }
                    
                    footerSubscribeBtn.textContent = '‚è≥ Subscribing...';
                    footerSubscribeBtn.disabled = true;
                    
                    try {
                        await handleSubscription(email, ['blog_updates', 'tool_updates'], 'footer');
                        footerSubscribeBtn.textContent = '‚úÖ Subscribed!';
                        footerEmail.value = '';
                        
                        setTimeout(() => {
                            footerSubscribeBtn.textContent = 'Subscribe';
                            footerSubscribeBtn.disabled = false;
                        }, 3000);
                    } catch (error) {
                        alert('Subscription failed. Please try again.');
                        footerSubscribeBtn.textContent = 'Subscribe';
                        footerSubscribeBtn.disabled = false;
                    }
                });
                
                // Allow Enter key to submit
                footerEmail?.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        footerSubscribeBtn.click();
                    }
                });
            }
            
            // Close modal handlers
            document.getElementById('modal-close-btn')?.addEventListener('click', closeSubscriptionModal);
            document.getElementById('modal-success-close')?.addEventListener('click', closeSubscriptionModal);
            document.getElementById('subscription-modal')?.addEventListener('click', (e) => {
                if (e.target.id === 'subscription-modal') closeSubscriptionModal();
            });
            
            // Close bar handler
            document.getElementById('bar-close-btn')?.addEventListener('click', () => {
                document.getElementById('subscription-bar').classList.add('translate-y-full');
                setTimeout(() => {
                    document.getElementById('subscription-bar').classList.add('hidden');
                }, 500);
            });
            
            function closeSubscriptionModal() {
                const modal = document.getElementById('subscription-modal');
                const modalContent = document.getElementById('subscription-modal-content');
                
                modalContent.classList.add('scale-95', 'opacity-0');
                modalContent.classList.remove('scale-100', 'opacity-100');
                
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }
        }

        // Logo click toggle functionality - Global persistent state
        let logoClickCount = 0;
        let logoEventListenersAdded = false;
        
        // FREE Real-time Push Notifications System
        function initializeFreeRealTimeNotifications() {
            // Check if browser supports notifications
            if (!('Notification' in window) || !('serviceWorker' in navigator)) {
                console.log('Browser does not support notifications');
                return;
            }
            
            // Register service worker for push notifications
            navigator.serviceWorker.register('/sw.js').catch(err => {
                // Create a simple service worker inline if file doesn't exist
                const swCode = `
                    self.addEventListener('push', event => {
                        const data = event.data ? event.data.json() : {};
                        const title = data.title || 'üìù New Blog Post!';
                        const options = {
                            body: data.body || 'Check out our latest learning resource on Scribble Tools',
                            icon: '/favicon.ico',
                            badge: '/favicon.ico',
                            data: data.url || '#blogs',
                            actions: [
                                { action: 'read', title: 'Read Now' },
                                { action: 'later', title: 'Read Later' }
                            ]
                        };
                        
                        event.waitUntil(
                            self.registration.showNotification(title, options)
                        );
                    });
                    
                    self.addEventListener('notificationclick', event => {
                        event.notification.close();
                        
                        if (event.action === 'read') {
                            clients.openWindow(event.notification.data);
                        } else if (event.action === 'later') {
                            // Add to reading list (could use localStorage)
                            console.log('Added to reading list');
                        } else {
                            clients.openWindow(event.notification.data);
                        }
                    });
                `;
                
                // Create blob URL for service worker
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                return navigator.serviceWorker.register(swUrl);
            });
        }
        
        // FREE Real-time blog update checker (polls every 5 minutes)
        function startFreeRealTimeUpdates() {
            const lastCheckTime = localStorage.getItem('lastBlogCheck') || '0';
            const checkInterval = 5 * 60 * 1000; // 5 minutes
            
            function checkForNewBlogs() {
                // Simulate checking for new learning resources
                const currentTime = Date.now();
                const timeSinceLastCheck = currentTime - parseInt(lastCheckTime);
                
                if (timeSinceLastCheck > checkInterval) {
                    // In a real implementation, you'd check your blog API/RSS feed
                    // For now, simulate a random new post
                    if (Math.random() < 0.1) { // 10% chance of new post on each check
                        showNewBlogNotification({
                            title: 'New Calculator Tool Added!',
                            body: 'Check out our latest productivity tool',
                            url: '#blogs'
                        });
                    }
                    
                    localStorage.setItem('lastBlogCheck', currentTime.toString());
                }
            }
            
            // Check immediately and then every 5 minutes
            checkForNewBlogs();
            setInterval(checkForNewBlogs, checkInterval);
        }
        
        // Show real-time notifications
        function showNewBlogNotification(blogData) {
            // Browser notification (if permitted)
            if (Notification.permission === 'granted') {
                new Notification(blogData.title, {
                    body: blogData.body,
                    icon: '/favicon.ico',
                    data: blogData.url
                });
            }
            
            // In-app toast notification (always works)
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 right-4 bg-blue-500 text-white p-4 rounded-lg shadow-lg z-50 max-w-sm';
            toast.innerHTML = `
                <div class="flex items-start gap-3">
                    <span class="text-2xl">üìù</span>
                    <div class="flex-1">
                        <h4 class="font-bold">${blogData.title}</h4>
                        <p class="text-sm opacity-90">${blogData.body}</p>
                        <div class="mt-2 flex gap-2">
                            <button onclick="window.location.hash='${blogData.url}'; this.closest('.fixed').remove();" 
                                    class="bg-white text-blue-500 px-3 py-1 rounded text-sm font-medium">
                                Read Now
                            </button>
                            <button onclick="this.closest('.fixed').remove();" 
                                    class="border border-white px-3 py-1 rounded text-sm">
                                Later
                            </button>
                        </div>
                    </div>
                    <button onclick="this.closest('.fixed').remove();" class="text-white opacity-70 hover:opacity-100">√ó</button>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Auto-remove after 8 seconds
            setTimeout(() => {
                if (toast.parentNode) toast.remove();
            }, 8000);
        }
        
        function handleLogoClick(e) {
            e.preventDefault();
            logoClickCount++;
            
            if (logoClickCount % 2 === 1) {
                // First click (and odd clicks) - show privacy policy
                window.location.hash = '#privacy-policy';
            } else {
                // Second click (and even clicks) - show about section
                window.location.hash = '#about';
            }
        }
        
        function initializeLogoToggle() {
            // Prevent multiple event listener attachments
            if (logoEventListenersAdded) return;
            
            // Use event delegation to handle clicks on logo elements
            document.addEventListener('click', function(e) {
                // Check if clicked element is a logo link
                const logoLink = e.target.closest('a[href="#privacy-policy"]');
                if (logoLink && (
                    logoLink.closest('.sm\\:hidden') || // Mobile logo
                    logoLink.closest('.hidden.sm\\:block') // Desktop logo
                )) {
                    handleLogoClick(e);
                }
            });
            
            logoEventListenersAdded = true;
            // console.log('Logo toggle functionality initialized');
        }

        // ===== Blog View Tracking System =====
        // Article metadata mapping
        const blogArticles = {
            'text-article': {
                title: 'Mastering Text Tools',
                description: 'Discover powerful text manipulation features that will save you hours of work...',
                category: 'Tutorial',
                categoryClass: 'blue',
                url: 'blog.html#text-article'
            },
            'financial-article': {
                title: 'Financial Calculator Guide',
                description: 'Master your finances with our comprehensive calculator suite...',
                category: 'Finance',
                categoryClass: 'green',
                url: 'blog.html#financial-article'
            },
            'health-article': {
                title: 'Health Calculator Guide',
                description: 'Understanding your body metrics with BMI, BMR & More...',
                category: 'Health',
                categoryClass: 'purple',
                url: 'blog.html#health-article'
            },
            'math-article': {
                title: 'Math Made Easy for Students',
                description: 'From basic arithmetic to advanced geometry and statistics...',
                category: 'Education',
                categoryClass: 'orange',
                url: 'blog.html#math-article'
            },
            'image-article': {
                title: 'Image Processing Tips',
                description: 'Master our image tools for compression and format conversion...',
                category: 'Design',
                categoryClass: 'indigo',
                url: 'blog.html#image-article'
            },
            'student-article': {
                title: 'Student Success Guide',
                description: 'Essential tools every student needs for academic excellence...',
                category: 'Student',
                categoryClass: 'teal',
                url: 'blog.html#student-article'
            },
            'time-article': {
                title: 'Master Time Management',
                description: 'Learn effective time management techniques to boost productivity...',
                category: 'Student',
                categoryClass: 'yellow',
                url: 'blog.html#time-article'
            },
            'exam-article': {
                title: 'Ace Your Exams',
                description: 'Proven strategies and tools to prepare for exams effectively...',
                category: 'Student',
                categoryClass: 'pink',
                url: 'blog.html#exam-article'
            },
            'investment-article': {
                title: 'Investment Calculator Guide',
                description: 'Start your investment journey with confidence using our calculators...',
                category: 'Finance',
                categoryClass: 'emerald',
                url: 'blog.html#investment-article'
            },
            'fitness-article': {
                title: 'Start Your Fitness Journey',
                description: 'Transform your health with comprehensive fitness calculators...',
                category: 'Health',
                categoryClass: 'red',
                url: 'blog.html#fitness-article'
            },
            'budget-article': {
                title: 'Budget Planning 101',
                description: 'Create and stick to a budget that works for you...',
                category: 'Finance',
                categoryClass: 'cyan',
                url: 'blog.html#budget-article'
            },
            'productivity-article': {
                title: '10x Your Productivity',
                description: 'Discover productivity hacks that successful people use...',
                category: 'Productivity',
                categoryClass: 'violet',
                url: 'blog.html#productivity-article'
            }
        };

        // API endpoint for blog view tracking
        const API_ENDPOINT = 'api/track-blog-views.php';
        let apiAvailable = true; // Track if API is available

        // Fetch all article views from database
        async function getArticleViews() {
            // Skip API call if we know it's not available
            if (!apiAvailable) {
                const views = localStorage.getItem('blogArticleViews');
                return views ? JSON.parse(views) : {};
            }

            try {
                const response = await fetch(API_ENDPOINT);
                
                // Check if response is JSON (not HTML error page)
                const contentType = response.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    apiAvailable = false; // Mark API as unavailable
                    const views = localStorage.getItem('blogArticleViews');
                    return views ? JSON.parse(views) : {};
                }
                
                const data = await response.json();
                
                if (data.success) {
                    // Convert array to object for easy lookup
                    const viewsObject = {};
                    data.data.forEach(article => {
                        viewsObject[article.article_id] = parseInt(article.view_count);
                    });
                    return viewsObject;
                }
            } catch (error) {
                apiAvailable = false; // Mark API as unavailable
                // Fallback to localStorage if API fails
                const views = localStorage.getItem('blogArticleViews');
                return views ? JSON.parse(views) : {};
            }
            return {};
        }

        async function getTopViewedArticles(limit = 3) {
            const views = await getArticleViews();
            const articlesWithViews = Object.entries(views)
                .map(([id, viewCount]) => ({
                    id,
                    viewCount,
                    ...blogArticles[id]
                }))
                .filter(article => article.title) // Only include articles with metadata
                .sort((a, b) => b.viewCount - a.viewCount)
                .slice(0, limit);
            
            return articlesWithViews;
        }

        async function displayTopViewedArticles() {
            const container = document.getElementById('top-viewed-articles');
            if (!container) return;

            const topArticles = await getTopViewedArticles(3);
            
            if (topArticles.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <p class="text-sm">No articles viewed yet. Check out our blog articles below!</p>
                    </div>
                `;
                return;
            }

            const articlesHTML = topArticles.map((article, index) => `
                <article class="bg-white/90 rounded-xl p-4 shadow-md hover:shadow-xl transition-all duration-300 border-2 border-${article.categoryClass}-200 cursor-pointer transform hover:scale-105" onclick="window.location.href='${article.url}'">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-${article.categoryClass}-400 to-${article.categoryClass}-600 flex items-center justify-center text-white font-bold text-lg">
                            ${index + 1}
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-base text-gray-800 mb-1 hover:text-${article.categoryClass}-600 transition-colors line-clamp-2">
                                ${article.title}
                            </h3>
                            <p class="text-gray-600 text-xs mb-2 line-clamp-2">
                                ${article.description}
                            </p>
                            <div class="flex items-center justify-between text-xs">
                                <span class="flex items-center text-gray-700 font-semibold">
                                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                    </svg>
                                    ${article.viewCount.toLocaleString()} views
                                </span>
                                <span class="bg-${article.categoryClass}-100 text-${article.categoryClass}-800 px-2 py-1 rounded-full font-semibold">
                                    ${article.category}
                                </span>
                            </div>
                        </div>
                    </div>
                </article>
            `).join('');

            container.innerHTML = articlesHTML;
        }

        function initializeTopViewedArticles() {
            displayTopViewedArticles();
            // Update every 5 seconds in case user opens articles in another tab
            setInterval(displayTopViewedArticles, 5000);
        }

        // Initialize all systems when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializePrivacyNotice);
            document.addEventListener('DOMContentLoaded', initializeHeaderSearch);
            document.addEventListener('DOMContentLoaded', initializeCategoryFiltering);
            document.addEventListener('DOMContentLoaded', initializeHamburgerMenu);
            document.addEventListener('DOMContentLoaded', initializeMobileFunctionality);
            document.addEventListener('DOMContentLoaded', initializeBlogSubscription);
            document.addEventListener('DOMContentLoaded', initializeLogoToggle);
            document.addEventListener('DOMContentLoaded', initializeFreeRealTimeNotifications);
            document.addEventListener('DOMContentLoaded', startFreeRealTimeUpdates);
            document.addEventListener('DOMContentLoaded', updateSubscriberDisplay);
            document.addEventListener('DOMContentLoaded', initializeTopViewedArticles);
        } else {
            initializePrivacyNotice();
            initializeHeaderSearch();
            initializeCategoryFiltering();
            initializeHamburgerMenu();
            initializeMobileFunctionality();
            initializeBlogSubscription();
            initializeLogoToggle();
            initializeFreeRealTimeNotifications();
            startFreeRealTimeUpdates();
            updateSubscriberDisplay();
            initializeTopViewedArticles();
        }
    </script>

</body>
</html>
